```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              OPENCLAW ARCHITECTURE                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  USERS & PLATFORMS
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ğŸ‘¤ Telegram    ğŸ‘¤ WhatsApp    ğŸ‘¤ Slack    ğŸ‘¤ Discord    ğŸ‘¤ Signal    ğŸ‘¤ WebChat
  (grammY)      (Baileys)     (Bolt)     (discord.js)  (signal-cli)  (browser)
      â”‚              â”‚            â”‚            â”‚             â”‚            â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CHANNEL PLUGIN LAYER                          extensions/{telegram,slack,...}/
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Each channel is a plugin with openclaw.plugin.json manifest

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Channel Plugin (e.g. Telegram)                              â”‚
  â”‚  â”œâ”€ startAccount(token) â†’ connect to platform API            â”‚
  â”‚  â”œâ”€ onMessage â†’ normalize to ChannelMessage {                â”‚
  â”‚  â”‚    sender, text, media, threadId, groupId                 â”‚
  â”‚  â”‚  }                                                        â”‚
  â”‚  â”œâ”€ Validate: allowFrom policy (allowlist / pairing)         â”‚
  â”‚  â”œâ”€ sendText(to, text, opts)     â† outbound                 â”‚
  â”‚  â””â”€ sendMedia(to, text, url)     â† outbound                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  GATEWAY (single Node.js process)              src/gateway/server.impl.ts
  Port: 18789 (default)  â”‚  Lock: one per config path
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚  CHANNEL MANAGER  â”‚   â”‚  WEBSOCKET SERVER â”‚   â”‚  HTTP SERVER     â”‚   â”‚
  â”‚  â”‚  server-channels  â”‚   â”‚  ws-connection.ts â”‚   â”‚  (Express)       â”‚   â”‚
  â”‚  â”‚                   â”‚   â”‚                   â”‚   â”‚                  â”‚   â”‚
  â”‚  â”‚ Per-channel:      â”‚   â”‚ JSON-RPC frames   â”‚   â”‚ /health          â”‚   â”‚
  â”‚  â”‚ â”œâ”€ AbortCtrl      â”‚   â”‚ Auth: token/pwd   â”‚   â”‚ /v1/chat (API)   â”‚   â”‚
  â”‚  â”‚ â”œâ”€ Task promise   â”‚   â”‚ Scopes:           â”‚   â”‚ Control UI       â”‚   â”‚
  â”‚  â”‚ â””â”€ Runtime snap   â”‚   â”‚ â”œâ”€ operator.read  â”‚   â”‚                  â”‚   â”‚
  â”‚  â”‚                   â”‚   â”‚ â”œâ”€ operator.write  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚  â”‚ startChannels()   â”‚   â”‚ â”œâ”€ operator.admin  â”‚                         â”‚
  â”‚  â”‚ stopChannel()     â”‚   â”‚ â””â”€ operator.pair   â”‚                         â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
  â”‚           â”‚                        â”‚                                     â”‚
  â”‚           â–¼                        â–¼                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚                    MESSAGE ROUTER                                â”‚    â”‚
  â”‚  â”‚                                                                  â”‚    â”‚
  â”‚  â”‚  Inbound ChannelMessage                                         â”‚    â”‚
  â”‚  â”‚      â”‚                                                           â”‚    â”‚
  â”‚  â”‚      â”œâ”€ Derive sessionKey:                                       â”‚    â”‚
  â”‚  â”‚      â”‚   "telegram:12345"  (per-sender)                         â”‚    â”‚
  â”‚  â”‚      â”‚   "slack:channel#group"  (group)                         â”‚    â”‚
  â”‚  â”‚      â”‚   "@global"  (global mode)                               â”‚    â”‚
  â”‚  â”‚      â”‚                                                           â”‚    â”‚
  â”‚  â”‚      â”œâ”€ Load SessionEntry from store                             â”‚    â”‚
  â”‚  â”‚      â”‚   (model, provider, thinkLevel, tokens, overrides)       â”‚    â”‚
  â”‚  â”‚      â”‚                                                           â”‚    â”‚
  â”‚  â”‚      â”œâ”€ Broadcast to WebSocket clients:                          â”‚    â”‚
  â”‚  â”‚      â”‚   event: "chat" { state: "user", text, sender }          â”‚    â”‚
  â”‚  â”‚      â”‚                                                           â”‚    â”‚
  â”‚  â”‚      â””â”€ Trigger: auto-reply handler                              â”‚    â”‚
  â”‚  â”‚              â”‚                                                   â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                 â”‚                                                       â”‚
  â”‚                 â–¼                                                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚                AGENT RUNNER                                      â”‚    â”‚
  â”‚  â”‚                auto-reply/reply/agent-runner.ts                  â”‚    â”‚
  â”‚  â”‚                                                                  â”‚    â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
  â”‚  â”‚  â”‚  1. MODEL SELECTION          model-selection.ts     â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ Resolve: agents.defaults.model               â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ Alias: "opus" â†’ "claude-opus-4-6"           â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ Provider: anthropic / google / openai / ...  â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â””â”€ Auth profile: round-robin API keys           â”‚         â”‚    â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
  â”‚  â”‚                    â”‚                                             â”‚    â”‚
  â”‚  â”‚                    â–¼                                             â”‚    â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
  â”‚  â”‚  â”‚  2. SYSTEM PROMPT BUILD      system-prompt.ts       â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ Identity: name, emoji from config            â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ SOUL.md: custom persona override             â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ Tools: available tool summaries              â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ Skills: scanned from workspace/.skills/      â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ Memory: recall instructions                  â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ Context files: workspace structure           â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ Runtime: date/time, timezone, OS info        â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â””â”€ Heartbeat prompt (if heartbeat run)          â”‚         â”‚    â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
  â”‚  â”‚                    â”‚                                             â”‚    â”‚
  â”‚  â”‚                    â–¼                                             â”‚    â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
  â”‚  â”‚  â”‚  3. EXECUTION (two paths)                           â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚                                                     â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  PATH A: Embedded Pi Agent (default)                â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  pi-embedded-runner/run.ts                          â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”œâ”€ Create AgentSession                             â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”œâ”€ Loop:                                           â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”‚   request(messages) â†’ Model API â”€â”€â”              â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”‚          â–¼                                       â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”‚   response_delta â†’ emit "chat" delta             â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”‚   tool_use â†’ execute tool â†’ tool_result          â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”‚   response_final â†’ collect text                  â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”‚          â”‚                                       â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”‚          â””â”€â”€â”€ continue until done                â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”œâ”€ Context guard: token tracking                   â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â””â”€ Compaction if context window exceeded           â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚                                                     â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  PATH B: CLI Agent (claude/codex binary)            â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  cli-runner.ts                                      â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”œâ”€ Spawn subprocess                                â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â”œâ”€ Write prompt to stdin                           â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚  â””â”€ Read response from stdout                       â”‚         â”‚    â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
  â”‚  â”‚                    â”‚                                             â”‚    â”‚
  â”‚  â”‚                    â–¼                                             â”‚    â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
  â”‚  â”‚  â”‚  4. MODEL FALLBACK          model-fallback.ts       â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ If primary fails â†’ try fallback model        â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â”œâ”€ If provider down â†’ switch provider           â”‚         â”‚    â”‚
  â”‚  â”‚  â”‚     â””â”€ Auth profile cooldown on failure             â”‚         â”‚    â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
  â”‚  â”‚                    â”‚                                             â”‚    â”‚
  â”‚  â”‚                    â–¼                                             â”‚    â”‚
  â”‚  â”‚          ReplyPayload[] { text, mediaUrls, tags }               â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                 â”‚                                                       â”‚
  â”‚                 â–¼                                                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚  OUTBOUND DELIVERY             infra/outbound/deliver.ts        â”‚    â”‚
  â”‚  â”‚                                                                  â”‚    â”‚
  â”‚  â”‚  ReplyPayload[]                                                  â”‚    â”‚
  â”‚  â”‚      â”‚                                                           â”‚    â”‚
  â”‚  â”‚      â”œâ”€ Chunk text by channel limit (4096/2000/etc.)            â”‚    â”‚
  â”‚  â”‚      â”œâ”€ Parse tags: [[reply_to_current]], threading             â”‚    â”‚
  â”‚  â”‚      â”œâ”€ Strip markers: HEARTBEAT_OK, SILENT_REPLY_TOKEN         â”‚    â”‚
  â”‚  â”‚      â”œâ”€ Route to channel adapter: sendText() / sendMedia()      â”‚    â”‚
  â”‚  â”‚      â”œâ”€ Mirror to transcript (.sessions/<key>.txt)              â”‚    â”‚
  â”‚  â”‚      â””â”€ Emit outbound_payload hook                              â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                             â”‚                                           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚  BROADCAST (parallel)    â”‚                                       â”‚   â”‚
  â”‚  â”‚                          â”‚                                       â”‚   â”‚
  â”‚  â”‚  To WebSocket clients: â”€â”€â”¤â”€â”€ event: "chat" { state: "final" }   â”‚   â”‚
  â”‚  â”‚                          â”‚â”€â”€ event: "thinking" { delta/end }     â”‚   â”‚
  â”‚  â”‚                          â”‚â”€â”€ event: "tool_use" { name, input }   â”‚   â”‚
  â”‚  â”‚                          â””â”€â”€ event: "tool_result" { output }     â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                                         â”‚
  â”‚  â”Œ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”   â”‚
  â”‚    BACKGROUND SERVICES                                              â”‚   â”‚
  â”‚  â”‚                                                                  â”‚   â”‚
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
  â”‚  â”‚ â”‚ CRON SERVICE    â”‚  â”‚ HEARTBEAT    â”‚  â”‚ CONFIG HOT-RELOAD   â”‚  â”‚   â”‚
  â”‚    â”‚ server-cron.ts  â”‚  â”‚ heartbeat-   â”‚  â”‚ server-config-      â”‚  â”‚   â”‚
  â”‚  â”‚ â”‚                 â”‚  â”‚ runner.ts    â”‚  â”‚ reload.ts           â”‚  â”‚   â”‚
  â”‚    â”‚ add/update/rm   â”‚  â”‚              â”‚  â”‚                     â”‚  â”‚   â”‚
  â”‚  â”‚ â”‚ cron schedules  â”‚  â”‚ Interval-    â”‚  â”‚ fs.watch config     â”‚  â”‚   â”‚
  â”‚    â”‚ stored in       â”‚  â”‚ based agent  â”‚  â”‚ Reload channels     â”‚  â”‚   â”‚
  â”‚  â”‚ â”‚ .cron file      â”‚  â”‚ health pings â”‚  â”‚ Update models       â”‚  â”‚   â”‚
  â”‚    â”‚                 â”‚  â”‚              â”‚  â”‚ Restart affected    â”‚  â”‚   â”‚
  â”‚  â”‚ â”‚ Triggers agent  â”‚  â”‚ HEARTBEAT_OK â”‚  â”‚ services            â”‚  â”‚   â”‚
  â”‚    â”‚ runs on sched   â”‚  â”‚ = suppress   â”‚  â”‚                     â”‚  â”‚   â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
  â”‚                                                                     â”‚   â”‚
  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
  â”‚    â”‚ PLUGIN SYSTEM   â”‚  â”‚ NODE REGISTRYâ”‚  â”‚ CANVAS HOST         â”‚  â”‚   â”‚
  â”‚  â”‚ â”‚ server-plugins  â”‚  â”‚ node-reg.ts  â”‚  â”‚ (A2UI visual)       â”‚  â”‚   â”‚
  â”‚    â”‚                 â”‚  â”‚              â”‚  â”‚                     â”‚  â”‚   â”‚
  â”‚  â”‚ â”‚ Load extensions â”‚  â”‚ Track paired â”‚  â”‚ Live rendering      â”‚  â”‚   â”‚
  â”‚    â”‚ Register hooks  â”‚  â”‚ devices      â”‚  â”‚ for agent UI        â”‚  â”‚   â”‚
  â”‚  â”‚ â”‚ Add HTTP routes â”‚  â”‚ (mobile/mac) â”‚  â”‚ output              â”‚  â”‚   â”‚
  â”‚    â”‚ Add WS methods  â”‚  â”‚ Remote exec  â”‚  â”‚                     â”‚  â”‚   â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
  â”‚  â”” â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”˜   â”‚
  â”‚                                                                         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  TOOL EXECUTION                                    src/agents/tools/
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ exec (bash)  â”‚ â”‚ read/write/  â”‚ â”‚ web_search   â”‚ â”‚ message          â”‚
  â”‚              â”‚ â”‚ edit/grep/ls â”‚ â”‚ web_fetch    â”‚ â”‚ (outbound msg)   â”‚
  â”‚ PTY support  â”‚ â”‚              â”‚ â”‚              â”‚ â”‚                  â”‚
  â”‚ Approval     â”‚ â”‚ Scoped to    â”‚ â”‚ Brave API    â”‚ â”‚ send/react/edit  â”‚
  â”‚ flow if      â”‚ â”‚ workspace    â”‚ â”‚ HTMLâ†’MD      â”‚ â”‚ unsend           â”‚
  â”‚ configured   â”‚ â”‚ directory    â”‚ â”‚ 15min cache  â”‚ â”‚ channel-aware    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ browser      â”‚ â”‚ memory       â”‚ â”‚ cron         â”‚ â”‚ sessions         â”‚
  â”‚ (Playwright) â”‚ â”‚              â”‚ â”‚              â”‚ â”‚                  â”‚
  â”‚ Screenshots  â”‚ â”‚ memory_searchâ”‚ â”‚ add/update/  â”‚ â”‚ sessions_spawn   â”‚
  â”‚ Navigation   â”‚ â”‚ memory_get   â”‚ â”‚ remove/run   â”‚ â”‚ sessions_send    â”‚
  â”‚ Form fills   â”‚ â”‚ MEMORY.md +  â”‚ â”‚ cron format  â”‚ â”‚ Sub-agent        â”‚
  â”‚ Sandboxed    â”‚ â”‚ memory/*.md  â”‚ â”‚ scheduling   â”‚ â”‚ delegation       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ SKILLS (50+)                                      skills/           â”‚
  â”‚ apple-notes, github, himalaya (email), 1password, camsnap,         â”‚
  â”‚ goplaces, food-order, blogwatcher, gifgrep, coding-agent, ...      â”‚
  â”‚ Each skill: SKILL.md + custom tools + instructions                 â”‚
  â”‚ Installed to: workspace/.skills/                                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PERSISTENT STATE                                  ~/.openclaw/
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ~/.openclaw/
  â”œâ”€â”€ config                        â† YAML/JSON5, single global config
  â”‚   â”œâ”€ agents: { defaults, <agentId>: { identity, model, heartbeat } }
  â”‚   â”œâ”€ channels: { telegram: { token, allowFrom, accounts } }
  â”‚   â”œâ”€ gateway: { port, auth, tls, controlUi }
  â”‚   â”œâ”€ messages: { prefix, ackReaction }
  â”‚   â”œâ”€ plugins: { enable/disable }
  â”‚   â””â”€ sandbox, memory, hooks, discovery...
  â”‚
  â”œâ”€â”€ agents/<agentId>/
  â”‚   â”œâ”€â”€ SOUL.md                   â† Custom persona / system prompt override
  â”‚   â”œâ”€â”€ BOOT.md                   â† One-time startup script
  â”‚   â”œâ”€â”€ sessions.json5            â† All sessions (45s TTL cache, 500 cap)
  â”‚   â”‚   â””â”€ { "telegram:12345": SessionEntry { model, tokens, overrides } }
  â”‚   â”œâ”€â”€ CREDENTIALS.md            â† Encrypted API keys / OAuth tokens
  â”‚   â””â”€â”€ workspace/
  â”‚       â”œâ”€â”€ MEMORY.md             â† Persistent agent memory
  â”‚       â”œâ”€â”€ memory/               â† Indexed memory chunks
  â”‚       â”œâ”€â”€ .skills/              â† Installed skills
  â”‚       â”œâ”€â”€ .cron                 â† Cron schedule
  â”‚       â”œâ”€â”€ .sessions/            â† Conversation transcripts
  â”‚       â””â”€â”€ [user files]          â† Anything the agent creates
  â”‚
  â””â”€â”€ .extensions/<extId>/          â† Per-extension state & config


 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  EXTERNAL CONNECTIONS
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Anthropic API  â”‚  â”‚   Google AI      â”‚  â”‚   OpenAI API    â”‚
  â”‚   (Claude)       â”‚  â”‚   (Gemini)       â”‚  â”‚   (GPT)         â”‚
  â”‚                  â”‚  â”‚                  â”‚  â”‚                 â”‚
  â”‚   Default:       â”‚  â”‚   Fallback or    â”‚  â”‚   Fallback or   â”‚
  â”‚   claude-opus-4-6â”‚  â”‚   primary        â”‚  â”‚   primary       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  AWS Bedrock     â”‚  â”‚  Google Vertex   â”‚  â”‚  Azure Foundry  â”‚
  â”‚  (cloud hosted)  â”‚  â”‚  (cloud hosted)  â”‚  â”‚  (cloud hosted) â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  NATIVE APPS & DAEMONS
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  macOS App        â”‚  â”‚  iOS App          â”‚  â”‚  Swabble Daemon          â”‚
  â”‚  apps/macos/      â”‚  â”‚  apps/ios/        â”‚  â”‚  Swabble/                â”‚
  â”‚                   â”‚  â”‚                   â”‚  â”‚                          â”‚
  â”‚  Menu bar +       â”‚  â”‚  Mobile client    â”‚  â”‚  Wake-word: "clawd"      â”‚
  â”‚  WebSocket to     â”‚  â”‚  WebSocket to     â”‚  â”‚  Speech.framework        â”‚
  â”‚  gateway          â”‚  â”‚  gateway          â”‚  â”‚  AVAudioEngine           â”‚
  â”‚                   â”‚  â”‚                   â”‚  â”‚  Triggers hooks on       â”‚
  â”‚                   â”‚  â”‚                   â”‚  â”‚  detection               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Android App      â”‚
  â”‚  apps/android/    â”‚
  â”‚  (Kotlin)         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  WEB CONTROL UI                                    ui/ (Vite + Lit)
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Browser â†’ https://localhost:18789/                                  â”‚
  â”‚                                                                      â”‚
  â”‚  WebSocket <-> Gateway                                               â”‚
  â”‚  â”œâ”€ Chat interface (send/receive messages)                           â”‚
  â”‚  â”œâ”€ Live streaming (thinking, tool_use, tool_result events)          â”‚
  â”‚  â”œâ”€ Channel status dashboard                                         â”‚
  â”‚  â”œâ”€ Session management                                               â”‚
  â”‚  â”œâ”€ Model / agent configuration                                      â”‚
  â”‚  â”œâ”€ Cron job management                                              â”‚
  â”‚  â”œâ”€ Skill browser                                                    â”‚
  â”‚  â””â”€ Approval UI (exec permission prompts)                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  KEY ARCHITECTURAL NOTES
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  1. Single process, single tenant â€” everything runs in one Node.js process
     behind a gateway lock file

  2. Plugin-driven channels â€” each messaging platform is an extension with
     a standard interface (startAccount, sendText, sendMedia)

  3. Two agent execution paths â€” embedded Pi agent (full agentic loop with
     tool use) or CLI subprocess (simpler, buffered output)

  4. Event-driven streaming â€” every agent delta, tool call, and thinking
     step is broadcast over WebSocket in real-time

  5. File-based state â€” config, sessions, memory, and credentials all live
     under ~/.openclaw/ as JSON5/YAML with in-memory caching

  6. SOUL.md is the personality â€” a user-editable file injected into the
     system prompt, defining the agent's persona and rules

  7. Skills are hot-loadable â€” 50+ bundled skills discovered at runtime,
     each with its own tools and instructions

  8. Model-agnostic â€” supports Anthropic, Google, OpenAI, Bedrock, Vertex,
     and Azure with automatic fallback chains
```
