{"id":"openclaw-3m8","title":"Route Gmail hook mapping to gmail-hook agent","description":"Update the Gmail hook mapping in openclaw.json on openclaw.local to add agentId: 'gmail-hook'. This ensures incoming Gmail notifications run under the dedicated agent (which has memory disabled) rather than the default main agent. Depends on the gmail-hook agent config being created first.","status":"deleted","priority":2,"issue_type":"task","owner":"124476234+JonathanWorks@users.noreply.github.com","created_at":"2026-02-19T04:26:33Z","created_by":"Jonathan Works","updated_at":"2026-02-19T04:42:27Z","dependencies":[{"issue_id":"openclaw-3m8","depends_on_id":"openclaw-jpl","type":"blocks","created_at":"2026-02-18T20:26:44Z","created_by":"Jonathan Works","metadata":"{}"}]}
{"id":"openclaw-89t","title":"Reset CHARLIE main session to clear polluted context","description":"The main CHARLIE agent session (agent:main:main) has accumulated overwhelming context from shared memory recall of Gmail hook sessions. Reset the session transcript on openclaw.local to restore clean state. Run /new in OpenClaw after clearing. Config, memory store, and hook setup are unaffected.","status":"closed","priority":1,"issue_type":"chore","owner":"124476234+JonathanWorks@users.noreply.github.com","created_at":"2026-02-19T04:26:32Z","created_by":"Jonathan Works","updated_at":"2026-02-19T04:42:34Z","closed_at":"2026-02-19T04:42:34Z","close_reason":"Separate one-time action, not a code change to track"}
{"id":"openclaw-jpl","title":"Add dedicated gmail-hook agent with memory capture disabled","description":"Create a gmail-hook agent entry in openclaw.json on openclaw.local that sets memorySearch.enabled: false. This prevents Gmail hook sessions from writing to the shared memory store, which is the root cause of CHARLIE session pollution. Each email currently runs in its own isolated session (agent:main:hook:gmail:\u003cid\u003e) but autoCapture:true saves responses to shared memory, and autoRecall:true injects those into CHARLIE's bootstrap context on every turn.","status":"deleted","priority":2,"issue_type":"feature","owner":"124476234+JonathanWorks@users.noreply.github.com","created_at":"2026-02-19T04:26:32Z","created_by":"Jonathan Works","updated_at":"2026-02-19T04:42:26Z"}
{"id":"openclaw-rwo","title":"Local patch: suppress NO_REPLY hook system events to CHARLIE","description":"Two-file local patch applied against openclaw main to prevent Gmail hook volume from flooding CHARLIE's context.\n\nUPSTREAM ISSUES (monitor these for when openclaw ships a fix):\n- #20196: fix(hooks): duplicate delivery when hook agent turn uses announce flow\n  https://github.com/openclaw/openclaw/issues/20196\n\nFILES PATCHED:\n1. src/gateway/server/hooks.ts (lines 89-96)\n   Guard enqueueSystemEvent + requestHeartbeatNow with !result.delivered\n   so CHARLIE is not notified when the hook session already handled delivery.\n\n2. src/cron/isolated-agent/run.ts (line 725)\n   When synthesizedText === SILENT_REPLY_TOKEN (NO_REPLY), return with\n   delivered: true so hooks.ts skips the system event entirely.\n\nHOW TO REBASE ON OPENCLAW UPDATES:\n- Run: git diff HEAD~1 src/gateway/server/hooks.ts src/cron/isolated-agent/run.ts\n- If openclaw upstream merges #20196, check if their fix covers both files\n- The run.ts NO_REPLY fix may not be in upstream #20196 (that issue only covers\n  the hooks.ts duplicate delivery path, not the silent reply suppression)\n- Verify after every openclaw upgrade: git log --oneline src/gateway/server/hooks.ts\n\nWHEN TO CLOSE THIS:\nWhen openclaw upstream ships a fix that covers both: (1) delivered-guard in hooks.ts\nAND (2) delivered:true on SILENT_REPLY_TOKEN returns in run.ts.","notes":"UPGRADE CHECKLIST â€” run this every time openclaw updates:\n\n1. git log --oneline src/gateway/server/hooks.ts | head -5\n   Look for a commit touching the enqueueSystemEvent guard.\n\n2. git log --oneline src/cron/isolated-agent/run.ts | head -5\n   Look for a commit touching SILENT_REPLY_TOKEN return path.\n\n3. Check if upstream closed #20196:\n   gh issue view 20196 --repo openclaw/openclaw | head -5\n\n4. If upstream fix exists: compare their diff to ours before removing patch.\n   Their fix may only cover hooks.ts (duplicate delivery) but NOT the\n   run.ts NO_REPLY -\u003e delivered:true change.\n\n5. If still unpatched: re-apply via:\n   git apply .beads/openclaw-hook-fix.patch  (if we store it there)\n   OR manually re-edit both files from this issue description.","status":"open","priority":1,"issue_type":"task","owner":"124476234+JonathanWorks@users.noreply.github.com","created_at":"2026-02-19T04:42:27Z","created_by":"Jonathan Works","updated_at":"2026-02-19T04:56:40Z"}
