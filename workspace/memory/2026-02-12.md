# 2026-02-12

## Decisions
- **Backend DB:** Supabase or local Postgres only. No Tally integration for now — deferred.
- **Memory system:** Keep it simple. MEMORY.md (small cheat sheet) + daily files (detailed). No topic files, no fancy structure. Just write more, write often, write immediately.
- **AutifyME pivot** continues (see MEMORY.md)

## PC Auto-Start Setup
- **Motherboard:** ASRock B450 Steel Legend
- **Issue:** BIOS "Restore on AC Power Loss → Power On" not working after power cuts
- **Disabled Windows Fast Startup:** `powercfg /h off` + `reg add HKLM\...\Power /v HiberbootEnabled /t REG_DWORD /d 0 /f`
- **Still not working after restart** — likely BIOS settings need changing:
  - Advanced → ACPI Configuration → **Deep Sleep → Disabled**
  - Advanced → ACPI Configuration → **ErP Ready → Disabled**
- **Status:** Abhishek needs to check BIOS manually. Pending.

## OpenClaw Auto-Start
- Was running manually via `pnpm run openclaw gateway` from `D:\openclaw`
- Tried Windows Scheduled Task — failed (needs admin elevation)
- **Solution:** Added startup bat file:
  - Path: `C:\Users\autif\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup\openclaw-gateway.bat`
  - Content: `cd /d D:\openclaw && start "" "C:\Program Files\nodejs\node.exe" scripts/run-node.mjs gateway`
- Now OpenClaw starts automatically on Windows login

## Workspace Migration
- **Moved workspace** from `C:\Users\autif\.openclaw\workspace` → `D:\openclaw\workspace`
- Updated config via `gateway config.patch`: `agents.defaults.workspace = "D:\\openclaw\\workspace"`
- Deleted old workspace at `C:\Users\autif\.openclaw\workspace`
- **Reason:** Keep all OpenClaw files together on D: drive
- AutifyME repo path updated: `D:\openclaw\workspace\AutifyME`

## D: Drive Contents
- `D:\openclaw` — OpenClaw source + workspace
- `D:\.pnpm-store` — pnpm package cache
- `D:\tmp` — temp folder

## Identity
- Updated IDENTITY.md: I'm Jarvis, Abhishek is Tony Stark
- Updated SOUL.md vibe section to match
- We're partners building things normal people can't imagine

## Memory System Overhaul
- Trimmed MEMORY.md from ~2KB to ~1.1KB — removed historical details, kept only essentials
- Removed: TallyPrime setup details, GST registration specifics, online presence details, AutifyME architecture details
- **Rule:** MEMORY.md = cheat sheet (what I need EVERY conversation). Daily files = details (searchable).
- Updated AGENTS.md with "Daily File Discipline" section — write continuously, not just at compaction
- Discussed fancy alternatives (git commits as memory, project STATUS.md, LAST_SESSION.md) — decided against. Simple wins.

## WhatsApp Gateway
- Multiple disconnects overnight (499, 503, 428, 408) — all auto-reconnected
- Connected again at 20:15 after PC restart

## Architecture Decisions (Evening Session)

### Backend: Supabase (confirmed)
- Supabase over on-premise Postgres — website already uses it, RLS built-in, PC has power issues
- On-premise only if privacy/compliance forces it (doesn't apply to Pavisha)

### Two Supabase projects exist — need to merge
- **Pavisha website Supabase** — simple e-commerce schema (products, variants, categories, flat structure, image_url as text)
- **AutifyME Supabase** — full PIM schema v2 (product_families → products → variants, multi-tier pricing, BOM, DAM, UOM, campaigns, NAICS)
- **Decision:** ONE Supabase project using AutifyME v2 schema. Migrate website to read directly from it. No views, no abstraction.
- Website queries need updating (e.g. products.image_url → product_assets → assets.storage_path, product_variants.price → product_prices.unit_price)

### WhatsApp Business for Pavisha
- Abhishek has a WhatsApp Business API number (was used with AutifyME webhook)
- **Plan:** Connect Pavisha business number to OpenClaw (Web protocol)
- **User role system needed:**
  - Owner (Abhishek) → full access, Jarvis mode
  - Employee → operations access, professional assistant
  - Customer → public access, sales representative persona
- Role detection by phone number → different tools, data access, and persona per role
- AutifyME has table-level scoping (CATALOG_TABLES_CRUD vs READ_ONLY) but NO user role detection
- Need: user_roles table/config, per-role tool sets, per-role system prompts, RLS at DB level

### Git Setup
- Forked openclaw to akeshr/openclaw
- Branch: feat/workspace-setup (was abhishek/custom — renamed for proper naming)
- Remotes: origin = akeshr/openclaw, upstream = openclaw/openclaw
- Submodules: AutifyME + Pavisha in workspace/
- update.ps1 script for pulling upstream releases

### Migration Plan (not started)
1. Deploy AutifyME v2 schema to single Supabase project
2. Migrate existing website data into new schema
3. Update Pavisha website queries to use new tables directly
4. Update RLS — public read for customer-facing, restricted for internal
5. Build OpenClaw skill for role-based access
6. Connect Pavisha WhatsApp Business number

## Pending
- [ ] Abhishek to check BIOS: Deep Sleep + ErP Ready → Disabled
- [ ] Test auto-start bat on next reboot
- [ ] Schema migration planning (AutifyME v2 as single source)
- [ ] User role system design
- [ ] Connect Pavisha WhatsApp Business number to OpenClaw
