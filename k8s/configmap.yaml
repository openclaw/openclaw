apiVersion: v1
kind: ConfigMap
metadata:
  name: clawdbot-config
  namespace: clawdbot
data:
  # Gateway configuration
  CLAWDBOT_GATEWAY_PORT: "18789"
  CLAWDBOT_BRIDGE_PORT: "18790"
  CLAWDBOT_GATEWAY_BIND: "0.0.0.0" # Bind to all interfaces in container
  NODE_ENV: "production"
  TERM: "xterm-256color"

  # Clawdbot config file (clawdbot.json)
  clawdbot.json: |
    {
      "gateway": {
        "mode": "local",
        "port": 18789,
        "auth": {
          "mode": "token"
        }
      },
      "agents": {
        "defaults": {
          "workspace": "/home/node/clawd",
          "model": {
            "primary": "anthropic/claude-opus-4-5"
          }
        }
      },
      "channels": {
        "whatsapp": {
          "dmPolicy": "pairing",
          "allowFrom": []
        },
        "zalo": {
          "enabled": true,
          "dmPolicy": "open",
          "allowFrom": ["*"],
          "mediaMaxMb": 5
        }
      },
      "plugins": {
        "paths": ["/app/extensions/zalo"]
      },
      "logging": {
        "level": "info",
        "consoleLevel": "info",
        "consoleStyle": "pretty"
      }
    }
