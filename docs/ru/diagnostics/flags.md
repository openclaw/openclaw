---
summary: "Диагностические флаги для целевых отладочных логов"
read_when:
  - Вам нужны целевые отладочные логи без повышения глобальных уровней логирования
  - Вам нужно собрать логи конкретных подсистем для поддержки
title: "Диагностические флаги"
---

# Диагностические флаги

Диагностические флаги позволяют включать целевые отладочные логи без включения подробного логирования повсюду. Флаги являются опциональными и не оказывают эффекта, если подсистема их не проверяет.

## Как это работает

- Флаги — это строки (без учёта регистра).
- Вы можете включать флаги в конфиге или через переопределение переменной окружения.
- Поддерживаются шаблоны:
  - `telegram.*` соответствует `telegram.http`
  - `*` включает все флаги

## Включение через конфиг

```json
{
  "diagnostics": {
    "flags": ["telegram.http"]
  }
}
```

Несколько флагов:

```json
{
  "diagnostics": {
    "flags": ["telegram.http", "gateway.*"]
  }
}
```

Перезапустите Gateway (шлюз) после изменения флагов.

## Переопределение через env (одноразово)

```bash
OPENCLAW_DIAGNOSTICS=telegram.http,telegram.payload
```

Отключить все флаги:

```bash
OPENCLAW_DIAGNOSTICS=0
```

## Куда пишутся логи

Флаги отправляют логи в стандартный файл диагностических логов. По умолчанию:

```
/tmp/openclaw/openclaw-YYYY-MM-DD.log
```

Если вы установите `logging.file`, будет использоваться этот путь. Логи имеют формат JSONL (один JSON-объект на строку). Редактирование (redaction) по-прежнему применяется в соответствии с `logging.redactSensitive`.

## Извлечение логов

Выберите последний файл логов:

```bash
ls -t /tmp/openclaw/openclaw-*.log | head -n 1
```

Отфильтруйте диагностику HTTP для Telegram:

```bash
rg "telegram http error" /tmp/openclaw/openclaw-*.log
```

Или выполните tail во время воспроизведения проблемы:

```bash
tail -f /tmp/openclaw/openclaw-$(date +%F).log | rg "telegram http error"
```

Для удалённых Gateway (шлюзов) вы также можете использовать `openclaw logs --follow` (см. [/cli/logs](/cli/logs)).

## Примечания

- Если `logging.level` установлен выше, чем `warn`, эти логи могут быть подавлены. Значение по умолчанию `info` подходит.
- Флаги безопасно оставлять включёнными; они влияют только на объём логов для конкретной подсистемы.
- Используйте [/logging](/logging), чтобы изменить назначения логов, уровни и редактирование.
