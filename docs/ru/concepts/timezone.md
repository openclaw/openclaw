---
summary: "Обработка часовых поясов для агентов, конвертов и промптов"
read_when:
  - Вам нужно понять, как временные метки нормализуются для модели
  - Настройка часового пояса пользователя для системных промптов
title: "Часовые пояса"
---

# Часовые пояса

OpenClaw стандартизирует временные метки, чтобы модель видела **единую опорную временную шкалу**.

## Конверты сообщений (по умолчанию — локальные)

Входящие сообщения оборачиваются в конверт вида:

```
[Provider ... 2026-01-05 16:26 PST] message text
```

Временная метка в конверте **по умолчанию соответствует локальному времени хоста**, с точностью до минут.

Это можно переопределить с помощью:

```json5
{
  agents: {
    defaults: {
      envelopeTimezone: "local", // "utc" | "local" | "user" | IANA timezone
      envelopeTimestamp: "on", // "on" | "off"
      envelopeElapsed: "on", // "on" | "off"
    },
  },
}
```

- `envelopeTimezone: "utc"` использует UTC.
- `envelopeTimezone: "user"` использует `agents.defaults.userTimezone` (с откатом к часовому поясу хоста).
- Используйте явный часовой пояс IANA (например, `"Europe/Vienna"`) для фиксированного смещения.
- `envelopeTimestamp: "off"` удаляет абсолютные временные метки из заголовков конверта.
- `envelopeElapsed: "off"` удаляет суффиксы прошедшего времени (стиль `+2m`).

### Примеры

**Локально (по умолчанию):**

```
[Signal Alice +1555 2026-01-18 00:19 PST] hello
```

**Фиксированный часовой пояс:**

```
[Signal Alice +1555 2026-01-18 06:19 GMT+1] hello
```

**Прошедшее время:**

```
[Signal Alice +1555 +2m 2026-01-18T05:19Z] follow-up
```

## Полезные нагрузки инструментов (сырые данные провайдера + нормализованные поля)

Вызовы инструментов (`channels.discord.readMessages`, `channels.slack.readMessages` и т. д.) возвращают **сырые временные метки провайдера**.
Также мы добавляем нормализованные поля для единообразия:

- `timestampMs` (миллисекунды эпохи UTC)
- `timestampUtc` (строка ISO 8601 в UTC)

Сырые поля провайдера сохраняются.

## Часовой пояс пользователя для системного промпта

Задайте `agents.defaults.userTimezone`, чтобы сообщить модели локальный часовой пояс пользователя. Если он
не задан, OpenClaw определяет **часовой пояс хоста во время выполнения** (без записи в конфиг).

```json5
{
  agents: { defaults: { userTimezone: "America/Chicago" } },
}
```

Системный промпт включает:

- раздел `Current Date & Time` с локальным временем и часовым поясом
- `Time format: 12-hour` или `24-hour`

Вы можете управлять форматом промпта с помощью `agents.defaults.timeFormat` (`auto` | `12` | `24`).

[Date & Time](/date-time) для полного описания поведения и примеров.
