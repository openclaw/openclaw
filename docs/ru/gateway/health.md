---
summary: "Шаги проверки работоспособности для связности каналов"
read_when:
  - Диагностика работоспособности канала WhatsApp
title: "Проверки здоровья"
---

# Проверки работоспособности (CLI)

Краткое руководство для проверки связности каналов без догадок.

## Быстрые проверки

- `openclaw status` — локальная сводка: достижимость Gateway (шлюза)/режим, подсказка обновления, возраст аутентификации связанного канала, сеансы и недавняя активность.
- `openclaw status --all` — полная локальная диагностика (только чтение, с цветовой индикацией, безопасно вставлять для отладки).
- `openclaw status --deep` — также проверяет запущенный Gateway (шлюз) (поканальные пробы, где поддерживается).
- `openclaw health --json` — запрашивает у запущенного Gateway (шлюза) полный снимок состояния (только WS; без прямого сокета Baileys).
- Отправьте `/status` как отдельное сообщение в WhatsApp/WebChat, чтобы получить ответ о состоянии без вызова агента.
- Логи: выполните tail `/tmp/openclaw/openclaw-*.log` и отфильтруйте по `web-heartbeat`, `web-reconnect`, `web-auto-reply`, `web-inbound`.

## Глубокая диагностика

- Учётные данные на диске: `ls -l ~/.openclaw/credentials/whatsapp/<accountId>/creds.json` (mtime должен быть недавним).
- Хранилище сеансов: `ls -l ~/.openclaw/agents/<agentId>/sessions/sessions.json` (путь можно переопределить в конфиге). Количество и недавние получатели выводятся через `status`.
- Процедура повторной привязки: `openclaw channels logout && openclaw channels login --verbose` при кодах состояния 409–515 или появлении `loggedOut` в логах. (Примечание: поток входа по QR автоматически перезапускается один раз для статуса 515 после сопряжения.)

## Когда что‑то не работает

- `logged out` или статус 409–515 → выполните повторную привязку с помощью `openclaw channels logout`, затем `openclaw channels login`.
- Gateway (шлюз) недоступен → запустите его: `openclaw gateway --port 18789` (используйте `--force`, если порт занят).
- Нет входящих сообщений → убедитесь, что связанный телефон онлайн и отправитель разрешён (`channels.whatsapp.allowFrom`); для групповых чатов проверьте соответствие правил списка разрешённых и упоминаний (`channels.whatsapp.groups`, `agents.list[].groupChat.mentionPatterns`).

## Выделенная команда «health»

`openclaw health --json` запрашивает у запущенного Gateway (шлюза) снимок его состояния (без прямых сокетов каналов из CLI). Команда сообщает возраст связанной аутентификации/учётных данных (если доступно), сводки поканальных проб, сводку хранилища сеансов и длительность проверки. Завершается с ненулевым кодом, если Gateway (шлюз) недоступен или проверка не удалась/превысила тайм‑аут. Используйте `--timeout <ms>`, чтобы переопределить значение по умолчанию 10 с.
