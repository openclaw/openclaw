---
summary: "Аудит того, что может тратить деньги, какие ключи используются и как просматривать использование"
read_when:
  - Вы хотите понять, какие функции могут вызывать платные API
  - Вам нужно провести аудит ключей, затрат и видимости использования
  - Вы объясняете отчётность по затратам /status или /usage
title: "Использование API и затраты"
---

# Использование API и затраты

Этот документ перечисляет **функции, которые могут вызывать API‑ключи**, и где отображаются связанные с ними затраты. Он сосредоточен на возможностях OpenClaw, которые могут генерировать использование провайдеров или платные вызовы API.

## Где отображаются затраты (чат + CLI)

**Снимок затрат на сеанс**

- `/status` показывает текущую модель сеанса, использование контекста и токены последнего ответа.
- Если модель использует **аутентификацию по API‑ключу**, `/status` также показывает **оценочную стоимость** последнего ответа.

**Подвал затрат на сообщение**

- `/usage full` добавляет подвал использования к каждому ответу, включая **оценочную стоимость** (только для API‑ключей).
- `/usage tokens` показывает только токены; в потоках OAuth долларовая стоимость скрыта.

**Окна использования CLI (квоты провайдера)**

- `openclaw status --usage` и `openclaw channels list` показывают **окна использования** провайдера
  (снимки квот, а не затраты на каждое сообщение).

[Использование токенов и затраты](/reference/token-use) для подробностей и примеров.

## Как обнаруживаются ключи

OpenClaw может получать учётные данные из:

- **Профилей аутентификации** (для каждого агента, хранятся в `auth-profiles.json`).
- **Переменных окружения** (например, `OPENAI_API_KEY`, `BRAVE_API_KEY`, `FIRECRAWL_API_KEY`).
- **Конфига** (`models.providers.*.apiKey`, `tools.web.search.*`, `tools.web.fetch.firecrawl.*`,
  `memorySearch.*`, `talk.apiKey`).
- **Skills** (`skills.entries.<name>.apiKey`), которые могут экспортировать ключи в окружение процесса навыка.

## Функции, которые могут тратить ключи

### 1. Ответы базовой модели (чат + инструменты)

Каждый ответ или вызов инструмента использует **текущего провайдера модели** (OpenAI, Anthropic и т. д.). Это основной источник использования и затрат.

См. [Модели](/providers/models) для конфигурации цен и [Использование токенов и затраты](/reference/token-use) для отображения.

### 2. Понимание медиа (аудио/изображения/видео)

Входящие медиа могут быть суммированы/транскрибированы до выполнения ответа. Это использует API моделей/провайдеров.

- Аудио: OpenAI / Groq / Deepgram (теперь **включено автоматически**, если есть ключи).
- Изображения: OpenAI / Anthropic / Google.
- Видео: Google.

См. [Понимание медиа](/nodes/media-understanding).

### 3. Эмбеддинги памяти + семантический поиск

Семантический поиск по памяти использует **API эмбеддингов** при настройке удалённых провайдеров:

- `memorySearch.provider = "openai"` → эмбеддинги OpenAI
- `memorySearch.provider = "gemini"` → эмбеддинги Gemini
- `memorySearch.provider = "voyage"` → эмбеддинги Voyage
- Необязательный откат к удалённому провайдеру, если локальные эмбеддинги не сработали

Можно оставить всё локально с помощью `memorySearch.provider = "local"` (без использования API).

См. [Память](/concepts/memory).

### 4. Инструмент веб‑поиска (Brave / Perplexity через OpenRouter)

`web_search` использует API‑ключи и может приводить к расходам:

- **Brave Search API**: `BRAVE_API_KEY` или `tools.web.search.apiKey`
- **Perplexity** (через OpenRouter): `PERPLEXITY_API_KEY` или `OPENROUTER_API_KEY`

**Бесплатный тариф Brave (щедрый):**

- **2 000 запросов в месяц**
- **1 запрос в секунду**
- **Требуется банковская карта** для верификации (списаний нет, если вы не переходите на платный план)

См. [Веб‑инструменты](/tools/web).

### 5. Инструмент веб‑загрузки (Firecrawl)

`web_fetch` может вызывать **Firecrawl** при наличии API‑ключа:

- `FIRECRAWL_API_KEY` или `tools.web.fetch.firecrawl.apiKey`

Если Firecrawl не настроен, инструмент откатывается к прямой загрузке + readability (без платного API).

См. [Веб‑инструменты](/tools/web).

### 6. Снимки использования провайдера (status/health)

Некоторые команды состояния вызывают **эндпоинты использования провайдера**, чтобы показать окна квот или состояние аутентификации.
Обычно это низкообъёмные вызовы, но они всё равно обращаются к API провайдера:

- `openclaw status --usage`
- `openclaw models status --json`

См. [CLI моделей](/cli/models).

### 7. Суммаризация защиты уплотнения

Защита уплотнения может суммировать историю сеанса с использованием **текущей модели**, что приводит к вызовам API провайдера при её выполнении.

См. [Управление сеансами + уплотнение](/reference/session-management-compaction).

### 8. Сканирование / зондирование моделей

`openclaw models scan` может зондировать модели OpenRouter и использует `OPENROUTER_API_KEY`, когда зондирование включено.

См. [CLI моделей](/cli/models).

### 9. Talk (речь)

Режим Talk может вызывать **ElevenLabs** при настройке:

- `ELEVENLABS_API_KEY` или `talk.apiKey`

См. [Режим Talk](/nodes/talk).

### 10. Skills (сторонние API)

Skills могут хранить `apiKey` в `skills.entries.<name>.apiKey`. Если навык использует этот ключ для внешних API, он может приводить к затратам в соответствии с провайдером навыка.

См. [Skills](/tools/skills).
