---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 更新提供商重试行为或默认值（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 调试提供商发送错误或速率限制（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: 出站提供商调用的重试策略（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 重试策略（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-01T20:23:37Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: 55bb261ff567f46ce447be9c0ee0c5b5e6d2776287d7662762656c14108dd607（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: concepts/retry.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 14（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 重试策略（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 目标（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 按 HTTP 请求重试，而非按多步骤流程重试。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 通过仅重试当前步骤来保持顺序。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 避免重复执行非幂等操作。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 默认值（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 尝试次数：3（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 最大延迟上限：30000 毫秒（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 抖动：0.1（10%）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 提供商默认值：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - Telegram 最小延迟：400 毫秒（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - Discord 最小延迟：500 毫秒（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 行为（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### Discord（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 仅在速率限制错误（HTTP 429）时重试。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可用时使用 Discord `retry_after`，否则使用指数退避。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### Telegram（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 在瞬态错误时重试（429、超时、连接/重置/关闭、暂时不可用）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可用时使用 `retry_after`，否则使用指数退避。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Markdown 解析错误不会重试；会回退为纯文本。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在 `~/.openclaw/openclaw.json` 中按提供商设置重试策略：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    telegram: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      retry: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        attempts: 3,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        minDelayMs: 400,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        maxDelayMs: 30000,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        jitter: 0.1,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    discord: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      retry: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        attempts: 3,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        minDelayMs: 500,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        maxDelayMs: 30000,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        jitter: 0.1,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 注意事项（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 重试按请求应用（消息发送、媒体上传、表情回应、投票、贴纸）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 组合流程不会重试已完成的步骤。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
