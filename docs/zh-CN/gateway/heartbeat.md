---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 调整心跳频率或消息时（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 在心跳和 cron 之间选择定时任务方案时（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: 心跳轮询消息和通知规则（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 心跳（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:48:57Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: 18b017066aa2c41811b985564dd389834906f4576e85b576fb357a0eff482e69（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: gateway/heartbeat.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 心跳（Gateway 网关）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
> **心跳 vs Cron？** 参见 [Cron vs 心跳](/automation/cron-vs-heartbeat) 了解何时使用哪种方案。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
心跳在主会话中运行**周期性智能体轮次**，使模型能够在不打扰你的情况下提醒需要关注的事项。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 快速开始（新手）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 保持心跳启用（默认 `30m`，Anthropic OAuth/setup-token 为 `1h`）或设置你自己的频率。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 在智能体工作区创建一个简单的 `HEARTBEAT.md` 检查清单（可选但推荐）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 决定心跳消息发送到哪里（默认 `target: "last"`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. 可选：启用心跳推理内容发送以提高透明度。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
5. 可选：将心跳限制在活动时段（本地时间）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
配置示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  agents: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    defaults: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      heartbeat: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        every: "30m",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        target: "last",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        // activeHours: { start: "08:00", end: "24:00" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        // includeReasoning: true, // 可选：同时发送单独的 `Reasoning:` 消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 默认值（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 间隔：`30m`（当检测到的认证模式为 Anthropic OAuth/setup-token 时为 `1h`）。设置 `agents.defaults.heartbeat.every` 或单智能体 `agents.list[].heartbeat.every`；使用 `0m` 禁用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 提示内容（可通过 `agents.defaults.heartbeat.prompt` 配置）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  `Read HEARTBEAT.md if it exists (workspace context). Follow it strictly. Do not infer or repeat old tasks from prior chats. If nothing needs attention, reply HEARTBEAT_OK.`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 心跳提示**原样**作为用户消息发送。系统提示包含"Heartbeat"部分，运行在内部被标记。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 活动时段（`heartbeat.activeHours`）按配置的时区检查。在时段外，心跳会被跳过直到下一个时段内的时钟周期。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 心跳提示的用途（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认提示故意设计得比较宽泛：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **后台任务**："Consider outstanding tasks"促使智能体审查待办事项（收件箱、日历、提醒、排队工作）并提醒任何紧急事项。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **人类签到**："Checkup sometimes on your human during day time"促使偶尔发送轻量级的"有什么需要帮助的吗？"消息，但通过使用你配置的本地时区避免夜间打扰（参见 [/concepts/timezone](/concepts/timezone)）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你希望心跳执行非常具体的任务（例如"检查 Gmail PubSub 统计"或"验证 Gateway 网关健康状态"），将 `agents.defaults.heartbeat.prompt`（或 `agents.list[].heartbeat.prompt`）设置为自定义内容（原样发送）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 响应约定（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果没有需要关注的事项，回复 **`HEARTBEAT_OK`**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 在心跳运行期间，当 `HEARTBEAT_OK` 出现在回复的**开头或结尾**时，OpenClaw 将其视为确认。该标记会被移除，如果剩余内容 **≤ `ackMaxChars`**（默认：300），则回复被丢弃。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果 `HEARTBEAT_OK` 出现在回复的**中间**，则不会被特殊处理。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 对于警报，**不要**包含 `HEARTBEAT_OK`；只返回警报文本。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在心跳之外，消息开头/结尾的意外 `HEARTBEAT_OK` 会被移除并记录日志；仅包含 `HEARTBEAT_OK` 的消息会被丢弃。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  agents: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    defaults: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      heartbeat: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        every: "30m", // 默认：30m（0m 禁用）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        model: "anthropic/claude-opus-4-5",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        includeReasoning: false, // 默认：false（可用时发送单独的 Reasoning: 消息）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        target: "last", // last | none | <channel id>（核心或插件，例如 "bluebubbles"）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        to: "+15551234567", // 可选的渠道特定覆盖（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        prompt: "Read HEARTBEAT.md if it exists (workspace context). Follow it strictly. Do not infer or repeat old tasks from prior chats. If nothing needs attention, reply HEARTBEAT_OK.",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        ackMaxChars: 300, // HEARTBEAT_OK 后允许的最大字符数（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 作用域和优先级（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `agents.defaults.heartbeat` 设置全局心跳行为。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `agents.list[].heartbeat` 在其之上合并；如果任何智能体有 `heartbeat` 块，**只有这些智能体**运行心跳。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.defaults.heartbeat` 为所有渠道设置可见性默认值。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.<channel>.heartbeat` 覆盖渠道默认值。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.<channel>.accounts.<id>.heartbeat`（多账户渠道）覆盖单渠道设置。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 单智能体心跳（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果任何 `agents.list[]` 条目包含 `heartbeat` 块，**只有这些智能体**运行心跳。单智能体块在 `agents.defaults.heartbeat` 之上合并（因此你可以设置一次共享默认值，然后按智能体覆盖）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例：两个智能体，只有第二个智能体运行心跳。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  agents: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    defaults: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      heartbeat: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        every: "30m",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        target: "last",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    list: [（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      { id: "main", default: true },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        id: "ops",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        heartbeat: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          every: "1h",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          target: "whatsapp",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          to: "+15551234567",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          prompt: "Read HEARTBEAT.md if it exists (workspace context). Follow it strictly. Do not infer or repeat old tasks from prior chats. If nothing needs attention, reply HEARTBEAT_OK.",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    ],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 字段说明（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `every`：心跳间隔（时长字符串；默认单位 = 分钟）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `model`：心跳运行的可选模型覆盖（`provider/model`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `includeReasoning`：启用时，也会发送单独的 `Reasoning:` 消息（如果可用）（与 `/reasoning on` 格式相同）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `session`：心跳运行的可选会话键。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `main`（默认）：智能体主会话。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 显式会话键（从 `openclaw sessions --json` 或 [sessions CLI](/cli/sessions) 复制）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 会话键格式：参见[会话](/concepts/session)和[群组](/channels/groups)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `target`：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `last`（默认）：发送到最后使用的外部渠道。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 显式渠道：`whatsapp` / `telegram` / `discord` / `googlechat` / `slack` / `msteams` / `signal` / `imessage`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `none`：运行心跳但**不发送**到外部。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `to`：可选的收件人覆盖（渠道特定 ID，例如 WhatsApp 的 E.164 或 Telegram 聊天 ID）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `prompt`：覆盖默认提示内容（不合并）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `ackMaxChars`：`HEARTBEAT_OK` 后在发送前允许的最大字符数。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 发送行为（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 心跳默认在智能体主会话中运行（`agent:<id>:<mainKey>`），或当 `session.scope = "global"` 时在 `global` 中运行。设置 `session` 可覆盖为特定渠道会话（Discord/WhatsApp 等）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `session` 只影响运行上下文；发送由 `target` 和 `to` 控制。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 要发送到特定渠道/收件人，设置 `target` + `to`。使用 `target: "last"` 时，发送使用该会话的最后一个外部渠道。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果主队列繁忙，心跳会被跳过并稍后重试。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果 `target` 解析为无外部目标，运行仍会发生但不会发送出站消息。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 仅心跳回复**不会**保持会话活跃；最后的 `updatedAt` 会被恢复，因此空闲过期正常工作。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 可见性控制（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认情况下，`HEARTBEAT_OK` 确认会被抑制，而警报内容会被发送。你可以按渠道或按账户调整：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```yaml（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
channels:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  defaults:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    heartbeat:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      showOk: false # 隐藏 HEARTBEAT_OK（默认）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      showAlerts: true # 显示警报消息（默认）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      useIndicator: true # 发出指示器事件（默认）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  telegram:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    heartbeat:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      showOk: true # 在 Telegram 上显示 OK 确认（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  whatsapp:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    accounts:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      work:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        heartbeat:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          showAlerts: false # 为此账户抑制警报发送（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
优先级：单账户 → 单渠道 → 渠道默认值 → 内置默认值。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 各标志的作用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `showOk`：当模型返回仅 OK 的回复时，发送 `HEARTBEAT_OK` 确认。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `showAlerts`：当模型返回非 OK 回复时，发送警报内容。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `useIndicator`：为 UI 状态界面发出指示器事件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果**所有三个**都为 false，OpenClaw 会完全跳过心跳运行（不调用模型）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 单渠道 vs 单账户示例（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```yaml（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
channels:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  defaults:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    heartbeat:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      showOk: false（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      showAlerts: true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      useIndicator: true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  slack:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    heartbeat:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      showOk: true # 所有 Slack 账户（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    accounts:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      ops:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        heartbeat:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          showAlerts: false # 仅为 ops 账户抑制警报（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  telegram:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    heartbeat:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      showOk: true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 常见模式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 目标                          | 配置                                                                                     |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| ----------------------------- | ---------------------------------------------------------------------------------------- |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 默认行为（静默 OK，警报开启） | _（无需配置）_                                                                           |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 完全静默（无消息，无指示器）  | `channels.defaults.heartbeat: { showOk: false, showAlerts: false, useIndicator: false }` |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 仅指示器（无消息）            | `channels.defaults.heartbeat: { showOk: false, showAlerts: false, useIndicator: true }`  |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 仅在一个渠道显示 OK           | `channels.telegram.heartbeat: { showOk: true }`                                          |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## HEARTBEAT.md（可选）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果工作区中存在 `HEARTBEAT.md` 文件，默认提示会告诉智能体读取它。把它想象成你的"心跳检查清单"：小巧、稳定，可以安全地每 30 分钟包含一次。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果 `HEARTBEAT.md` 存在但实际上是空的（只有空行和 markdown 标题如 `# Heading`），OpenClaw 会跳过心跳运行以节省 API 调用。如果文件不存在，心跳仍会运行，由模型决定做什么。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
保持它小巧（简短的检查清单或提醒）以避免提示膨胀。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`HEARTBEAT.md` 示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Heartbeat checklist（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Quick scan: anything urgent in inboxes?（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- If it's daytime, do a lightweight check-in if nothing else is pending.（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- If a task is blocked, write down _what is missing_ and ask Peter next time.（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 智能体可以更新 HEARTBEAT.md 吗？（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
可以 — 如果你要求它这样做。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`HEARTBEAT.md` 只是智能体工作区中的普通文件，所以你可以在普通聊天中告诉智能体：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- "更新 `HEARTBEAT.md` 添加每日日历检查。"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- "重写 `HEARTBEAT.md`，使其更短并专注于收件箱跟进。"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你希望这主动发生，你也可以在心跳提示中包含明确的一行，如："If the checklist becomes stale, update HEARTBEAT.md with a better one."（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
安全提示：不要在 `HEARTBEAT.md` 中放置密钥（API 密钥、电话号码、私有令牌）— 它会成为提示上下文的一部分。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 手动唤醒（按需）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
你可以排队一个系统事件并触发即时心跳：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw system event --text "Check for urgent follow-ups" --mode now（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果多个智能体配置了 `heartbeat`，手动唤醒会立即运行每个智能体的心跳。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用 `--mode next-heartbeat` 等待下一个计划的时钟周期。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 推理内容发送（可选）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认情况下，心跳只发送最终的"答案"负载。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你想要透明度，请启用：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `agents.defaults.heartbeat.includeReasoning: true`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
启用后，心跳还会发送一条以 `Reasoning:` 为前缀的单独消息（与 `/reasoning on` 格式相同）。当智能体管理多个会话/代码库并且你想了解它为什么决定联系你时，这很有用 — 但它也可能泄露比你想要的更多内部细节。在群聊中建议保持关闭。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 成本意识（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
心跳运行完整的智能体轮次。更短的间隔消耗更多 token。保持 `HEARTBEAT.md` 小巧，如果你只想要内部状态更新，考虑使用更便宜的 `model` 或 `target: "none"`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
