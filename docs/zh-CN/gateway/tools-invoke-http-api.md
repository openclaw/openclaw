---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 不运行完整智能体回合直接调用工具（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 构建需要工具策略强制执行的自动化（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: 通过 Gateway 网关 HTTP 端点直接调用单个工具（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 工具调用 API（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:48:58Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: 17ccfbe0b0d9bb61cc46fb21f5c09b106ba6e8e4c2c14135a11ca8d5b77b8a88（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: gateway/tools-invoke-http-api.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 工具调用（HTTP）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OpenClaw 的 Gateway 网关暴露了一个简单的 HTTP 端点用于直接调用单个工具。它始终启用，但受 Gateway 网关认证和工具策略限制。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `POST /tools/invoke`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 与 Gateway 网关相同的端口（WS + HTTP 多路复用）：`http://<gateway-host>:<port>/tools/invoke`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认最大负载大小为 2 MB。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 认证（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用 Gateway 网关认证配置。发送 bearer 令牌：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `Authorization: Bearer <token>`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
说明：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 当 `gateway.auth.mode="token"` 时，使用 `gateway.auth.token`（或 `OPENCLAW_GATEWAY_TOKEN`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 当 `gateway.auth.mode="password"` 时，使用 `gateway.auth.password`（或 `OPENCLAW_GATEWAY_PASSWORD`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 请求体（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "tool": "sessions_list",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "action": "json",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "args": {},（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "sessionKey": "main",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "dryRun": false（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
字段：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `tool`（string，必需）：要调用的工具名称。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `action`（string，可选）：如果工具 schema 支持 `action` 且 args 负载省略了它，则映射到 args。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `args`（object，可选）：工具特定的参数。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `sessionKey`（string，可选）：目标会话键。如果省略或为 `"main"`，Gateway 网关使用配置的主会话键（遵循 `session.mainKey` 和默认智能体，或在全局范围中使用 `global`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `dryRun`（boolean，可选）：保留供将来使用；当前忽略。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 策略 + 路由行为（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
工具可用性通过 Gateway 网关智能体使用的相同策略链过滤：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `tools.profile` / `tools.byProvider.profile`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `tools.allow` / `tools.byProvider.allow`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `agents.<id>.tools.allow` / `agents.<id>.tools.byProvider.allow`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 群组策略（如果会话键映射到群组或渠道）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 子智能体策略（使用子智能体会话键调用时）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果工具不被策略允许，端点返回 **404**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
为帮助群组策略解析上下文，你可以选择设置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `x-openclaw-message-channel: <channel>`（示例：`slack`、`telegram`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `x-openclaw-account-id: <accountId>`（当存在多个账户时）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 响应（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `200` → `{ ok: true, result }`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `400` → `{ ok: false, error: { type, message } }`（无效请求或工具错误）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `401` → 未授权（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `404` → 工具不可用（未找到或未在允许列表中）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `405` → 方法不允许（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 示例（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
curl -sS http://127.0.0.1:18789/tools/invoke \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  -H 'Authorization: Bearer YOUR_TOKEN' \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  -H 'Content-Type: application/json' \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  -d '{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "tool": "sessions_list",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "action": "json",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "args": {}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }'（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
