---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 在同一台机器上运行多个 Gateway 网关（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你需要每个 Gateway 网关有隔离的配置/状态/端口（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: 在同一主机上运行多个 OpenClaw Gateway 网关（隔离、端口和配置文件）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 多 Gateway 网关（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:48:13Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: 09b5035d4e5fb97c8d4596f7e23dea67224dad3b6d9e2c37ecb99840f28bd77d（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: gateway/multiple-gateways.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 多 Gateway 网关（同一主机）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
大多数设置应该使用单个 Gateway 网关，因为一个 Gateway 网关可以处理多个消息连接和智能体。如果你需要更强的隔离或冗余（例如，救援机器人），请使用隔离的配置文件/端口运行多个 Gateway 网关。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 隔离检查清单（必需）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `OPENCLAW_CONFIG_PATH` — 每个实例的配置文件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `OPENCLAW_STATE_DIR` — 每个实例的会话、凭证、缓存（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `agents.defaults.workspace` — 每个实例的工作区根目录（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `gateway.port`（或 `--port`）— 每个实例唯一（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 派生端口（浏览器/画布）不得重叠（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果这些是共享的，你将遇到配置竞争和端口冲突。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 推荐：配置文件（`--profile`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
配置文件自动限定 `OPENCLAW_STATE_DIR` + `OPENCLAW_CONFIG_PATH` 范围并为服务名称添加后缀。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# main（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile main setup（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile main gateway --port 18789（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# rescue（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile rescue setup（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile rescue gateway --port 19001（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
按配置文件的服务：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile main gateway install（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile rescue gateway install（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 救援机器人指南（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在同一主机上运行第二个 Gateway 网关，使用独立的：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 配置文件/配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 状态目录（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 工作区（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 基础端口（加上派生端口）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
这使救援机器人与主机器人隔离，以便在主机器人宕机时可以调试或应用配置更改。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
端口间距：在基础端口之间至少留出 20 个端口，这样派生的浏览器/画布/CDP 端口永远不会冲突。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 如何安装（救援机器人）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 主机器人（现有或新建，不带 --profile 参数）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 运行在端口 18789 + Chrome CDC/Canvas/... 端口（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw onboard（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw gateway install（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 救援机器人（隔离的配置文件 + 端口）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile rescue onboard（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 注意：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# - 工作区名称默认会添加 -rescue 后缀（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# - 端口应至少为 18789 + 20 个端口，（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
#   最好选择完全不同的基础端口，如 19789，（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# - 其余的新手引导与正常相同（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 安装服务（如果在新手引导期间没有自动完成）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile rescue gateway install（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 端口映射（派生）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
基础端口 = `gateway.port`（或 `OPENCLAW_GATEWAY_PORT` / `--port`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 浏览器控制服务端口 = 基础 + 2（仅 loopback）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `canvasHost.port = 基础 + 4`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 浏览器配置文件 CDP 端口从 `browser.controlPort + 9 .. + 108` 自动分配（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你在配置或环境变量中覆盖了这些，必须确保每个实例都唯一。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 浏览器/CDP 注意事项（常见陷阱）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **不要**在多个实例上将 `browser.cdpUrl` 固定为相同的值。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 每个实例需要自己的浏览器控制端口和 CDP 范围（从其 Gateway 网关端口派生）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果你需要显式的 CDP 端口，请为每个实例设置 `browser.profiles.<name>.cdpPort`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 远程 Chrome：使用 `browser.profiles.<name>.cdpUrl`（每个配置文件，每个实例）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 手动环境变量示例（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OPENCLAW_CONFIG_PATH=~/.openclaw/main.json \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OPENCLAW_STATE_DIR=~/.openclaw-main \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw gateway --port 18789（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OPENCLAW_CONFIG_PATH=~/.openclaw/rescue.json \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OPENCLAW_STATE_DIR=~/.openclaw-rescue \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw gateway --port 19001（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 快速检查（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile main status（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile rescue status（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw --profile rescue browser status（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
