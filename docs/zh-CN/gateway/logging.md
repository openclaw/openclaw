---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 更改日志输出或格式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 调试 CLI 或 Gateway 网关输出（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: 日志输出界面、文件日志、WS 日志样式和控制台格式化（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:48:14Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: efb8eda5e77e3809369a8ff569fac110323a86b3945797093f20e9bc98f39b2e（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: gateway/logging.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
面向用户的概览（CLI + Control UI + 配置），请参阅 [/logging](/logging)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OpenClaw 有两个日志"界面"：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **控制台输出**（你在终端 / Debug UI 中看到的内容）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **文件日志**（JSON 行）由 Gateway 网关日志记录器写入。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 基于文件的日志记录器（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 默认滚动日志文件位于 `/tmp/openclaw/` 下（每天一个文件）：`openclaw-YYYY-MM-DD.log`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 日期使用 Gateway 网关主机的本地时区。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 日志文件路径和级别可以通过 `~/.openclaw/openclaw.json` 配置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `logging.file`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `logging.level`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
文件格式是每行一个 JSON 对象。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Control UI 的 Logs 标签页通过 Gateway 网关（`logs.tail`）尾随此文件。CLI 也可以这样做：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw logs --follow（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**Verbose 与日志级别**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **文件日志**完全由 `logging.level` 控制。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--verbose` 仅影响**控制台详细程度**（和 WS 日志样式）；它**不会**提高文件日志级别。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 要在文件日志中捕获仅 verbose 的详细信息，请将 `logging.level` 设置为 `debug` 或 `trace`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 控制台捕获（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
CLI 捕获 `console.log/info/warn/error/debug/trace` 并将它们写入文件日志，同时仍打印到 stdout/stderr。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
你可以独立调整控制台详细程度：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `logging.consoleLevel`（默认 `info`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `logging.consoleStyle`（`pretty` | `compact` | `json`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 工具摘要脱敏（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
详细工具摘要（例如 `🛠️ Exec: ...`）可以在进入控制台流之前屏蔽敏感令牌。这**仅限工具**，不会更改文件日志。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `logging.redactSensitive`：`off` | `tools`（默认：`tools`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `logging.redactPatterns`：正则表达式字符串数组（覆盖默认值）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 使用原始正则字符串（自动 `gi`），或如果你需要自定义标志则使用 `/pattern/flags`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 匹配项通过保留前 6 个 + 后 4 个字符（长度 >= 18）来屏蔽，否则为 `***`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 默认值涵盖常见的键赋值、CLI 标志、JSON 字段、bearer 头、PEM 块和流行的令牌前缀。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## Gateway 网关 WebSocket 日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Gateway 网关以两种模式打印 WebSocket 协议日志：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **普通模式（无 `--verbose`）**：仅打印"有趣的"RPC 结果：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 错误（`ok=false`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 慢调用（默认阈值：`>= 50ms`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 解析错误（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **详细模式（`--verbose`）**：打印所有 WS 请求/响应流量。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### WS 日志样式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`openclaw gateway` 支持每个 Gateway 网关的样式切换：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--ws-log auto`（默认）：普通模式已优化；详细模式使用紧凑输出（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--ws-log compact`：详细时使用紧凑输出（配对的请求/响应）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--ws-log full`：详细时使用完整的每帧输出（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--compact`：`--ws-log compact` 的别名（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 优化的（仅错误/慢调用）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw gateway（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 显示所有 WS 流量（配对）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw gateway --verbose --ws-log compact（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 显示所有 WS 流量（完整元数据）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw gateway --verbose --ws-log full（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 控制台格式化（子系统日志）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
控制台格式化器是 **TTY 感知的**，打印一致的带前缀行。子系统日志记录器保持输出分组且易于扫描。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
行为：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 每行都有**子系统前缀**（例如 `[gateway]`、`[canvas]`、`[tailscale]`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **子系统颜色**（每个子系统稳定）加上级别着色（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **当输出是 TTY 或环境看起来像富终端时着色**（`TERM`/`COLORTERM`/`TERM_PROGRAM`），遵守 `NO_COLOR`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **缩短的子系统前缀**：删除前导 `gateway/` + `channels/`，保留最后 2 个段（例如 `whatsapp/outbound`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **按子系统的子日志记录器**（自动前缀 + 结构化字段 `{ subsystem }`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **`logRaw()`** 用于 QR/UX 输出（无前缀，无格式化）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **控制台样式**（例如 `pretty | compact | json`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **控制台日志级别**与文件日志级别分开（当 `logging.level` 设置为 `debug`/`trace` 时，文件保留完整详情）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **WhatsApp 消息正文**以 `debug` 级别记录（使用 `--verbose` 查看它们）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
这保持现有文件日志稳定，同时使交互式输出易于扫描。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
