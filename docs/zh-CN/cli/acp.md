---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 设置基于 ACP 的 IDE 集成（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 调试到 Gateway 网关的 ACP 会话路由（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: 运行用于 IDE 集成的 ACP 桥接器（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: acp（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:44:38Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: 0c09844297da250bc1a558423e7e534d6b6be9045de12d797c07ecd64a0c63ed（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: cli/acp.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# acp（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
运行与 OpenClaw Gateway 网关通信的 ACP（Agent Client Protocol）桥接器。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
此命令通过 stdio 使用 ACP 协议与 IDE 通信，并通过 WebSocket 将提示转发到 Gateway 网关。它将 ACP 会话映射到 Gateway 网关会话键。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 用法（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Remote Gateway（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp --url wss://gateway-host:18789 --token <token>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Attach to an existing session key（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp --session agent:main:main（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Attach by label (must already exist)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp --session-label "support inbox"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Reset the session key before the first prompt（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp --session agent:main:main --reset-session（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## ACP 客户端（调试）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用内置 ACP 客户端在没有 IDE 的情况下检查桥接器的安装完整性。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
它会启动 ACP 桥接器并让你交互式输入提示。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp client（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Point the spawned bridge at a remote Gateway（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp client --server-args --url wss://gateway-host:18789 --token <token>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Override the server command (default: openclaw)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp client --server "node" --server-args openclaw.mjs acp --url ws://127.0.0.1:19001（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 如何使用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
当 IDE（或其他客户端）使用 Agent Client Protocol 并且你希望它驱动 OpenClaw Gateway 网关会话时，请使用 ACP。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 确保 Gateway 网关正在运行（本地或远程）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 配置 Gateway 网关目标（配置或标志）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 将你的 IDE 配置为通过 stdio 运行 `openclaw acp`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例配置（持久化）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw config set gateway.remote.url wss://gateway-host:18789（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw config set gateway.remote.token <token>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例直接运行（不写入配置）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp --url wss://gateway-host:18789 --token <token>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 选择智能体（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
ACP 不直接选择智能体。它通过 Gateway 网关会话键进行路由。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用智能体作用域的会话键来定位特定智能体：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp --session agent:main:main（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp --session agent:design:main（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw acp --session agent:qa:bug-123（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
每个 ACP 会话映射到单个 Gateway 网关会话键。一个智能体可以有多个会话；除非你覆盖键或标签，否则 ACP 默认使用隔离的 `acp:<uuid>` 会话。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## Zed 编辑器设置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在 `~/.config/zed/settings.json` 中添加自定义 ACP 智能体（或使用 Zed 的设置界面）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "agent_servers": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "OpenClaw ACP": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "type": "custom",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "command": "openclaw",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "args": ["acp"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "env": {}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
要定位特定的 Gateway 网关或智能体：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "agent_servers": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "OpenClaw ACP": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "type": "custom",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "command": "openclaw",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "args": [（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        "acp",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        "--url",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        "wss://gateway-host:18789",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        "--token",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        "<token>",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        "--session",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        "agent:design:main"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      ],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "env": {}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在 Zed 中，打开 Agent 面板并选择"OpenClaw ACP"来开始一个会话。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 会话映射（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认情况下，ACP 会话获得一个带有 `acp:` 前缀的隔离 Gateway 网关会话键。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
要重用已知会话，请传递会话键或标签：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--session <key>`：使用特定的 Gateway 网关会话键。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--session-label <label>`：通过标签解析现有会话。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--reset-session`：为该键生成新的会话 ID（相同键，新对话记录）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你的 ACP 客户端支持元数据，你可以按会话覆盖：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "_meta": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "sessionKey": "agent:main:main",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "sessionLabel": "support inbox",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "resetSession": true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在 [/concepts/session](/concepts/session) 了解更多关于会话键的信息。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 选项（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--url <url>`：Gateway 网关 WebSocket URL（配置后默认为 gateway.remote.url）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--token <token>`：Gateway 网关认证令牌。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--password <password>`：Gateway 网关认证密码。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--session <key>`：默认会话键。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--session-label <label>`：要解析的默认会话标签。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--require-existing`：如果会话键/标签不存在则失败。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--reset-session`：在首次使用前重置会话键。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--no-prefix-cwd`：不在提示前添加工作目录前缀。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--verbose, -v`：向 stderr 输出详细日志。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### `acp client` 选项（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--cwd <dir>`：ACP 会话的工作目录。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--server <command>`：ACP 服务器命令（默认：`openclaw`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--server-args <args...>`：传递给 ACP 服务器的额外参数。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--server-verbose`：启用 ACP 服务器的详细日志。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--verbose, -v`：详细客户端日志。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
