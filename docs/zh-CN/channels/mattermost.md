---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 设置 Mattermost（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 调试 Mattermost 路由（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: Mattermost 机器人设置和 OpenClaw 配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: Mattermost（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:43:43Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: 57fabe5eb0efbcb885f4178b317b2fa99a41daf609e3a471de2b44db9def4ad7（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: channels/mattermost.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Mattermost（插件）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
状态：通过插件支持（bot token + WebSocket 事件）。支持频道、群组和私信。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Mattermost 是一个可自托管的团队消息平台；有关产品详情和下载，请访问官方网站（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
[mattermost.com](https://mattermost.com)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 需要插件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Mattermost 以插件形式提供，不包含在核心安装中。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
通过 CLI 安装（npm 注册表）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install @openclaw/mattermost（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
本地检出（从 git 仓库运行时）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install ./extensions/mattermost（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你在配置/新手引导期间选择 Mattermost 并检测到 git 检出，OpenClaw 会自动提供本地安装路径。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
详情：[插件](/tools/plugin)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 快速设置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 安装 Mattermost 插件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 创建 Mattermost bot 账户并复制 **bot token**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 复制 Mattermost **基础 URL**（例如 `https://chat.example.com`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. 配置 OpenClaw 并启动 Gateway 网关。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
最小配置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    mattermost: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      botToken: "mm-token",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      baseUrl: "https://chat.example.com",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      dmPolicy: "pairing",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 环境变量（默认账户）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你偏好使用环境变量，请在 Gateway 网关主机上设置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `MATTERMOST_BOT_TOKEN=...`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `MATTERMOST_URL=https://chat.example.com`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
环境变量仅适用于**默认**账户（`default`）。其他账户必须使用配置值。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 聊天模式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Mattermost 自动响应私信。频道行为由 `chatmode` 控制：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `oncall`（默认）：仅在频道中被 @提及时响应。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `onmessage`：响应每条频道消息。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `onchar`：当消息以触发前缀开头时响应。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
配置示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    mattermost: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      chatmode: "onchar",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      oncharPrefixes: [">", "!"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `onchar` 仍会响应显式 @提及。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.mattermost.requireMention` 对旧配置仍然有效，但推荐使用 `chatmode`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 访问控制（私信）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 默认：`channels.mattermost.dmPolicy = "pairing"`（未知发送者会收到配对码）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 通过以下方式批准：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `openclaw pairing list mattermost`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `openclaw pairing approve mattermost <CODE>`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 公开私信：`channels.mattermost.dmPolicy="open"` 加上 `channels.mattermost.allowFrom=["*"]`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 频道（群组）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 默认：`channels.mattermost.groupPolicy = "allowlist"`（提及限制）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 使用 `channels.mattermost.groupAllowFrom` 将发送者加入允许列表（用户 ID 或 `@username`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 开放频道：`channels.mattermost.groupPolicy="open"`（提及限制）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 出站投递目标（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在 `openclaw message send` 或 cron/webhooks 中使用这些目标格式：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channel:<id>` 用于频道（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `user:<id>` 用于私信（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `@username` 用于私信（通过 Mattermost API 解析）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
裸 ID 被视为频道。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 多账户（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Mattermost 支持在 `channels.mattermost.accounts` 下配置多个账户：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    mattermost: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        default: { name: "Primary", botToken: "mm-token", baseUrl: "https://chat.example.com" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        alerts: { name: "Alerts", botToken: "mm-token-2", baseUrl: "https://alerts.example.com" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 故障排除（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 频道中无回复：确保 bot 在频道中并提及它（oncall），使用触发前缀（onchar），或设置 `chatmode: "onmessage"`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 认证错误：检查 bot token、基础 URL 以及账户是否已启用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 多账户问题：环境变量仅适用于 `default` 账户。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
