---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: "飞书机器人支持状态、功能和配置"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 您想要连接飞书机器人（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 您正在配置飞书渠道（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 飞书（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 飞书机器人（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
状态：生产就绪，支持机器人私聊和群组。使用 WebSocket 长连接模式接收消息。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 需要插件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
安装 Feishu 插件：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install @openclaw/feishu（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
本地 checkout（在 git 仓库内运行）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install ./extensions/feishu（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 快速开始（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
添加飞书渠道有两种方式：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 方式一：通过安装向导添加（推荐）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果您刚安装完 OpenClaw，可以直接运行向导，根据提示添加飞书：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw onboard（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
向导会引导您完成：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 创建飞书应用并获取凭证（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 配置应用凭证（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 启动网关（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
✅ **完成配置后**，您可以使用以下命令检查网关状态：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw gateway status` - 查看网关运行状态（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw logs --follow` - 查看实时日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 方式二：通过命令行添加（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果您已经完成了初始安装，可以用以下命令添加飞书渠道：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw channels add（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
然后根据交互式提示选择 Feishu，输入 App ID 和 App Secret 即可。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
✅ **完成配置后**，您可以使用以下命令管理网关：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw gateway status` - 查看网关运行状态（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw gateway restart` - 重启网关以应用新配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw logs --follow` - 查看实时日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 第一步：创建飞书应用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 1. 打开飞书开放平台（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
访问 [飞书开放平台](https://open.feishu.cn/app)，使用飞书账号登录。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Lark（国际版）请使用 https://open.larksuite.com/app，并在配置中设置 `domain: "lark"`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 2. 创建应用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 点击 **创建企业自建应用**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 填写应用名称和描述（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 选择应用图标（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
![创建企业自建应用](/images/feishu-step2-create-app.png)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 3. 获取应用凭证（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在应用的 **凭证与基础信息** 页面，复制：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **App ID**（格式如 `cli_xxx`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **App Secret**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
❗ **重要**：请妥善保管 App Secret，不要分享给他人。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
![获取应用凭证](/images/feishu-step3-credentials.png)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 4. 配置应用权限（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在 **权限管理** 页面，点击 **批量导入** 按钮，粘贴以下 JSON 配置一键导入所需权限：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "scopes": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "tenant": [（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "aily:file:read",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "aily:file:write",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "application:application.app_message_stats.overview:readonly",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "application:application:self_manage",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "application:bot.menu:write",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "cardkit:card:write",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "contact:user.employee_id:readonly",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "corehr:file:download",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "docs:document.content:read",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "event:ip_list",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:chat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:chat.access_event.bot_p2p_chat:read",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:chat.members:bot_access",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:message",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:message.group_at_msg:readonly",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:message.group_msg",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:message.p2p_msg:readonly",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:message:readonly",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:message:send_as_bot",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "im:resource",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "sheets:spreadsheet",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "wiki:wiki:readonly"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    ],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "user": ["aily:file:read", "aily:file:write", "im:chat.access_event.bot_p2p_chat:read"]（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
![配置应用权限](/images/feishu-step4-permissions.png)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 5. 启用机器人能力（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在 **应用能力** > **机器人** 页面：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 开启机器人能力（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 配置机器人名称（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
![启用机器人能力](/images/feishu-step5-bot-capability.png)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 6. 配置事件订阅（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
⚠️ **重要提醒**：在配置事件订阅前，请务必确保已完成以下步骤：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 运行 `openclaw channels add` 添加了 Feishu 渠道（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 网关处于启动状态（可通过 `openclaw gateway status` 检查状态）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在 **事件订阅** 页面：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 选择 **使用长连接接收事件**（WebSocket 模式）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 添加事件：`im.message.receive_v1`（接收消息）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
⚠️ **注意**：如果网关未启动或渠道未添加，长连接设置将保存失败。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
![配置事件订阅](/images/feishu-step6-event-subscription.png)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 7. 发布应用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 在 **版本管理与发布** 页面创建版本（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 提交审核并发布（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 等待管理员审批（企业自建应用通常自动通过）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 第二步：配置 OpenClaw（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 通过向导配置（推荐）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
运行以下命令，根据提示粘贴 App ID 和 App Secret：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw channels add（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
选择 **Feishu**，然后输入您在第一步获取的凭证即可。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 通过配置文件配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
编辑 `~/.openclaw/openclaw.json`：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    feishu: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      dmPolicy: "pairing",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        main: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          appId: "cli_xxx",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          appSecret: "xxx",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          botName: "我的AI助手",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 通过环境变量配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
export FEISHU_APP_ID="cli_xxx"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
export FEISHU_APP_SECRET="xxx"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### Lark（国际版）域名（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果您的租户在 Lark（国际版），请设置域名为 `lark`（或完整域名），可配置 `channels.feishu.domain` 或 `channels.feishu.accounts.<id>.domain`：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    feishu: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      domain: "lark",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        main: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          appId: "cli_xxx",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          appSecret: "xxx",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 第三步：启动并测试（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 1. 启动网关（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw gateway（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 2. 发送测试消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在飞书中找到您创建的机器人，发送一条消息。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 3. 配对授权（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认情况下，机器人会回复一个 **配对码**。您需要批准此代码：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw pairing approve feishu <配对码>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
批准后即可正常对话。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 介绍（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **飞书机器人渠道**：由网关管理的飞书机器人（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **确定性路由**：回复始终返回飞书，模型不会选择渠道（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **会话隔离**：私聊共享主会话；群组独立隔离（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **WebSocket 连接**：使用飞书 SDK 的长连接模式，无需公网 URL（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 访问控制（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 私聊访问（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **默认**：`dmPolicy: "pairing"`，陌生用户会收到配对码（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **批准配对**：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  ```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  openclaw pairing list feishu      # 查看待审批列表（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  openclaw pairing approve feishu <CODE>  # 批准（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  ```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **白名单模式**：通过 `channels.feishu.allowFrom` 配置允许的用户 Open ID（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 群组访问（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**1. 群组策略**（`channels.feishu.groupPolicy`）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `"open"` = 允许群组中所有人（默认）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `"allowlist"` = 仅允许 `groupAllowFrom` 中的用户（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `"disabled"` = 禁用群组消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**2. @提及要求**（`channels.feishu.groups.<chat_id>.requireMention`）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `true` = 需要 @机器人才响应（默认）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `false` = 无需 @也响应（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 群组配置示例（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 允许所有群组，需要 @提及（默认行为）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    feishu: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      groupPolicy: "open",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      // 默认 requireMention: true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 允许所有群组，无需 @提及（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
需要为特定群组配置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    feishu: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      groups: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        oc_xxx: { requireMention: false },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 仅允许特定用户在群组中使用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    feishu: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      groupPolicy: "allowlist",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      groupAllowFrom: ["ou_xxx", "ou_yyy"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 获取群组/用户 ID（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 获取群组 ID（chat_id）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
群组 ID 格式为 `oc_xxx`，可以通过以下方式获取：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**方法一**（推荐）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 启动网关并在群组中 @机器人发消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 运行 `openclaw logs --follow` 查看日志中的 `chat_id`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**方法二**：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用飞书 API 调试工具获取机器人所在群组列表。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 获取用户 ID（open_id）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
用户 ID 格式为 `ou_xxx`，可以通过以下方式获取：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**方法一**（推荐）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 启动网关并给机器人发消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 运行 `openclaw logs --follow` 查看日志中的 `open_id`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**方法二**：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
查看配对请求列表，其中包含用户的 Open ID：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw pairing list feishu（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 常用命令（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 命令      | 说明           |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| --------- | -------------- |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `/status` | 查看机器人状态 |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `/reset`  | 重置对话会话   |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `/model`  | 查看/切换模型  |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
> 注意：飞书目前不支持原生命令菜单，命令需要以文本形式发送。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 网关管理命令（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在配置和使用飞书渠道时，您可能需要使用以下网关管理命令：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 命令                       | 说明              |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| -------------------------- | ----------------- |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `openclaw gateway status`  | 查看网关运行状态  |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `openclaw gateway install` | 安装/启动网关服务 |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `openclaw gateway stop`    | 停止网关服务      |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `openclaw gateway restart` | 重启网关服务      |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `openclaw logs --follow`   | 实时查看日志输出  |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 故障排除（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 机器人在群组中不响应（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 检查机器人是否已添加到群组（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 检查是否 @了机器人（默认需要 @提及）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 检查 `groupPolicy` 是否为 `"disabled"`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. 查看日志：`openclaw logs --follow`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 机器人收不到消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 检查应用是否已发布并审批通过（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 检查事件订阅是否配置正确（`im.message.receive_v1`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 检查是否选择了 **长连接** 模式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. 检查应用权限是否完整（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
5. 检查网关是否正在运行：`openclaw gateway status`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
6. 查看实时日志：`openclaw logs --follow`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### App Secret 泄露怎么办（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 在飞书开放平台重置 App Secret（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 更新配置文件中的 App Secret（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 重启网关（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 发送消息失败（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 检查应用是否有 `im:message:send_as_bot` 权限（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 检查应用是否已发布（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 查看日志获取详细错误信息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 高级配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 多账号配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果需要管理多个飞书机器人：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    feishu: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        main: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          appId: "cli_xxx",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          appSecret: "xxx",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          botName: "主机器人",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        backup: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          appId: "cli_yyy",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          appSecret: "yyy",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          botName: "备用机器人",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          enabled: false, // 暂时禁用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 消息限制（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `textChunkLimit`：出站文本分块大小（默认 2000 字符）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `mediaMaxMb`：媒体上传/下载限制（默认 30MB）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 流式输出（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
飞书支持通过交互式卡片实现流式输出，机器人会实时更新卡片内容显示生成进度。默认配置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    feishu: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      streaming: true, // 启用流式卡片输出（默认 true）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      blockStreaming: true, // 启用块级流式（默认 true）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如需禁用流式输出（等待完整回复后一次性发送），可设置 `streaming: false`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 消息引用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在群聊中，机器人的回复可以引用用户发送的原始消息，让对话上下文更加清晰。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
配置选项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    feishu: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      // 账户级别配置（默认 "all"）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      replyToMode: "all",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      groups: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        oc_xxx: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          // 特定群组可以覆盖（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          replyToMode: "first",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`replyToMode` 值说明：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 值        | 行为                               |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| --------- | ---------------------------------- |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `"off"`   | 不引用原消息（私聊默认值）         |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `"first"` | 仅在第一条回复时引用原消息         |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `"all"`   | 所有回复都引用原消息（群聊默认值） |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
> 注意：消息引用功能与流式卡片输出（`streaming: true`）不能同时使用。当启用流式输出时，回复会以卡片形式呈现，不会显示引用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 多 Agent 路由（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
通过 `bindings` 配置，您可以用一个飞书机器人对接多个不同功能或性格的 Agent。系统会根据用户 ID 或群组 ID 自动将对话分发到对应的 Agent。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
配置示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  agents: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    list: [（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      { id: "main" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        id: "clawd-fan",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        workspace: "/home/user/clawd-fan",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        agentDir: "/home/user/.openclaw/agents/clawd-fan/agent",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        id: "clawd-xi",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        workspace: "/home/user/clawd-xi",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        agentDir: "/home/user/.openclaw/agents/clawd-xi/agent",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    ],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  bindings: [（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      // 用户 A 的私聊 → main agent（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      agentId: "main",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      match: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        channel: "feishu",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        peer: { kind: "dm", id: "ou_28b31a88..." },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      // 用户 B 的私聊 → clawd-fan agent（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      agentId: "clawd-fan",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      match: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        channel: "feishu",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        peer: { kind: "dm", id: "ou_0fe6b1c9..." },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      // 某个群组 → clawd-xi agent（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      agentId: "clawd-xi",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      match: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        channel: "feishu",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        peer: { kind: "group", id: "oc_xxx..." },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  ],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
匹配规则说明：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 字段              | 说明                                          |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| ----------------- | --------------------------------------------- |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `agentId`         | 目标 Agent 的 ID，需要在 `agents.list` 中定义 |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `match.channel`   | 渠道类型，这里固定为 `"feishu"`               |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `match.peer.kind` | 对话类型：`"dm"`（私聊）或 `"group"`（群组）  |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `match.peer.id`   | 用户 Open ID（`ou_xxx`）或群组 ID（`oc_xxx`） |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
> 获取 ID 的方法：参见上文 [获取群组/用户 ID](#获取群组用户-id) 章节。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 配置参考（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
完整配置请参考：[网关配置](/gateway/configuration)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
主要选项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 配置项                                            | 说明                           | 默认值    |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| ------------------------------------------------- | ------------------------------ | --------- |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.enabled`                         | 启用/禁用渠道                  | `true`    |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.domain`                          | API 域名（`feishu` 或 `lark`） | `feishu`  |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.accounts.<id>.appId`             | 应用 App ID                    | -         |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.accounts.<id>.appSecret`         | 应用 App Secret                | -         |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.accounts.<id>.domain`            | 单账号 API 域名覆盖            | `feishu`  |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.dmPolicy`                        | 私聊策略                       | `pairing` |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.allowFrom`                       | 私聊白名单（open_id 列表）     | -         |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.groupPolicy`                     | 群组策略                       | `open`    |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.groupAllowFrom`                  | 群组白名单                     | -         |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.groups.<chat_id>.requireMention` | 是否需要 @提及                 | `true`    |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.groups.<chat_id>.enabled`        | 是否启用该群组                 | `true`    |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.textChunkLimit`                  | 消息分块大小                   | `2000`    |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.mediaMaxMb`                      | 媒体大小限制                   | `30`      |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.streaming`                       | 启用流式卡片输出               | `true`    |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `channels.feishu.blockStreaming`                  | 启用块级流式                   | `true`    |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## dmPolicy 策略说明（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| 值            | 行为                                               |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| ------------- | -------------------------------------------------- |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `"pairing"`   | **默认**。未知用户收到配对码，管理员批准后才能对话 |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `"allowlist"` | 仅 `allowFrom` 列表中的用户可对话，其他静默忽略    |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `"open"`      | 允许所有人对话（需在 allowFrom 中加 `"*"`）        |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
| `"disabled"`  | 完全禁止私聊                                       |（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 支持的消息类型（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 接收（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 文本消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 图片（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 文件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 音频（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 视频（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 表情包（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 发送（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 文本消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 图片（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 文件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ✅ 音频（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- ⚠️ 富文本（部分支持）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
