---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 为 OpenClaw 设置 Twitch 聊天集成（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: Twitch 聊天机器人配置和设置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: Twitch（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:44:41Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: 0dd1c05bef570470d8b82c1f6dee5337e8b76b57269c5cad6aee2e711483f8ba（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: channels/twitch.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Twitch（插件）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
通过 IRC 连接支持 Twitch 聊天。OpenClaw 以 Twitch 用户（机器人账户）身份连接，在频道中接收和发送消息。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 需要插件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Twitch 作为插件发布，未与核心安装捆绑。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
通过 CLI 安装（npm 注册表）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install @openclaw/twitch（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
本地检出（从 git 仓库运行时）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install ./extensions/twitch（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
详情：[插件](/tools/plugin)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 快速设置（新手）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 为机器人创建一个专用的 Twitch 账户（或使用现有账户）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 生成凭证：[Twitch Token Generator](https://twitchtokengenerator.com/)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 选择 **Bot Token**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 确认已选择 `chat:read` 和 `chat:write` 权限范围（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 复制 **Client ID** 和 **Access Token**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 查找你的 Twitch 用户 ID：https://www.streamweasels.com/tools/convert-twitch-username-to-user-id/（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. 配置令牌：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 环境变量：`OPENCLAW_TWITCH_ACCESS_TOKEN=...`（仅限默认账户）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 或配置：`channels.twitch.accessToken`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 如果两者都设置，配置优先（环境变量回退仅适用于默认账户）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
5. 启动 Gateway 网关。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**⚠️ 重要：** 添加访问控制（`allowFrom` 或 `allowedRoles`）以防止未授权用户触发机器人。`requireMention` 默认为 `true`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
最小配置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      username: "openclaw", // 机器人的 Twitch 账户（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accessToken: "oauth:abc123...", // OAuth Access Token（或使用 OPENCLAW_TWITCH_ACCESS_TOKEN 环境变量）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      clientId: "xyz789...", // Token Generator 中的 Client ID（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      channel: "vevisk", // 要加入的 Twitch 频道聊天（必填）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      allowFrom: ["123456789"], // （推荐）仅限你的 Twitch 用户 ID - 从 https://www.streamweasels.com/tools/convert-twitch-username-to-user-id/ 获取（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 它是什么（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 由 Gateway 网关拥有的 Twitch 渠道。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 确定性路由：回复总是返回到 Twitch。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 每个账户映射到一个隔离的会话键 `agent:<agentId>:twitch:<accountName>`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `username` 是机器人账户（进行身份验证的账户），`channel` 是要加入的聊天室。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 设置（详细）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 生成凭证（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用 [Twitch Token Generator](https://twitchtokengenerator.com/)：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 选择 **Bot Token**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 确认已选择 `chat:read` 和 `chat:write` 权限范围（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 复制 **Client ID** 和 **Access Token**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
无需手动注册应用。令牌在几小时后过期。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 配置机器人（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**环境变量（仅限默认账户）：**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OPENCLAW_TWITCH_ACCESS_TOKEN=oauth:abc123...（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**或配置：**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      username: "openclaw",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accessToken: "oauth:abc123...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      clientId: "xyz789...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      channel: "vevisk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果环境变量和配置都设置了，配置优先。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 访问控制（推荐）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      allowFrom: ["123456789"], // （推荐）仅限你的 Twitch 用户 ID（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
优先使用 `allowFrom` 作为硬性允许列表。如果你想要基于角色的访问控制，请改用 `allowedRoles`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**可用角色：** `"moderator"`、`"owner"`、`"vip"`、`"subscriber"`、`"all"`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**为什么用用户 ID？** 用户名可以更改，允许冒充。用户 ID 是永久的。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
查找你的 Twitch 用户 ID：https://www.streamweasels.com/tools/convert-twitch-username-%20to-user-id/（将你的 Twitch 用户名转换为 ID）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 令牌刷新（可选）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
来自 [Twitch Token Generator](https://twitchtokengenerator.com/) 的令牌无法自动刷新 - 过期时需要重新生成。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
要实现自动令牌刷新，请在 [Twitch Developer Console](https://dev.twitch.tv/console) 创建你自己的 Twitch 应用并添加到配置中：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      clientSecret: "your_client_secret",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      refreshToken: "your_refresh_token",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
机器人会在令牌过期前自动刷新，并记录刷新事件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 多账户支持（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用 `channels.twitch.accounts` 配置每个账户的令牌。参阅 [`gateway/configuration`](/gateway/configuration) 了解共享模式。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例（一个机器人账户在两个频道中）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        channel1: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          username: "openclaw",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          accessToken: "oauth:abc123...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          clientId: "xyz789...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          channel: "vevisk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        channel2: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          username: "openclaw",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          accessToken: "oauth:def456...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          clientId: "uvw012...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          channel: "secondchannel",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**注意：** 每个账户需要自己的令牌（每个频道一个令牌）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 访问控制（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 基于角色的限制（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        default: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          allowedRoles: ["moderator", "vip"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 按用户 ID 允许列表（最安全）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        default: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          allowFrom: ["123456789", "987654321"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 基于角色的访问（替代方案）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`allowFrom` 是硬性允许列表。设置后，只允许这些用户 ID。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你想要基于角色的访问，请不设置 `allowFrom`，改为配置 `allowedRoles`：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        default: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          allowedRoles: ["moderator"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 禁用 @提及要求（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认情况下，`requireMention` 为 `true`。要禁用并响应所有消息：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        default: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          requireMention: false,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 故障排除（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
首先，运行诊断命令：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw doctor（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw channels status --probe（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 机器人不响应消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**检查访问控制：** 确保你的用户 ID 在 `allowFrom` 中，或临时移除 `allowFrom` 并设置 `allowedRoles: ["all"]` 来测试。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**检查机器人是否在频道中：** 机器人必须加入 `channel` 中指定的频道。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 令牌问题（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**"Failed to connect"或身份验证错误：**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 验证 `accessToken` 是 OAuth 访问令牌值（通常以 `oauth:` 前缀开头）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 检查令牌具有 `chat:read` 和 `chat:write` 权限范围（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果使用令牌刷新，验证 `clientSecret` 和 `refreshToken` 已设置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 令牌刷新不工作（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**检查日志中的刷新事件：**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Using env token source for mybot（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Access token refreshed for user 123456 (expires in 14400s)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你看到"token refresh disabled (no refresh token)"：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 确保提供了 `clientSecret`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 确保提供了 `refreshToken`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**账户配置：**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `username` - 机器人用户名（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `accessToken` - 具有 `chat:read` 和 `chat:write` 权限的 OAuth 访问令牌（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `clientId` - Twitch Client ID（来自 Token Generator 或你的应用）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channel` - 要加入的频道（必填）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `enabled` - 启用此账户（默认：`true`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `clientSecret` - 可选：用于自动令牌刷新（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `refreshToken` - 可选：用于自动令牌刷新（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `expiresIn` - 令牌过期时间（秒）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `obtainmentTimestamp` - 令牌获取时间戳（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `allowFrom` - 用户 ID 允许列表（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `allowedRoles` - 基于角色的访问控制（`"moderator" | "owner" | "vip" | "subscriber" | "all"`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `requireMention` - 需要 @提及（默认：`true`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**提供商选项：**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.twitch.enabled` - 启用/禁用渠道启动（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.twitch.username` - 机器人用户名（简化的单账户配置）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.twitch.accessToken` - OAuth 访问令牌（简化的单账户配置）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.twitch.clientId` - Twitch Client ID（简化的单账户配置）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.twitch.channel` - 要加入的频道（简化的单账户配置）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channels.twitch.accounts.<accountName>` - 多账户配置（以上所有账户字段）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
完整示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    twitch: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      username: "openclaw",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accessToken: "oauth:abc123...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      clientId: "xyz789...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      channel: "vevisk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      clientSecret: "secret123...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      refreshToken: "refresh456...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      allowFrom: ["123456789"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      allowedRoles: ["moderator", "vip"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        default: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          username: "mybot",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          accessToken: "oauth:abc123...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          clientId: "xyz789...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          channel: "your_channel",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          clientSecret: "secret123...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          refreshToken: "refresh456...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          expiresIn: 14400,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          obtainmentTimestamp: 1706092800000,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          allowFrom: ["123456789", "987654321"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          allowedRoles: ["moderator"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 工具操作（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
智能体可以调用 `twitch` 执行以下操作：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `send` - 向频道发送消息（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  action: "twitch",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  params: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    message: "Hello Twitch!",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    to: "#mychannel",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 安全与运维（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **将令牌视为密码** - 永远不要将令牌提交到 git（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **使用自动令牌刷新** 用于长时间运行的机器人（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **使用用户 ID 允许列表** 而不是用户名进行访问控制（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **监控日志** 查看令牌刷新事件和连接状态（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **最小化令牌权限范围** - 只请求 `chat:read` 和 `chat:write`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **如果卡住**：在确认没有其他进程拥有会话后重启 Gateway 网关（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 限制（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 每条消息 **500 个字符**（在单词边界自动分块）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 分块前会去除 Markdown（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 无速率限制（使用 Twitch 内置的速率限制）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
