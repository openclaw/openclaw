---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 调度后台任务或唤醒（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 配置需要与心跳一起或并行运行的自动化（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 在心跳和定时任务之间做选择（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: Gateway网关调度器的定时任务与唤醒（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 定时任务（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-01T19:37:32Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: d43268b0029f1b13d0825ddcc9c06a354987ea17ce02f3b5428a9c68bf936676（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: automation/cron-jobs.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 14（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 定时任务（Gateway网关调度器）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
> **定时任务还是心跳？** 请参阅[定时任务与心跳对比](/automation/cron-vs-heartbeat)了解何时使用哪种方式。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
定时任务是 Gateway网关内置的调度器。它持久化任务、在合适的时间唤醒智能体，并可选择将输出发送回聊天。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你想要 _"每天早上运行"_ 或 _"20 分钟后提醒智能体"_，定时任务就是对应的机制。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 简要概述（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 定时任务运行在 **Gateway网关内部**（而非模型内部）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 任务持久化存储在 `~/.openclaw/cron/` 下，因此重启不会丢失计划。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 两种执行方式：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - **主会话**：入队一个系统事件，然后在下一次心跳时运行。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - **隔离式**：在 `cron:<jobId>` 中运行专用智能体轮次，可投递摘要（默认 announce）或不投递。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 唤醒是一等功能：任务可以请求"立即唤醒"或"下次心跳时"。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 快速开始（可操作）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
创建一个一次性提醒，验证其存在，然后立即运行：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron add \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --name "Reminder" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --at "2026-02-01T16:00:00Z" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --session main \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --system-event "Reminder: check the cron docs draft" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --wake now \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --delete-after-run（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron list（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron run <job-id> --force（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron runs --id <job-id>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
调度一个带投递功能的周期性隔离任务：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron add \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --name "Morning brief" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --cron "0 7 * * *" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --tz "America/Los_Angeles" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --session isolated \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --message "Summarize overnight updates." \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --announce \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --channel slack \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --to "channel:C1234567890"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 工具调用等价形式（Gateway网关定时任务工具）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
有关规范的 JSON 结构和示例，请参阅[工具调用的 JSON 模式](/automation/cron-jobs#json-schema-for-tool-calls)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 定时任务的存储位置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
定时任务默认持久化存储在 Gateway网关主机的 `~/.openclaw/cron/jobs.json` 中。Gateway网关将文件加载到内存中，并在更改时写回，因此仅在 Gateway网关停止时手动编辑才是安全的。请优先使用 `openclaw cron add/edit` 或定时任务工具调用 API 进行更改。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 新手友好概述（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
将定时任务理解为：**何时**运行 + **做什么**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. **选择调度计划**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 一次性提醒 → `schedule.kind = "at"`（CLI：`--at`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 重复任务 → `schedule.kind = "every"` 或 `schedule.kind = "cron"`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 如果你的 ISO 时间戳省略了时区，将被视为 **UTC**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. **选择运行位置**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - `sessionTarget: "main"` → 在下一次心跳时使用主会话上下文运行。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - `sessionTarget: "isolated"` → 在 `cron:<jobId>` 中运行专用智能体轮次。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. **选择负载**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 主会话 → `payload.kind = "systemEvent"`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
   - 隔离会话 → `payload.kind = "agentTurn"`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
可选：一次性任务（`schedule.kind = "at"`）默认会在成功运行后删除。设置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`deleteAfterRun: false` 可保留它（成功后会禁用）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 概念（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 任务（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
定时任务是一条存储记录，包含：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 一个**调度计划**（何时运行），（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 一个**负载**（做什么），（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可选的**投递**（输出发送到哪里）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可选的**智能体绑定**（`agentId`）：在指定智能体下运行任务；如果缺失或未知，Gateway网关会回退到默认智能体。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
任务通过稳定的 `jobId` 标识（用于 CLI/Gateway网关 API）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在智能体工具调用中，`jobId` 是规范字段；旧版 `id` 仍可兼容使用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
一次性任务默认会在成功运行后自动删除；设置 `deleteAfterRun: false` 可保留它。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 调度计划（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
定时任务支持三种调度类型：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `at`：一次性时间戳（ISO 8601 字符串）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `every`：固定间隔（毫秒）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `cron`：5 字段 cron 表达式，可选 IANA 时区。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Cron 表达式使用 `croner`。如果省略时区，将使用 Gateway网关主机的本地时区。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 主会话与隔离式执行（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
#### 主会话任务（系统事件）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
主会话任务入队一个系统事件，并可选择唤醒心跳运行器。它们必须使用 `payload.kind = "systemEvent"`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `wakeMode: "next-heartbeat"`（默认）：事件等待下一次计划心跳。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `wakeMode: "now"`：事件触发立即心跳运行。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
当你需要正常的心跳提示 + 主会话上下文时，这是最佳选择。参见[心跳](/gateway/heartbeat)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
#### 隔离任务（专用定时会话）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
隔离任务在会话 `cron:<jobId>` 中运行专用智能体轮次。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
关键行为：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 提示以 `[cron:<jobId> <任务名称>]` 为前缀，便于追踪。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 每次运行都会启动一个**全新的会话 ID**（不继承之前的对话）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果未指定 `delivery`，隔离任务会默认以“announce”方式投递摘要。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `delivery.mode` 可选 `announce`（投递摘要）或 `none`（内部运行）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
对于嘈杂、频繁或"后台杂务"类任务，使用隔离任务可以避免污染你的主聊天记录。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 负载结构（运行内容）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
支持两种负载类型：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `systemEvent`：仅限主会话，通过心跳提示路由。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `agentTurn`：仅限隔离会话，运行专用智能体轮次。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
常用 `agentTurn` 字段：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `message`：必填文本提示。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `model` / `thinking`：可选覆盖（见下文）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `timeoutSeconds`：可选超时覆盖。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 模型和思维覆盖（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
隔离任务（`agentTurn`）可以覆盖模型和思维级别：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `model`：提供商/模型字符串（例如 `anthropic/claude-sonnet-4-20250514`）或别名（例如 `opus`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `thinking`：思维级别（`off`、`minimal`、`low`、`medium`、`high`、`xhigh`；仅限 GPT-5.2 + Codex 模型）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意：你也可以在主会话任务上设置 `model`，但这会更改共享的主会话模型。我们建议仅对隔离任务使用模型覆盖，以避免意外的上下文切换。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
优先级解析顺序：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 任务负载覆盖（最高优先级）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 钩子特定默认值（例如 `hooks.gmail.model`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 智能体配置默认值（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 投递（渠道 + 目标）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
隔离任务可以通过顶层 `delivery` 配置投递输出：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `delivery.mode`：`announce`（投递摘要）或 `none`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `delivery.channel`：`whatsapp` / `telegram` / `discord` / `slack` / `mattermost`（插件）/ `signal` / `imessage` / `last`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `delivery.to`：渠道特定的接收目标（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `delivery.bestEffort`：投递失败时避免任务失败（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
当启用 announce 投递时，该轮次会抑制消息工具发送；请使用 `delivery.channel`/`delivery.to` 来指定目标。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果省略 `delivery.channel` 或 `delivery.to`，定时任务会回退到主会话的“最后路由”（智能体最后回复的位置）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
目标格式提醒：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Slack/Discord/Mattermost（插件）目标应使用明确前缀（例如 `channel:<id>`、`user:<id>`）以避免歧义。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Telegram 主题应使用 `:topic:` 格式（见下文）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
#### Telegram 投递目标（主题/论坛帖子）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Telegram 通过 `message_thread_id` 支持论坛主题。对于定时任务投递，你可以将主题/帖子编码到 `to` 字段中：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `-1001234567890`（仅聊天 ID）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `-1001234567890:topic:123`（推荐：明确的主题标记）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `-1001234567890:123`（简写：数字后缀）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
带前缀的目标如 `telegram:...` / `telegram:group:...` 也可接受：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `telegram:group:-1001234567890:topic:123`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 工具调用的 JSON 模式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
直接调用 Gateway网关 `cron.*` 工具（智能体工具调用或 RPC）时使用这些结构。CLI 标志接受人类可读的时间格式如 `20m`，但工具调用应使用 ISO 8601 字符串作为 `schedule.at`，并使用毫秒作为 `schedule.everyMs`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### cron.add 参数（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
一次性主会话任务（系统事件）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "name": "Reminder",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "schedule": { "kind": "at", "at": "2026-02-01T16:00:00Z" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "sessionTarget": "main",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "wakeMode": "now",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "payload": { "kind": "systemEvent", "text": "Reminder text" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "deleteAfterRun": true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
带投递的周期性隔离任务：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "name": "Morning brief",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "schedule": { "kind": "cron", "expr": "0 7 * * *", "tz": "America/Los_Angeles" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "sessionTarget": "isolated",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "wakeMode": "next-heartbeat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "payload": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "kind": "agentTurn",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "message": "Summarize overnight updates."（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "delivery": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "mode": "announce",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "channel": "slack",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "to": "channel:C1234567890",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "bestEffort": true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
说明：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `schedule.kind`：`at`（`at`）、`every`（`everyMs`）或 `cron`（`expr`，可选 `tz`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `schedule.at` 接受 ISO 8601（可省略时区；省略时按 UTC 处理）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `everyMs` 为毫秒数。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `sessionTarget` 必须为 `"main"` 或 `"isolated"`，且必须与 `payload.kind` 匹配。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可选字段：`agentId`、`description`、`enabled`、`deleteAfterRun`、`delivery`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `wakeMode` 省略时默认为 `"next-heartbeat"`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### cron.update 参数（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "jobId": "job-123",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "patch": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "enabled": false,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "schedule": { "kind": "every", "everyMs": 3600000 }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
说明：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `jobId` 是规范字段；`id` 可兼容使用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 在补丁中使用 `agentId: null` 可清除智能体绑定。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### cron.run 和 cron.remove 参数（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{ "jobId": "job-123", "mode": "force" }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{ "jobId": "job-123" }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 存储与历史（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 任务存储：`~/.openclaw/cron/jobs.json`（Gateway网关管理的 JSON）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 运行历史：`~/.openclaw/cron/runs/<jobId>.jsonl`（JSONL，自动清理）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 覆盖存储路径：配置中的 `cron.store`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  cron: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    enabled: true, // 默认 true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    store: "~/.openclaw/cron/jobs.json",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    maxConcurrentRuns: 1, // 默认 1（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
完全禁用定时任务：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `cron.enabled: false`（配置）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `OPENCLAW_SKIP_CRON=1`（环境变量）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## CLI 快速开始（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
一次性提醒（UTC ISO，成功后自动删除）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron add \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --name "Send reminder" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --at "2026-01-12T18:00:00Z" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --session main \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --system-event "Reminder: submit expense report." \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --wake now \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --delete-after-run（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
一次性提醒（主会话，立即唤醒）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron add \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --name "Calendar check" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --at "20m" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --session main \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --system-event "Next heartbeat: check calendar." \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --wake now（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
周期性隔离任务（投递到 WhatsApp）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron add \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --name "Morning status" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --cron "0 7 * * *" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --tz "America/Los_Angeles" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --session isolated \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --message "Summarize inbox + calendar for today." \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --announce \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --channel whatsapp \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --to "+15551234567"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
周期性隔离任务（投递到 Telegram 主题）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron add \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --name "Nightly summary (topic)" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --cron "0 22 * * *" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --tz "America/Los_Angeles" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --session isolated \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --message "Summarize today; send to the nightly topic." \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --announce \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --channel telegram \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --to "-1001234567890:topic:123"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
带模型和思维覆盖的隔离任务：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron add \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --name "Deep analysis" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --cron "0 6 * * 1" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --tz "America/Los_Angeles" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --session isolated \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --message "Weekly deep analysis of project progress." \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --model "opus" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --thinking high \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --announce \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --channel whatsapp \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --to "+15551234567"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
智能体选择（多智能体配置）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 将任务绑定到智能体 "ops"（如果该智能体不存在则回退到默认智能体）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron add --name "Ops sweep" --cron "0 6 * * *" --session isolated --message "Check ops queue" --agent ops（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 切换或清除现有任务的智能体（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron edit <jobId> --agent ops（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron edit <jobId> --clear-agent（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
手动运行（调试）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron run <jobId> --force（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
编辑现有任务（补丁字段）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron edit <jobId> \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --message "Updated prompt" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --model "opus" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --thinking low（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
运行历史：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw cron runs --id <jobId> --limit 50（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
不创建任务直接发送系统事件：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw system event --mode now --text "Next heartbeat: check battery."（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## Gateway网关 API 接口（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `cron.list`、`cron.status`、`cron.add`、`cron.update`、`cron.remove`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `cron.run`（强制或到期）、`cron.runs`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  如需不创建任务直接发送系统事件，请使用 [`openclaw system event`](/cli/system)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 故障排除（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### "没有任何任务运行"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 检查定时任务是否已启用：`cron.enabled` 和 `OPENCLAW_SKIP_CRON`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 检查 Gateway网关是否持续运行（定时任务运行在 Gateway网关进程内部）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 对于 `cron` 调度：确认时区（`--tz`）与主机时区的关系。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### Telegram 投递到了错误的位置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 对于论坛主题，使用 `-100…:topic:<id>` 以确保明确无歧义。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果你在日志或存储的"最后路由"目标中看到 `telegram:...` 前缀，这是正常的；定时任务投递接受这些前缀并仍能正确解析主题 ID。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
