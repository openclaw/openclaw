---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 将 Gmail 收件箱触发器接入 OpenClaw（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 为智能体唤醒设置 Pub/Sub 推送（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: 通过 gogcli 将 Gmail Pub/Sub 推送接入 OpenClaw webhooks（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: Gmail PubSub（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:43:25Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: dfb92133b69177e4e984b7d072f5dc28aa53a9e0cf984a018145ed811aa96195（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: automation/gmail-pubsub.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# Gmail Pub/Sub -> OpenClaw（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
目标：Gmail watch -> Pub/Sub 推送 -> `gog gmail watch serve` -> OpenClaw webhook。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 前置条件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 已安装并登录 `gcloud`（[安装指南](https://docs.cloud.google.com/sdk/docs/install-sdk)）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 已安装 `gog` (gogcli) 并为 Gmail 账户授权（[gogcli.sh](https://gogcli.sh/)）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 已启用 OpenClaw hooks（参见 [Webhooks](/automation/webhook)）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 已登录 `tailscale`（[tailscale.com](https://tailscale.com/)）。支持的设置使用 Tailscale Funnel 作为公共 HTTPS 端点。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  其他隧道服务也可以使用，但需要自行配置/不受支持，需要手动接入。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  目前，我们支持的是 Tailscale。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例 hook 配置（启用 Gmail 预设映射）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  hooks: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    token: "OPENCLAW_HOOK_TOKEN",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    path: "/hooks",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    presets: ["gmail"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
要将 Gmail 摘要投递到聊天界面，请用设置了 `deliver` 以及可选的 `channel`/`to` 的映射覆盖预设：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  hooks: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    token: "OPENCLAW_HOOK_TOKEN",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    presets: ["gmail"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    mappings: [（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        match: { path: "gmail" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        action: "agent",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        wakeMode: "now",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        name: "Gmail",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        sessionKey: "hook:gmail:{{messages[0].id}}",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        messageTemplate: "New email from {{messages[0].from}}\nSubject: {{messages[0].subject}}\n{{messages[0].snippet}}\n{{messages[0].body}}",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        model: "openai/gpt-5.2-mini",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        deliver: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        channel: "last",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        // to: "+15551234567"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    ],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你想使用固定渠道，请设置 `channel` + `to`。否则 `channel: "last"` 会使用上次的投递路由（默认回退到 WhatsApp）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
要为 Gmail 运行强制使用更便宜的模型，请在映射中设置 `model`（`provider/model` 或别名）。如果你强制启用了 `agents.defaults.models`，请将其包含在内。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
要专门为 Gmail hooks 设置默认模型和思考级别，请在配置中添加 `hooks.gmail.model` / `hooks.gmail.thinking`：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  hooks: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    gmail: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      model: "openrouter/meta-llama/llama-3.3-70b-instruct:free",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      thinking: "off",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 映射中的每个 hook 的 `model`/`thinking` 仍会覆盖这些默认值。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 回退顺序：`hooks.gmail.model` → `agents.defaults.model.fallbacks` → 主模型（认证/速率限制/超时）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果设置了 `agents.defaults.models`，Gmail 模型必须在允许列表中。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Gmail hook 内容默认使用外部内容安全边界包装。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  要禁用（危险），请设置 `hooks.gmail.allowUnsafeExternalContent: true`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
要进一步自定义负载处理，请添加 `hooks.mappings` 或在 `hooks.transformsDir` 下添加 JS/TS 转换模块（参见 [Webhooks](/automation/webhook)）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 向导（推荐）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用 OpenClaw 助手将所有内容接入在一起（在 macOS 上通过 brew 安装依赖）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw webhooks gmail setup \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --account openclaw@gmail.com（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认设置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 使用 Tailscale Funnel 作为公共推送端点。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 为 `openclaw webhooks gmail run` 写入 `hooks.gmail` 配置。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 启用 Gmail hook 预设（`hooks.presets: ["gmail"]`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
路径说明：当启用 `tailscale.mode` 时，OpenClaw 会自动将 `hooks.gmail.serve.path` 设置为 `/`，并将公共路径保持在 `hooks.gmail.tailscale.path`（默认 `/gmail-pubsub`），因为 Tailscale 在代理之前会剥离设置的路径前缀。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你需要后端接收带前缀的路径，请将 `hooks.gmail.tailscale.target`（或 `--tailscale-target`）设置为完整 URL，如 `http://127.0.0.1:8788/gmail-pubsub`，并匹配 `hooks.gmail.serve.path`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
想要自定义端点？使用 `--push-endpoint <url>` 或 `--tailscale off`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
平台说明：在 macOS 上，向导通过 Homebrew 安装 `gcloud`、`gogcli` 和 `tailscale`；在 Linux 上请先手动安装它们。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Gateway 网关自动启动（推荐）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 当 `hooks.enabled=true` 且设置了 `hooks.gmail.account` 时，Gateway 网关会在启动时运行 `gog gmail watch serve` 并自动续期 watch。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 设置 `OPENCLAW_SKIP_GMAIL_WATCHER=1` 可退出（如果你自己运行守护进程则很有用）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 不要同时运行手动守护进程，否则会遇到 `listen tcp 127.0.0.1:8788: bind: address already in use`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
手动守护进程（启动 `gog gmail watch serve` + 自动续期）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw webhooks gmail run（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 一次性设置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 选择**拥有 `gog` 使用的 OAuth 客户端**的 GCP 项目。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gcloud auth login（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gcloud config set project <project-id>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意：Gmail watch 要求 Pub/Sub 主题与 OAuth 客户端位于同一项目中。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 启用 API：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gcloud services enable gmail.googleapis.com pubsub.googleapis.com（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 创建主题：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gcloud pubsub topics create gog-gmail-watch（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. 允许 Gmail push 发布：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gcloud pubsub topics add-iam-policy-binding gog-gmail-watch \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --member=serviceAccount:gmail-api-push@system.gserviceaccount.com \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --role=roles/pubsub.publisher（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 启动 watch（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gog gmail watch start \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --account openclaw@gmail.com \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --label INBOX \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --topic projects/<project-id>/topics/gog-gmail-watch（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
保存输出中的 `history_id`（用于调试）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 运行推送处理程序（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
本地示例（共享 token 认证）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gog gmail watch serve \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --account openclaw@gmail.com \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --bind 127.0.0.1 \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --port 8788 \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --path /gmail-pubsub \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --token <shared> \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --hook-url http://127.0.0.1:18789/hooks/gmail \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --hook-token OPENCLAW_HOOK_TOKEN \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --include-body \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --max-bytes 20000（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--token` 保护推送端点（`x-gog-token` 或 `?token=`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--hook-url` 指向 OpenClaw `/hooks/gmail`（已映射；隔离运行 + 摘要发送到主线程）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--include-body` 和 `--max-bytes` 控制发送到 OpenClaw 的正文片段。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
推荐：`openclaw webhooks gmail run` 封装了相同的流程并自动续期 watch。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 暴露处理程序（高级，不受支持）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你需要非 Tailscale 隧道，请手动接入并在推送订阅中使用公共 URL（不受支持，无保护措施）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
cloudflared tunnel --url http://127.0.0.1:8788 --no-autoupdate（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用生成的 URL 作为推送端点：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gcloud pubsub subscriptions create gog-gmail-watch-push \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --topic gog-gmail-watch \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --push-endpoint "https://<public-url>/gmail-pubsub?token=<shared>"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
生产环境：使用稳定的 HTTPS 端点并配置 Pub/Sub OIDC JWT，然后运行：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gog gmail watch serve --verify-oidc --oidc-email <svc@...>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 测试（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
向被监视的收件箱发送一条消息：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gog gmail send \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --account openclaw@gmail.com \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --to openclaw@gmail.com \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --subject "watch test" \（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  --body "ping"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
检查 watch 状态和历史记录：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gog gmail watch status --account openclaw@gmail.com（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gog gmail history --account openclaw@gmail.com --since <historyId>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 故障排除（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `Invalid topicName`：项目不匹配（主题不在 OAuth 客户端项目中）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `User not authorized`：主题缺少 `roles/pubsub.publisher`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 空消息：Gmail push 仅提供 `historyId`；通过 `gog gmail history` 获取。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 清理（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gog gmail watch stop --account openclaw@gmail.com（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gcloud pubsub subscriptions delete gog-gmail-watch-push（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
gcloud pubsub topics delete gog-gmail-watch（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
