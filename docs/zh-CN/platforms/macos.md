---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 实现 macOS 应用功能（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 在 macOS 上更改 Gateway 网关生命周期或节点桥接（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: OpenClaw macOS 配套应用（菜单栏 + Gateway 网关代理）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: macOS 应用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:53:14Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: a5b1c02e5905e4cbc6c0688149cdb50a5bf7653e641947143e169ad948d1f057（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: platforms/macos.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# OpenClaw macOS 配套应用（菜单栏 + Gateway 网关代理）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
macOS 应用是 OpenClaw 的**菜单栏配套应用**。它拥有权限，在本地管理/附加到 Gateway 网关（launchd 或手动），并作为节点向智能体暴露 macOS 功能。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 功能（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 在菜单栏中显示原生通知和状态。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 拥有 TCC 提示（通知、辅助功能、屏幕录制、麦克风、语音识别、自动化/AppleScript）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 运行或连接到 Gateway 网关（本地或远程）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 暴露 macOS 专用工具（Canvas、相机、屏幕录制、`system.run`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 在**远程**模式下启动本地节点主机服务（launchd），在**本地**模式下停止它。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可选地托管 **PeekabooBridge** 用于 UI 自动化。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 根据请求通过 npm/pnpm 安装全局 CLI（`openclaw`）（不建议使用 bun 作为 Gateway 网关运行时）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 本地 vs 远程模式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **本地**（默认）：如果存在运行中的本地 Gateway 网关，应用附加到它；否则通过 `openclaw gateway install` 启用 launchd 服务。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **远程**：应用通过 SSH/Tailscale 连接到 Gateway 网关，从不启动本地进程。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  应用启动本地**节点主机服务**，以便远程 Gateway 网关可以访问此 Mac。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  应用不会将 Gateway 网关作为子进程生成。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## Launchd 控制（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
应用管理一个标记为 `bot.molt.gateway` 的每用户 LaunchAgent（使用 `--profile`/`OPENCLAW_PROFILE` 时为 `bot.molt.<profile>`；旧版 `com.openclaw.*` 仍会卸载）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
launchctl kickstart -k gui/$UID/bot.molt.gateway（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
launchctl bootout gui/$UID/bot.molt.gateway（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
运行命名配置文件时，将标签替换为 `bot.molt.<profile>`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果 LaunchAgent 未安装，从应用中启用它或运行 `openclaw gateway install`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 节点功能（mac）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
macOS 应用将自身呈现为一个节点。常用命令：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Canvas：`canvas.present`、`canvas.navigate`、`canvas.eval`、`canvas.snapshot`、`canvas.a2ui.*`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 相机：`camera.snap`、`camera.clip`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 屏幕：`screen.record`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 系统：`system.run`、`system.notify`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
节点报告一个 `permissions` 映射，以便智能体可以决定什么是允许的。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
节点服务 + 应用 IPC：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 当无头节点主机服务运行时（远程模式），它作为节点连接到 Gateway 网关 WS。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `system.run` 在 macOS 应用中执行（UI/TCC 上下文）通过本地 Unix 套接字；提示 + 输出保留在应用内。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
图示（SCI）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Gateway -> Node Service (WS)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
                 |  IPC (UDS + token + HMAC + TTL)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
                 v（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
             Mac App (UI + TCC + system.run)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## Exec 审批（system.run）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`system.run` 由 macOS 应用中的 **Exec 审批**控制（设置 → Exec approvals）。安全 + 询问 + 允许列表本地存储在 Mac 上：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
~/.openclaw/exec-approvals.json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "version": 1,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "defaults": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "security": "deny",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "ask": "on-miss"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "agents": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "main": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "security": "allowlist",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "ask": "on-miss",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "allowlist": [{ "pattern": "/opt/homebrew/bin/rg" }]（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `allowlist` 条目是解析后二进制路径的 glob 模式。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 在提示中选择"Always Allow"会将该命令添加到允许列表。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `system.run` 环境覆盖会被过滤（删除 `PATH`、`DYLD_*`、`LD_*`、`NODE_OPTIONS`、`PYTHON*`、`PERL*`、`RUBYOPT`），然后与应用的环境合并。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 深度链接（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
应用为本地操作注册 `openclaw://` URL 方案。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### `openclaw://agent`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
触发 Gateway 网关 `agent` 请求。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
open 'openclaw://agent?message=Hello%20from%20deep%20link'（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
查询参数：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `message`（必需）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `sessionKey`（可选）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `thinking`（可选）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `deliver` / `to` / `channel`（可选）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `timeoutSeconds`（可选）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `key`（可选无人值守模式密钥）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
安全：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 没有 `key` 时，应用会提示确认。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 有有效的 `key` 时，运行是无人值守的（用于个人自动化）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 新手引导流程（典型）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 安装并启动 **OpenClaw.app**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 完成权限清单（TCC 提示）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 确保**本地**模式处于活动状态且 Gateway 网关正在运行。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. 如果你想要终端访问，安装 CLI。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 构建和开发工作流程（原生）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `cd apps/macos && swift build`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `swift run OpenClaw`（或 Xcode）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 打包应用：`scripts/package-mac-app.sh`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 调试 Gateway 网关连接（macOS CLI）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用调试 CLI 来执行与 macOS 应用使用的相同的 Gateway 网关 WebSocket 握手和发现逻辑，而无需启动应用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
cd apps/macos（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
swift run openclaw-mac connect --json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
swift run openclaw-mac discover --timeout 3000 --json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Connect 选项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--url <ws://host:port>`：覆盖配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--mode <local|remote>`：从配置解析（默认：配置或 local）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--probe`：强制进行新的健康探测（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--timeout <ms>`：请求超时（默认：`15000`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--json`：用于比较的结构化输出（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Discovery 选项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--include-local`：包含会被过滤为"本地"的 Gateway 网关（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--timeout <ms>`：总体发现窗口（默认：`2000`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--json`：用于比较的结构化输出（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
提示：与 `openclaw gateway discover --json` 比较，查看 macOS 应用的发现管道（NWBrowser + tailnet DNS-SD 回退）是否与 Node CLI 基于 `dns-sd` 的发现不同。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 远程连接管道（SSH 隧道）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
当 macOS 应用在**远程**模式下运行时，它会打开一个 SSH 隧道，以便本地 UI 组件可以像在 localhost 上一样与远程 Gateway 网关通信。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 控制隧道（Gateway 网关 WebSocket 端口）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **目的：**健康检查、状态、Web Chat、配置和其他控制平面调用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **本地端口：**Gateway 网关端口（默认 `18789`），始终稳定。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **远程端口：**远程主机上的相同 Gateway 网关端口。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **行为：**无随机本地端口；应用复用现有的健康隧道或在需要时重启它。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **SSH 形式：**`ssh -N -L <local>:127.0.0.1:<remote>`，带有 BatchMode + ExitOnForwardFailure + keepalive 选项。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **IP 报告：**SSH 隧道使用 loopback，因此 Gateway 网关将看到节点 IP 为 `127.0.0.1`。如果你想要显示真实的客户端 IP，请使用 **Direct (ws/wss)** 传输（参见 [macOS 远程访问](/platforms/mac/remote)）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
有关设置步骤，请参阅 [macOS 远程访问](/platforms/mac/remote)。有关协议详情，请参阅 [Gateway 网关协议](/gateway/protocol)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 相关文档（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Gateway 网关运维手册](/gateway)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Gateway 网关（macOS）](/platforms/mac/bundled-gateway)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [macOS 权限](/platforms/mac/permissions)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Canvas](/platforms/mac/canvas)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
