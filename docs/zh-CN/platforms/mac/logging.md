---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 捕获 macOS 日志或调查隐私数据日志记录（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 调试语音唤醒/会话生命周期问题（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: OpenClaw 日志：滚动诊断文件日志 + 统一日志隐私标志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: macOS 日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-01T21:32:54Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: c4c201d154915e0eb08bf5e32bac98fa93766f50f2a24bf56ab4424eb7781526（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: platforms/mac/logging.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 日志（macOS）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 滚动诊断文件日志（Debug 面板）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OpenClaw 通过 swift-log（默认使用统一日志）路由 macOS 应用日志，并且在需要持久化捕获时可以将本地轮转文件日志写入磁盘。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 详细级别：**Debug 面板 → Logs → App logging → Verbosity**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 启用：**Debug 面板 → Logs → App logging → "Write rolling diagnostics log (JSONL)"**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 位置：`~/Library/Logs/OpenClaw/diagnostics.jsonl`（自动轮转；旧文件以 `.1`、`.2`、… 为后缀）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 清除：**Debug 面板 → Logs → App logging → "Clear"**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 此功能**默认关闭**。仅在主动调试时启用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 该文件包含敏感信息；分享前请先审查内容。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## macOS 上统一日志的隐私数据（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
统一日志会屏蔽大部分负载内容，除非子系统选择启用 `privacy -off`。根据 Peter 关于 macOS [日志隐私机制](https://steipete.me/posts/2025/logging-privacy-shenanigans)（2025）的文章，这通过 `/Library/Preferences/Logging/Subsystems/` 中以子系统名称为键的 plist 文件来控制。只有新的日志条目才会应用该标志，因此请在复现问题之前启用它。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 为 OpenClaw 启用（`bot.molt`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 先将 plist 写入临时文件，然后以 root 身份原子性地安装：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
cat <<'EOF' >/tmp/bot.molt.plist（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
<?xml version="1.0" encoding="UTF-8"?>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
<plist version="1.0">（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
<dict>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    <key>DEFAULT-OPTIONS</key>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    <dict>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        <key>Enable-Private-Data</key>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        <true/>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    </dict>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
</dict>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
</plist>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
EOF（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
sudo install -m 644 -o root -g wheel /tmp/bot.molt.plist /Library/Preferences/Logging/Subsystems/bot.molt.plist（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 无需重启；logd 会很快检测到该文件，但只有新的日志行才会包含隐私负载。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 使用现有的辅助脚本查看更丰富的输出，例如 `./scripts/clawlog.sh --category WebChat --last 5m`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 调试后禁用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 移除覆盖配置：`sudo rm /Library/Preferences/Logging/Subsystems/bot.molt.plist`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可选择运行 `sudo log config --reload` 强制 logd 立即丢弃覆盖配置。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 请注意此数据可能包含电话号码和消息正文；仅在确实需要额外详细信息时才保留该 plist 文件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
