---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你需要跨多个文件进行结构化编辑（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你想要记录或调试基于补丁的编辑（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: 使用 apply_patch 工具应用多文件补丁（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: apply_patch 工具（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-01T21:39:24Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: 8cec2b4ee3afa9105fc3dd1bc28a338917df129afc634ac83620a3347c46bcec（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: tools/apply-patch.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# apply_patch 工具（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用结构化补丁格式应用文件更改。这非常适合多文件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
或多段编辑，在这些场景下单次 `edit` 调用会很脆弱。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
该工具接受一个 `input` 字符串，其中包含一个或多个文件操作：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
*** Begin Patch（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
*** Add File: path/to/file.txt（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
+line 1（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
+line 2（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
*** Update File: src/app.ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
@@（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
-old line（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
+new line（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
*** Delete File: obsolete.txt（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
*** End Patch（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 参数（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `input`（必需）：完整的补丁内容，包括 `*** Begin Patch` 和 `*** End Patch`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 说明（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 路径相对于工作区根目录解析。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 在 `*** Update File:` 段中使用 `*** Move to:` 可重命名文件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 需要时使用 `*** End of File` 标记仅在文件末尾的插入。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 实验性功能，默认禁用。通过 `tools.exec.applyPatch.enabled` 启用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 仅限 OpenAI（包括 OpenAI Codex）。可选通过（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  `tools.exec.applyPatch.allowModels` 按模型进行限制。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 配置仅在 `tools.exec` 下。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 示例（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "tool": "apply_patch",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "input": "*** Begin Patch\n*** Update File: src/index.ts\n@@\n-const foo = 1\n+const foo = 2\n*** End Patch"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
