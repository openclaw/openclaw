---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 添加或修改插件/扩展（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 记录插件安装或加载规则（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: OpenClaw 插件/扩展：发现、配置和安全（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 插件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:55:25Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: b36ca6b90ca03eaae25c00f9b12f2717fcd17ac540ba616ee03b398b234c2308（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: tools/plugin.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 插件（扩展）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 快速开始（插件新手？）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件只是一个**小型代码模块**，用额外功能（命令、工具和 Gateway 网关 RPC）扩展 OpenClaw。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
大多数时候，当你想要一个尚未内置到核心 OpenClaw 的功能（或你想将可选功能排除在主安装之外）时，你会使用插件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
快速路径：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 查看已加载的内容：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins list（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 安装官方插件（例如：Voice Call）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install @openclaw/voice-call（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 重启 Gateway 网关，然后在 `plugins.entries.<id>.config` 下配置。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
参见 [Voice Call](/plugins/voice-call) 了解具体的插件示例。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 可用插件（官方）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 从 2026.1.15 起 Microsoft Teams 仅作为插件提供；如果使用 Teams，请安装 `@openclaw/msteams`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Memory (Core) — 捆绑的记忆搜索插件（通过 `plugins.slots.memory` 默认启用）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Memory (LanceDB) — 捆绑的长期记忆插件（自动召回/捕获；设置 `plugins.slots.memory = "memory-lancedb"`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Voice Call](/plugins/voice-call) — `@openclaw/voice-call`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Zalo Personal](/plugins/zalouser) — `@openclaw/zalouser`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Matrix](/channels/matrix) — `@openclaw/matrix`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Nostr](/channels/nostr) — `@openclaw/nostr`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Zalo](/channels/zalo) — `@openclaw/zalo`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Microsoft Teams](/channels/msteams) — `@openclaw/msteams`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Google Antigravity OAuth（提供商认证）— 作为 `google-antigravity-auth` 捆绑（默认禁用）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Gemini CLI OAuth（提供商认证）— 作为 `google-gemini-cli-auth` 捆绑（默认禁用）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Qwen OAuth（提供商认证）— 作为 `qwen-portal-auth` 捆绑（默认禁用）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Copilot Proxy（提供商认证）— 本地 VS Code Copilot Proxy 桥接；与内置 `github-copilot` 设备登录不同（捆绑，默认禁用）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OpenClaw 插件是通过 jiti 在运行时加载的 **TypeScript 模块**。**配置验证不会执行插件代码**；它使用插件清单和 JSON Schema。参见 [插件清单](/plugins/manifest)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件可以注册：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Gateway 网关 RPC 方法（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Gateway 网关 HTTP 处理程序（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 智能体工具（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- CLI 命令（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 后台服务（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可选的配置验证（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **Skills**（通过在插件清单中列出 `skills` 目录）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **自动回复命令**（不调用 AI 智能体即可执行）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件与 Gateway 网关**在同一进程中**运行，因此将它们视为受信任的代码。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
工具编写指南：[插件智能体工具](/plugins/agent-tools)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 运行时辅助工具（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件可以通过 `api.runtime` 访问选定的核心辅助工具。对于电话 TTS：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
const result = await api.runtime.tts.textToSpeechTelephony({（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  text: "Hello from OpenClaw",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  cfg: api.config,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
});（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 使用核心 `messages.tts` 配置（OpenAI 或 ElevenLabs）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 返回 PCM 音频缓冲区 + 采样率。插件必须为提供商重新采样/编码。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Edge TTS 不支持电话。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 发现和优先级（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OpenClaw 按顺序扫描：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 配置路径（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `plugins.load.paths`（文件或目录）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 工作区扩展（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `<workspace>/.openclaw/extensions/*.ts`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `<workspace>/.openclaw/extensions/*/index.ts`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 全局扩展（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `~/.openclaw/extensions/*.ts`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `~/.openclaw/extensions/*/index.ts`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. 捆绑扩展（随 OpenClaw 一起发布，**默认禁用**）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `<openclaw>/extensions/*`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
捆绑插件必须通过 `plugins.entries.<id>.enabled` 或 `openclaw plugins enable <id>` 显式启用。已安装的插件默认启用，但可以用相同方式禁用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
每个插件必须在其根目录中包含 `openclaw.plugin.json` 文件。如果路径指向文件，则插件根目录是文件的目录，必须包含清单。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果多个插件解析到相同的 id，上述顺序中的第一个匹配项获胜，较低优先级的副本被忽略。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 包集合（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件目录可以包含带有 `openclaw.extensions` 的 `package.json`：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "name": "my-pack",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "openclaw": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "extensions": ["./src/safety.ts", "./src/tools.ts"]（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
每个条目成为一个插件。如果包列出多个扩展，插件 id 变为 `name/<fileBase>`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你的插件导入 npm 依赖，请在该目录中安装它们以便 `node_modules` 可用（`npm install` / `pnpm install`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 渠道目录元数据（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
渠道插件可以通过 `openclaw.channel` 广播新手引导元数据，通过 `openclaw.install` 广播安装提示。这使核心目录保持无数据。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "name": "@openclaw/nextcloud-talk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "openclaw": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "extensions": ["./index.ts"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "channel": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "id": "nextcloud-talk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "label": "Nextcloud Talk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "selectionLabel": "Nextcloud Talk (self-hosted)",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "docsPath": "/channels/nextcloud-talk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "docsLabel": "nextcloud-talk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "blurb": "Self-hosted chat via Nextcloud Talk webhook bots.",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "order": 65,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "aliases": ["nc-talk", "nc"]（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "install": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "npmSpec": "@openclaw/nextcloud-talk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "localPath": "extensions/nextcloud-talk",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "defaultChoice": "npm"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OpenClaw 还可以合并**外部渠道目录**（例如，MPM 注册表导出）。将 JSON 文件放在以下位置之一：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `~/.openclaw/mpm/plugins.json`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `~/.openclaw/mpm/catalog.json`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `~/.openclaw/plugins/catalog.json`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
或将 `OPENCLAW_PLUGIN_CATALOG_PATHS`（或 `OPENCLAW_MPM_CATALOG_PATHS`）指向一个或多个 JSON 文件（逗号/分号/`PATH` 分隔）。每个文件应包含 `{ "entries": [ { "name": "@scope/pkg", "openclaw": { "channel": {...}, "install": {...} } } ] }`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 插件 ID（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认插件 id：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 包集合：`package.json` 的 `name`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 独立文件：文件基本名称（`~/.../voice-call.ts` → `voice-call`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果插件导出 `id`，OpenClaw 会使用它，但当它与配置的 id 不匹配时会发出警告。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  plugins: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    allow: ["voice-call"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    deny: ["untrusted-plugin"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    load: { paths: ["~/Projects/oss/voice-call-extension"] },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    entries: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "voice-call": { enabled: true, config: { provider: "twilio" } },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
字段：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `enabled`：主开关（默认：true）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `allow`：允许列表（可选）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `deny`：拒绝列表（可选；deny 优先）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `load.paths`：额外的插件文件/目录（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `entries.<id>`：每个插件的开关 + 配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
配置更改**需要重启 Gateway 网关**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
验证规则（严格）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `entries`、`allow`、`deny` 或 `slots` 中的未知插件 id 是**错误**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 未知的 `channels.<id>` 键是**错误**，除非插件清单声明了渠道 id。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 插件配置使用嵌入在 `openclaw.plugin.json`（`configSchema`）中的 JSON Schema 进行验证。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果插件被禁用，其配置会保留并发出**警告**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 插件槽位（独占类别）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
某些插件类别是**独占的**（一次只有一个活跃）。使用 `plugins.slots` 选择哪个插件拥有该槽位：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  plugins: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    slots: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      memory: "memory-core", // or "none" to disable memory plugins（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果多个插件声明 `kind: "memory"`，只有选定的那个加载。其他的被禁用并带有诊断信息。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 控制界面（schema + 标签）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
控制界面使用 `config.schema`（JSON Schema + `uiHints`）来渲染更好的表单。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OpenClaw 在运行时根据发现的插件增强 `uiHints`：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 为 `plugins.entries.<id>` / `.enabled` / `.config` 添加每插件标签（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 在以下位置合并可选的插件提供的配置字段提示：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  `plugins.entries.<id>.config.<field>`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你希望插件配置字段显示良好的标签/占位符（并将密钥标记为敏感），请在插件清单中提供 `uiHints` 和 JSON Schema。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "id": "my-plugin",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "configSchema": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "type": "object",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "additionalProperties": false,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "properties": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "apiKey": { "type": "string" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "region": { "type": "string" }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "uiHints": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "apiKey": { "label": "API Key", "sensitive": true },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "region": { "label": "Region", "placeholder": "us-east-1" }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## CLI（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins list（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins info <id>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install <path>                 # copy a local file/dir into ~/.openclaw/extensions/<id>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install ./extensions/voice-call # relative path ok（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install ./plugin.tgz           # install from a local tarball（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install ./plugin.zip           # install from a local zip（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install -l ./extensions/voice-call # link (no copy) for dev（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins install @openclaw/voice-call # install from npm（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins update <id>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins update --all（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins enable <id>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins disable <id>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw plugins doctor（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`plugins update` 仅适用于在 `plugins.installs` 下跟踪的 npm 安装。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件也可以注册自己的顶级命令（例如：`openclaw voicecall`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 插件 API（概述）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件导出以下之一：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 函数：`(api) => { ... }`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 对象：`{ id, name, configSchema, register(api) { ... } }`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 插件钩子（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件可以附带钩子并在运行时注册它们。这让插件可以捆绑事件驱动的自动化，而无需单独安装钩子包。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 示例（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
import { registerPluginHooksFromDir } from "openclaw/plugin-sdk";（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
export default function register(api) {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  registerPluginHooksFromDir(api, "./hooks");（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 钩子目录遵循正常的钩子结构（`HOOK.md` + `handler.ts`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 钩子资格规则仍然适用（操作系统/二进制文件/环境/配置要求）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 插件管理的钩子在 `openclaw hooks list` 中显示为 `plugin:<id>`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 你不能通过 `openclaw hooks` 启用/禁用插件管理的钩子；而是启用/禁用插件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 提供商插件（模型认证）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件可以注册**模型提供商认证**流程，以便用户可以在 OpenClaw 内运行 OAuth 或 API 密钥设置（无需外部脚本）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
通过 `api.registerProvider(...)` 注册提供商。每个提供商暴露一个或多个认证方法（OAuth、API 密钥、设备码等）。这些方法驱动：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw models auth login --provider <id> [--method <id>]`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
api.registerProvider({（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  id: "acme",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  label: "AcmeAI",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  auth: [（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      id: "oauth",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      label: "OAuth",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      kind: "oauth",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      run: async (ctx) => {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        // Run OAuth flow and return auth profiles.（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        return {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          profiles: [（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
            {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
              profileId: "acme:default",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
              credential: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
                type: "oauth",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
                provider: "acme",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
                access: "...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
                refresh: "...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
                expires: Date.now() + 3600 * 1000,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
              },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
            },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          ],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
          defaultModel: "acme/opus-1",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        };（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  ],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
});（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `run` 接收带有 `prompter`、`runtime`、`openUrl` 和 `oauth.createVpsAwareHandlers` 辅助工具的 `ProviderAuthContext`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 当需要添加默认模型或提供商配置时返回 `configPatch`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 返回 `defaultModel` 以便 `--set-default` 可以更新智能体默认值。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 注册消息渠道（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件可以注册**渠道插件**，其行为类似于内置渠道（WhatsApp、Telegram 等）。渠道配置位于 `channels.<id>` 下，由你的渠道插件代码验证。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
const myChannel = {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  id: "acmechat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  meta: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    id: "acmechat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    label: "AcmeChat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    selectionLabel: "AcmeChat (API)",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    docsPath: "/channels/acmechat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    blurb: "demo channel plugin.",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    aliases: ["acme"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  capabilities: { chatTypes: ["direct"] },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  config: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    listAccountIds: (cfg) => Object.keys(cfg.channels?.acmechat?.accounts ?? {}),（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    resolveAccount: (cfg, accountId) =>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      cfg.channels?.acmechat?.accounts?.[accountId ?? "default"] ?? {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        accountId,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  outbound: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    deliveryMode: "direct",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    sendText: async () => ({ ok: true }),（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
};（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
export default function (api) {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  api.registerChannel({ plugin: myChannel });（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 将配置放在 `channels.<id>` 下（而不是 `plugins.entries`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `meta.label` 用于 CLI/UI 列表中的标签。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `meta.aliases` 添加用于规范化和 CLI 输入的备用 id。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `meta.preferOver` 列出当两者都配置时要跳过自动启用的渠道 id。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `meta.detailLabel` 和 `meta.systemImage` 让 UI 显示更丰富的渠道标签/图标。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 编写新的消息渠道（分步指南）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
当你想要一个**新的聊天界面**（"消息渠道"）而不是模型提供商时使用此方法。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
模型提供商文档位于 `/providers/*` 下。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 选择 id + 配置结构（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 所有渠道配置位于 `channels.<id>` 下。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 对于多账户设置，优先使用 `channels.<id>.accounts.<accountId>`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 定义渠道元数据（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `meta.label`、`meta.selectionLabel`、`meta.docsPath`、`meta.blurb` 控制 CLI/UI 列表。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `meta.docsPath` 应指向像 `/channels/<id>` 这样的文档页面。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `meta.preferOver` 让插件替换另一个渠道（自动启用优先选择它）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `meta.detailLabel` 和 `meta.systemImage` 被 UI 用于详细文本/图标。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. 实现必需的适配器（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `config.listAccountIds` + `config.resolveAccount`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `capabilities`（聊天类型、媒体、线程等）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `outbound.deliveryMode` + `outbound.sendText`（用于基本发送）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. 根据需要添加可选适配器（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `setup`（向导）、`security`（私信策略）、`status`（健康/诊断）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `gateway`（启动/停止/登录）、`mentions`、`threading`、`streaming`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `actions`（消息操作）、`commands`（原生命令行为）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
5. 在插件中注册渠道（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `api.registerChannel({ plugin })`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
最小配置示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  channels: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    acmechat: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      accounts: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        default: { token: "ACME_TOKEN", enabled: true },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
最小渠道插件（仅出站）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
const plugin = {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  id: "acmechat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  meta: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    id: "acmechat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    label: "AcmeChat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    selectionLabel: "AcmeChat (API)",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    docsPath: "/channels/acmechat",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    blurb: "AcmeChat messaging channel.",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    aliases: ["acme"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  capabilities: { chatTypes: ["direct"] },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  config: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    listAccountIds: (cfg) => Object.keys(cfg.channels?.acmechat?.accounts ?? {}),（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    resolveAccount: (cfg, accountId) =>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      cfg.channels?.acmechat?.accounts?.[accountId ?? "default"] ?? {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        accountId,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  outbound: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    deliveryMode: "direct",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    sendText: async ({ text }) => {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      // deliver `text` to your channel here（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      return { ok: true };（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
};（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
export default function (api) {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  api.registerChannel({ plugin });（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
加载插件（扩展目录或 `plugins.load.paths`），重启 Gateway 网关，然后在配置中配置 `channels.<id>`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 智能体工具（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
参见专门指南：[插件智能体工具](/plugins/agent-tools)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 注册 Gateway 网关 RPC 方法（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
export default function (api) {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  api.registerGatewayMethod("myplugin.status", ({ respond }) => {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    respond(true, { ok: true });（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  });（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 注册 CLI 命令（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
export default function (api) {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  api.registerCli(（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    ({ program }) => {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      program.command("mycmd").action(() => {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        console.log("Hello");（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      });（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    { commands: ["mycmd"] },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  );（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 注册自动回复命令（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件可以注册自定义斜杠命令，**无需调用 AI 智能体**即可执行。这对于切换命令、状态检查或不需要 LLM 处理的快速操作很有用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
export default function (api) {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  api.registerCommand({（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    name: "mystatus",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    description: "Show plugin status",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    handler: (ctx) => ({（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      text: `Plugin is running! Channel: ${ctx.channel}`,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    }),（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  });（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
命令处理程序上下文：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `senderId`：发送者的 ID（如可用）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `channel`：发送命令的渠道（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `isAuthorizedSender`：发送者是否是授权用户（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `args`：命令后传递的参数（如果 `acceptsArgs: true`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `commandBody`：完整的命令文本（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `config`：当前 OpenClaw 配置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
命令选项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `name`：命令名称（不带前导 `/`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `description`：命令列表中显示的帮助文本（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `acceptsArgs`：命令是否接受参数（默认：false）。如果为 false 且提供了参数，命令不会匹配，消息会传递给其他处理程序（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `requireAuth`：是否需要授权发送者（默认：true）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `handler`：返回 `{ text: string }` 的函数（可以是异步的）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
带授权和参数的示例：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
api.registerCommand({（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  name: "setmode",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  description: "Set plugin mode",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  acceptsArgs: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  requireAuth: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  handler: async (ctx) => {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    const mode = ctx.args?.trim() || "default";（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    await saveMode(mode);（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    return { text: `Mode set to: ${mode}` };（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
});（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意事项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 插件命令在内置命令和 AI 智能体**之前**处理（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 命令全局注册，适用于所有渠道（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 命令名称不区分大小写（`/MyStatus` 匹配 `/mystatus`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 命令名称必须以字母开头，只能包含字母、数字、连字符和下划线（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 保留的命令名称（如 `help`、`status`、`reset` 等）不能被插件覆盖（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 跨插件的重复命令注册将失败并显示诊断错误（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 注册后台服务（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```ts（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
export default function (api) {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  api.registerService({（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    id: "my-service",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    start: () => api.logger.info("ready"),（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    stop: () => api.logger.info("bye"),（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  });（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 命名约定（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Gateway 网关方法：`pluginId.action`（例如：`voicecall.status`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 工具：`snake_case`（例如：`voice_call`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- CLI 命令：kebab 或 camel，但避免与核心命令冲突（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## Skills（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件可以在仓库中附带 Skills（`skills/<name>/SKILL.md`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用 `plugins.entries.<id>.enabled`（或其他配置门控）启用它，并确保它存在于你的工作区/托管 Skills 位置。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 分发（npm）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
推荐的打包方式：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 主包：`openclaw`（本仓库）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 插件：`@openclaw/*` 下的独立 npm 包（例如：`@openclaw/voice-call`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
发布契约：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 插件 `package.json` 必须包含带有一个或多个入口文件的 `openclaw.extensions`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 入口文件可以是 `.js` 或 `.ts`（jiti 在运行时加载 TS）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw plugins install <npm-spec>` 使用 `npm pack`，提取到 `~/.openclaw/extensions/<id>/`，并在配置中启用它。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 配置键稳定性：作用域包被规范化为 `plugins.entries.*` 的**无作用域** id。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 示例插件：Voice Call（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
本仓库包含一个语音通话插件（Twilio 或 log 回退）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 源码：`extensions/voice-call`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Skills：`skills/voice-call`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- CLI：`openclaw voicecall start|status`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 工具：`voice_call`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- RPC：`voicecall.start`、`voicecall.status`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 配置（twilio）：`provider: "twilio"` + `twilio.accountSid/authToken/from`（可选 `statusCallbackUrl`、`twimlUrl`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 配置（dev）：`provider: "log"`（无网络）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
参见 [Voice Call](/plugins/voice-call) 和 `extensions/voice-call/README.md` 了解设置和用法。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 安全注意事项（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件与 Gateway 网关在同一进程中运行。将它们视为受信任的代码：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 只安装你信任的插件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 优先使用 `plugins.allow` 允许列表。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 更改后重启 Gateway 网关。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 测试插件（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
插件可以（也应该）附带测试：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 仓库内插件可以在 `src/**` 下保留 Vitest 测试（例如：`src/plugins/voice-call.plugin.test.ts`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 单独发布的插件应运行自己的 CI（lint/构建/测试）并验证 `openclaw.extensions` 指向构建的入口点（`dist/index.js`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
