---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你想从浏览器操作 Gateway 网关（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你想要无需 SSH 隧道的 Tailnet 访问（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: Gateway 网关的浏览器控制 UI（聊天、节点、配置）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 控制 UI（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T10:13:20Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: bef105a376fc1a1df44e3e4fb625db1cbcafe2f41e718181c36877b8cbc08816（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: web/control-ui.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 控制 UI（浏览器）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
控制 UI 是一个由 Gateway 网关提供服务的小型 **Vite + Lit** 单页应用：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 默认：`http://<host>:18789/`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可选前缀：设置 `gateway.controlUi.basePath`（例如 `/openclaw`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
它**直接与同一端口上的 Gateway 网关 WebSocket** 通信。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 快速打开（本地）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果 Gateway 网关在同一台计算机上运行，打开：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- http://127.0.0.1:18789/（或 http://localhost:18789/）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果页面加载失败，请先启动 Gateway 网关：`openclaw gateway`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
认证在 WebSocket 握手期间通过以下方式提供：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `connect.params.auth.token`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `connect.params.auth.password`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  仪表板设置面板允许你存储 token；密码不会被持久化。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  新手引导向导默认生成一个 Gateway 网关 token，所以在首次连接时将其粘贴到这里。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 设备配对（首次连接）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
当你从新浏览器或设备连接到控制 UI 时，Gateway 网关需要**一次性配对批准** — 即使你在同一个 Tailnet 上且 `gateway.auth.allowTailscale: true`。这是防止未授权访问的安全措施。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**你会看到：** "disconnected (1008): pairing required"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**批准设备：**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 列出待处理的请求（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw devices list（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 按请求 ID 批准（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw devices approve <requestId>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
一旦批准，设备会被记住，除非你使用 `openclaw devices revoke --device <id> --role <role>` 撤销它，否则不需要重新批准。参见 [Devices CLI](/cli/devices) 了解 token 轮换和撤销。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**注意：**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 本地连接（`127.0.0.1`）会自动批准。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 远程连接（LAN、Tailnet 等）需要显式批准。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 每个浏览器配置文件生成唯一的设备 ID，因此切换浏览器或清除浏览器数据将需要重新配对。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 目前可以做什么（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 通过 Gateway 网关 WS 与模型聊天（`chat.history`、`chat.send`、`chat.abort`、`chat.inject`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 在聊天中流式传输工具调用 + 实时工具输出卡片（智能体事件）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 渠道：WhatsApp/Telegram/Discord/Slack + 插件渠道（Mattermost 等）状态 + QR 登录 + 每渠道配置（`channels.status`、`web.login.*`、`config.patch`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 实例：在线列表 + 刷新（`system-presence`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 会话：列表 + 每会话思考/详细覆盖（`sessions.list`、`sessions.patch`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 定时任务：列出/添加/运行/启用/禁用 + 运行历史（`cron.*`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- Skills：状态、启用/禁用、安装、API 密钥更新（`skills.*`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 节点：列表 + 能力（`node.list`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 执行批准：编辑 Gateway 网关或节点允许列表 + `exec host=gateway/node` 的询问策略（`exec.approvals.*`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 配置：查看/编辑 `~/.openclaw/openclaw.json`（`config.get`、`config.set`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 配置：应用 + 带验证的重启（`config.apply`）并唤醒上次活动的会话（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 配置写入包含基础哈希保护，以防止覆盖并发编辑（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 配置 schema + 表单渲染（`config.schema`，包括插件 + 渠道 schema）；原始 JSON 编辑器仍然可用（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 调试：状态/健康/模型快照 + 事件日志 + 手动 RPC 调用（`status`、`health`、`models.list`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 日志：Gateway 网关文件日志的实时尾部跟踪，带过滤/导出（`logs.tail`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 更新：运行包/git 更新 + 重启（`update.run`）并显示重启报告（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 聊天行为（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `chat.send` 是**非阻塞的**：它立即以 `{ runId, status: "started" }` 确认，响应通过 `chat` 事件流式传输。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 使用相同的 `idempotencyKey` 重新发送在运行时返回 `{ status: "in_flight" }`，完成后返回 `{ status: "ok" }`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `chat.inject` 将助手备注附加到会话转录，并为仅 UI 更新广播 `chat` 事件（无智能体运行，无渠道投递）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 停止：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 点击**停止**（调用 `chat.abort`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 输入 `/stop`（或 `stop|esc|abort|wait|exit|interrupt`）以带外中止（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `chat.abort` 支持 `{ sessionKey }`（无 `runId`）以中止该会话的所有活动运行（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## Tailnet 访问（推荐）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 集成 Tailscale Serve（首选）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
保持 Gateway 网关在 loopback 上，让 Tailscale Serve 用 HTTPS 代理它：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw gateway --tailscale serve（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
打开：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `https://<magicdns>/`（或你配置的 `gateway.controlUi.basePath`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认情况下，当 `gateway.auth.allowTailscale` 为 `true` 时，Serve 请求可以通过 Tailscale 身份头（`tailscale-user-login`）进行认证。OpenClaw 通过使用 `tailscale whois` 解析 `x-forwarded-for` 地址并与头匹配来验证身份，并且只在请求通过 Tailscale 的 `x-forwarded-*` 头到达 loopback 时接受这些。如果你想即使对于 Serve 流量也要求 token/密码，请设置 `gateway.auth.allowTailscale: false`（或强制 `gateway.auth.mode: "password"`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 绑定到 tailnet + token（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw gateway --bind tailnet --token "$(openssl rand -hex 32)"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
然后打开：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `http://<tailscale-ip>:18789/`（或你配置的 `gateway.controlUi.basePath`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
将 token 粘贴到 UI 设置中（作为 `connect.params.auth.token` 发送）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 不安全的 HTTP（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你通过普通 HTTP 打开仪表板（`http://<lan-ip>` 或 `http://<tailscale-ip>`），浏览器在**非安全上下文**中运行并阻止 WebCrypto。默认情况下，OpenClaw **阻止**没有设备身份的控制 UI 连接。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**推荐修复：** 使用 HTTPS（Tailscale Serve）或在本地打开 UI：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `https://<magicdns>/`（Serve）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `http://127.0.0.1:18789/`（在 Gateway 网关主机上）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
**降级示例（仅通过 HTTP 使用 token）：**（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  gateway: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    controlUi: { allowInsecureAuth: true },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    bind: "tailnet",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    auth: { mode: "token", token: "replace-me" },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
这会为控制 UI 禁用设备身份 + 配对（即使在 HTTPS 上）。仅在你信任网络时使用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
参见 [Tailscale](/gateway/tailscale) 了解 HTTPS 设置指南。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 构建 UI（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
Gateway 网关从 `dist/control-ui` 提供静态文件。使用以下命令构建：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
pnpm ui:build # 首次运行时自动安装 UI 依赖（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
可选的绝对基础路径（当你想要固定的资源 URL 时）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OPENCLAW_CONTROL_UI_BASE_PATH=/openclaw/ pnpm ui:build（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
用于本地开发（单独的开发服务器）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
pnpm ui:dev # 首次运行时自动安装 UI 依赖（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
然后将 UI 指向你的 Gateway 网关 WS URL（例如 `ws://127.0.0.1:18789`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 调试/测试：开发服务器 + 远程 Gateway 网关（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
控制 UI 是静态文件；WebSocket 目标是可配置的，可以与 HTTP 源不同。当你想要在本地使用 Vite 开发服务器但 Gateway 网关在其他地方运行时，这很方便。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. 启动 UI 开发服务器：`pnpm ui:dev`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. 打开类似以下的 URL：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```text（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
http://localhost:5173/?gatewayUrl=ws://<gateway-host>:18789（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
可选的一次性认证（如需要）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```text（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
http://localhost:5173/?gatewayUrl=wss://<gateway-host>:18789&token=<gateway-token>（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `gatewayUrl` 在加载后存储在 localStorage 中并从 URL 中移除。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `token` 存储在 localStorage 中；`password` 仅保留在内存中。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 当 Gateway 网关在 TLS 后面时（Tailscale Serve、HTTPS 代理等），使用 `wss://`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
远程访问设置详情：[远程访问](/gateway/remote)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
