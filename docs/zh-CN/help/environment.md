---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你需要知道哪些环境变量被加载，以及加载顺序（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你在调试 Gateway 网关中缺失的 API 密钥（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你在编写提供商认证或部署环境的文档（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: OpenClaw 从哪里加载环境变量以及优先级顺序（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 环境变量（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:47:11Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: b49ae50e5d306612f89f93a86236188a4f2ec23f667e2388b043832be3ac1546（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: help/environment.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 环境变量（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OpenClaw 从多个来源拉取环境变量。规则是**永不覆盖现有值**。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 优先级（从高到低）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
1. **进程环境**（Gateway 网关进程从父 shell/守护进程已有的内容）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
2. **当前工作目录中的 `.env`**（dotenv 默认；不覆盖）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
3. **全局 `.env`** 位于 `~/.openclaw/.env`（即 `$OPENCLAW_STATE_DIR/.env`；不覆盖）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
4. **配置 `env` 块** 位于 `~/.openclaw/openclaw.json`（仅在缺失时应用）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
5. **可选的登录 shell 导入**（`env.shellEnv.enabled` 或 `OPENCLAW_LOAD_SHELL_ENV=1`），仅对缺失的预期键名应用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果配置文件完全缺失，步骤 4 将被跳过；如果启用了 shell 导入，它仍会运行。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 配置 `env` 块（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
两种等效方式设置内联环境变量（都是非覆盖的）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  env: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    OPENROUTER_API_KEY: "sk-or-...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    vars: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      GROQ_API_KEY: "gsk-...",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## Shell 环境导入（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`env.shellEnv` 运行你的登录 shell 并仅导入**缺失的**预期键名：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  env: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    shellEnv: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      enabled: true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      timeoutMs: 15000,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
环境变量等效项：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `OPENCLAW_LOAD_SHELL_ENV=1`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `OPENCLAW_SHELL_ENV_TIMEOUT_MS=15000`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 配置中的环境变量替换（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
你可以使用 `${VAR_NAME}` 语法在配置字符串值中直接引用环境变量：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  models: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    providers: {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "vercel-gateway": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        apiKey: "${VERCEL_GATEWAY_API_KEY}",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
完整详情参见[配置：环境变量替换](/gateway/configuration#env-var-substitution-in-config)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 相关内容（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [Gateway 网关配置](/gateway/configuration)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [常见问题：环境变量和 .env 加载](/help/faq#env-vars-and-env-loading)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- [模型概述](/concepts/models)（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
