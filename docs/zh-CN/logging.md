---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
read_when:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你需要一个适合初学者的日志概述（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你想配置日志级别或格式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - 你正在故障排除并需要快速找到日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
summary: 日志概述：文件日志、控制台输出、CLI 跟踪和控制 UI（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
title: 日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
x-i18n:（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  generated_at: "2026-02-03T07:50:52Z"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  model: claude-opus-4-5（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  provider: pi（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_hash: 884fcf4a906adff34d546908e22abd283cb89fe0845076cf925c72384ec3556b（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  source_path: logging.md（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  workflow: 15（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
---（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
# 日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OpenClaw 在两个地方记录日志：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **文件日志**（JSON 行）由 Gateway 网关写入。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **控制台输出**显示在终端和控制 UI 中。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
本页说明日志存放位置、如何读取日志以及如何配置日志级别和格式。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 日志存放位置（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
默认情况下，Gateway 网关在以下位置写入滚动日志文件：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`/tmp/openclaw/openclaw-YYYY-MM-DD.log`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
日期使用 Gateway 网关主机的本地时区。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
你可以在 `~/.openclaw/openclaw.json` 中覆盖此设置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "logging": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "file": "/path/to/openclaw.log"（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 如何读取日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### CLI：实时跟踪（推荐）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用 CLI 通过 RPC 跟踪 Gateway 网关日志文件：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw logs --follow（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
输出模式：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **TTY 会话**：美观、彩色、结构化的日志行。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **非 TTY 会话**：纯文本。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--json`：行分隔的 JSON（每行一个日志事件）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--plain`：在 TTY 会话中强制纯文本。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `--no-color`：禁用 ANSI 颜色。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
在 JSON 模式下，CLI 输出带 `type` 标签的对象：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `meta`：流元数据（文件、游标、大小）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `log`：解析的日志条目（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `notice`：截断/轮转提示（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `raw`：未解析的日志行（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果 Gateway 网关无法访问，CLI 会打印一个简短提示运行：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw doctor（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 控制 UI（Web）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
控制 UI 的**日志**标签页使用 `logs.tail` 跟踪相同的文件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
参见 [/web/control-ui](/web/control-ui) 了解如何打开它。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 仅渠道日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
要过滤渠道活动（WhatsApp/Telegram 等），使用：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```bash（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
openclaw channels logs --channel whatsapp（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 日志格式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 文件日志（JSONL）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
日志文件中的每一行都是一个 JSON 对象。CLI 和控制 UI 解析这些条目以渲染结构化输出（时间、级别、子系统、消息）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 控制台输出（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
控制台日志**感知 TTY**并格式化以提高可读性：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 子系统前缀（例如 `gateway/channels/whatsapp`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 级别着色（info/warn/error）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 可选的紧凑或 JSON 模式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
控制台格式由 `logging.consoleStyle` 控制。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 配置日志（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
所有日志配置都在 `~/.openclaw/openclaw.json` 的 `logging` 下。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "logging": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "level": "info",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "file": "/tmp/openclaw/openclaw-YYYY-MM-DD.log",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "consoleLevel": "info",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "consoleStyle": "pretty",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "redactSensitive": "tools",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "redactPatterns": ["sk-.*"]（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 日志级别（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `logging.level`：**文件日志**（JSONL）级别。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `logging.consoleLevel`：**控制台**详细程度级别。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`--verbose` 仅影响控制台输出；它不改变文件日志级别。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 控制台样式（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
`logging.consoleStyle`：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `pretty`：人类友好、彩色、带时间戳。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `compact`：更紧凑的输出（最适合长会话）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `json`：每行 JSON（用于日志处理器）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 脱敏（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
工具摘要可以在敏感令牌输出到控制台之前对其进行脱敏：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `logging.redactSensitive`：`off` | `tools`（默认：`tools`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `logging.redactPatterns`：用于覆盖默认集的正则表达式字符串列表（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
脱敏仅影响**控制台输出**，不会改变文件日志。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 诊断 + OpenTelemetry（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
诊断是用于模型运行**和**消息流遥测（webhooks、队列、会话状态）的结构化、机器可读事件。它们**不**替代日志；它们存在是为了向指标、追踪和其他导出器提供数据。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
诊断事件在进程内发出，但导出器仅在启用诊断 + 导出器插件时才附加。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### OpenTelemetry 与 OTLP（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **OpenTelemetry（OTel）**：追踪、指标和日志的数据模型 + SDK。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **OTLP**：用于将 OTel 数据导出到收集器/后端的线路协议。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- OpenClaw 目前通过 **OTLP/HTTP（protobuf）** 导出。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 导出的信号（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **指标**：计数器 + 直方图（令牌使用、消息流、队列）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **追踪**：模型使用 + webhook/消息处理的 span。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **日志**：启用 `diagnostics.otel.logs` 时通过 OTLP 导出。日志量可能很大；请注意 `logging.level` 和导出器过滤器。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 诊断事件目录（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
模型使用：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `model.usage`：令牌、成本、持续时间、上下文、提供商/模型/渠道、会话 ID。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
消息流：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `webhook.received`：每渠道的 webhook 入口。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `webhook.processed`：webhook 已处理 + 持续时间。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `webhook.error`：webhook 处理程序错误。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `message.queued`：消息入队等待处理。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `message.processed`：结果 + 持续时间 + 可选错误。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
队列 + 会话：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `queue.lane.enqueue`：命令队列通道入队 + 深度。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `queue.lane.dequeue`：命令队列通道出队 + 等待时间。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `session.state`：会话状态转换 + 原因。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `session.stuck`：会话卡住警告 + 持续时间。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `run.attempt`：运行重试/尝试元数据。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `diagnostic.heartbeat`：聚合计数器（webhooks/队列/会话）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 启用诊断（无导出器）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
如果你希望诊断事件可用于插件或自定义接收器，使用此配置：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "diagnostics": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "enabled": true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 诊断标志（定向日志）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
使用标志在不提高 `logging.level` 的情况下开启额外的定向调试日志。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
标志不区分大小写，支持通配符（例如 `telegram.*` 或 `*`）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "diagnostics": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "flags": ["telegram.http"]（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
环境变量覆盖（一次性）：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
OPENCLAW_DIAGNOSTICS=telegram.http,telegram.payload（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 标志日志进入标准日志文件（与 `logging.file` 相同）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 输出仍根据 `logging.redactSensitive` 进行脱敏。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 完整指南：[/diagnostics/flags](/diagnostics/flags)。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 导出到 OpenTelemetry（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
诊断可以通过 `diagnostics-otel` 插件（OTLP/HTTP）导出。这适用于任何接受 OTLP/HTTP 的 OpenTelemetry 收集器/后端。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```json（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
{（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "plugins": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "allow": ["diagnostics-otel"],（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "entries": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "diagnostics-otel": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
        "enabled": true（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  },（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  "diagnostics": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "enabled": true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    "otel": {（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "enabled": true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "endpoint": "http://otel-collector:4318",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "protocol": "http/protobuf",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "serviceName": "openclaw-gateway",（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "traces": true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "metrics": true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "logs": true,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "sampleRate": 0.2,（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
      "flushIntervalMs": 60000（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
    }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  }（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
}（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
```（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
注意：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 你也可以使用 `openclaw plugins enable diagnostics-otel` 启用插件。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `protocol` 目前仅支持 `http/protobuf`。`grpc` 被忽略。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 指标包括令牌使用、成本、上下文大小、运行持续时间和消息流计数器/直方图（webhooks、队列、会话状态、队列深度/等待）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 追踪/指标可以通过 `traces` / `metrics` 切换（默认：开启）。启用时，追踪包括模型使用 span 加上 webhook/消息处理 span。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 当你的收集器需要认证时设置 `headers`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 支持的环境变量：`OTEL_EXPORTER_OTLP_ENDPOINT`、`OTEL_SERVICE_NAME`、`OTEL_EXPORTER_OTLP_PROTOCOL`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 导出的指标（名称 + 类型）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
模型使用：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.tokens`（计数器，属性：`openclaw.token`、`openclaw.channel`、`openclaw.provider`、`openclaw.model`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.cost.usd`（计数器，属性：`openclaw.channel`、`openclaw.provider`、`openclaw.model`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.run.duration_ms`（直方图，属性：`openclaw.channel`、`openclaw.provider`、`openclaw.model`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.context.tokens`（直方图，属性：`openclaw.context`、`openclaw.channel`、`openclaw.provider`、`openclaw.model`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
消息流：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.webhook.received`（计数器，属性：`openclaw.channel`、`openclaw.webhook`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.webhook.error`（计数器，属性：`openclaw.channel`、`openclaw.webhook`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.webhook.duration_ms`（直方图，属性：`openclaw.channel`、`openclaw.webhook`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.message.queued`（计数器，属性：`openclaw.channel`、`openclaw.source`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.message.processed`（计数器，属性：`openclaw.channel`、`openclaw.outcome`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.message.duration_ms`（直方图，属性：`openclaw.channel`、`openclaw.outcome`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
队列 + 会话：（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.queue.lane.enqueue`（计数器，属性：`openclaw.lane`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.queue.lane.dequeue`（计数器，属性：`openclaw.lane`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.queue.depth`（直方图，属性：`openclaw.lane` 或 `openclaw.channel=heartbeat`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.queue.wait_ms`（直方图，属性：`openclaw.lane`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.session.state`（计数器，属性：`openclaw.state`、`openclaw.reason`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.session.stuck`（计数器，属性：`openclaw.state`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.session.stuck_age_ms`（直方图，属性：`openclaw.state`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.run.attempt`（计数器，属性：`openclaw.attempt`）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 导出的 span（名称 + 关键属性）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.model.usage`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `openclaw.channel`、`openclaw.provider`、`openclaw.model`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `openclaw.sessionKey`、`openclaw.sessionId`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `openclaw.tokens.*`（input/output/cache_read/cache_write/total）（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.webhook.processed`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `openclaw.channel`、`openclaw.webhook`、`openclaw.chatId`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.webhook.error`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `openclaw.channel`、`openclaw.webhook`、`openclaw.chatId`、`openclaw.error`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.message.processed`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `openclaw.channel`、`openclaw.outcome`、`openclaw.chatId`、`openclaw.messageId`、`openclaw.sessionKey`、`openclaw.sessionId`、`openclaw.reason`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `openclaw.session.stuck`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
  - `openclaw.state`、`openclaw.ageMs`、`openclaw.queueDepth`、`openclaw.sessionKey`、`openclaw.sessionId`（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 采样 + 刷新（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 追踪采样：`diagnostics.otel.sampleRate`（0.0–1.0，仅根 span）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 指标导出间隔：`diagnostics.otel.flushIntervalMs`（最小 1000ms）。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 协议说明（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- OTLP/HTTP 端点可以通过 `diagnostics.otel.endpoint` 或 `OTEL_EXPORTER_OTLP_ENDPOINT` 设置。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果端点已包含 `/v1/traces` 或 `/v1/metrics`，则按原样使用。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 如果端点已包含 `/v1/logs`，则按原样用于日志。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- `diagnostics.otel.logs` 为主日志器输出启用 OTLP 日志导出。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
### 日志导出行为（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- OTLP 日志使用与写入 `logging.file` 相同的结构化记录。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 遵守 `logging.level`（文件日志级别）。控制台脱敏**不**适用于 OTLP 日志。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- 高流量安装应优先使用 OTLP 收集器采样/过滤。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
## 故障排除提示（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **Gateway 网关无法访问？** 先运行 `openclaw doctor`。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **日志为空？** 检查 Gateway 网关是否正在运行并写入 `logging.file` 中的文件路径。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
- **需要更多细节？** 将 `logging.level` 设置为 `debug` 或 `trace` 并重试。（轉為繁體中文）（轉為繁體中文）（轉為繁體中文）
