---
summary: "ارسال، گیٹ وے، اور ایجنٹ جوابات کے لیے تصاویر اور میڈیا ہینڈلنگ کے قواعد"
read_when:
  - میڈیا پائپ لائن یا منسلکات میں ترمیم کرتے وقت
title: "تصویر اور میڈیا سپورٹ"
---

# Image & Media Support — 2025-12-05

The WhatsApp channel runs via **Baileys Web**. This document captures the current media handling rules for send, gateway, and agent replies.

## Goals

- `openclaw message send --media` کے ذریعے اختیاری کیپشن کے ساتھ میڈیا بھیجیں۔
- ویب اِن باکس سے خودکار جوابات میں متن کے ساتھ میڈیا شامل کرنے کی اجازت دیں۔
- ہر قسم کی حدیں معقول اور قابلِ پیش گوئی رکھیں۔

## CLI Surface

- `openclaw message send --media <path-or-url> [--message <caption>]`
  - `--media` اختیاری؛ صرف میڈیا بھیجنے کے لیے کیپشن خالی ہو سکتا ہے۔
  - `--dry-run` حل شدہ پے لوڈ پرنٹ کرتا ہے؛ `--json` `{ channel, to, messageId, mediaUrl, caption }` خارج کرتا ہے۔

## WhatsApp Web چینل کا رویہ

- اِن پٹ: لوکل فائل پاتھ **یا** HTTP(S) URL۔
- بہاؤ: بفر میں لوڈ کریں، میڈیا کی قسم معلوم کریں، اور درست پے لوڈ تیار کریں:
  - **Images:** JPEG میں سائز کم کریں اور دوبارہ کمپریس کریں (زیادہ سے زیادہ سائیڈ 2048px) ہدف `agents.defaults.mediaMaxMb` (بطورِ طے شدہ 5 MB)، حد 6 MB۔
  - **Audio/Voice/Video:** 16 MB تک پاس تھرو؛ آڈیو کو وائس نوٹ کے طور پر بھیجا جاتا ہے (`ptt: true`)۔
  - **Documents:** دیگر سب کچھ، 100 MB تک، جہاں ممکن ہو فائل نام برقرار رکھا جاتا ہے۔
- WhatsApp GIF طرز کی پلے بیک: MP4 کو `gifPlayback: true` (CLI: `--gif-playback`) کے ساتھ بھیجیں تاکہ موبائل کلائنٹس اِن لائن لوپ کریں۔
- MIME شناخت میں ترجیح: میجک بائٹس، پھر ہیڈرز، پھر فائل ایکسٹینشن۔
- کیپشن `--message` یا `reply.text` سے آتا ہے؛ خالی کیپشن کی اجازت ہے۔
- لاگنگ: غیر تفصیلی میں `↩️`/`✅` دکھائے جاتے ہیں؛ تفصیلی میں سائز اور ماخذ پاتھ/URL شامل ہوتا ہے۔

## Auto-Reply Pipeline

- `getReplyFromConfig` returns `{ text?, mediaUrl?, mediaUrls? }`.
- جب میڈیا موجود ہو، ویب سینڈر لوکل پاتھ یا URLs کو `openclaw message send` کی طرح اسی پائپ لائن سے حل کرتا ہے۔
- اگر متعدد میڈیا اندراجات فراہم ہوں تو انہیں ترتیب وار بھیجا جاتا ہے۔

## Inbound Media to Commands (Pi)

- جب اِن باؤنڈ ویب پیغامات میں میڈیا شامل ہو، OpenClaw اسے عارضی فائل میں ڈاؤن لوڈ کرتا ہے اور ٹیمپلیٹنگ متغیرات فراہم کرتا ہے:
  - `{{MediaUrl}}` اِن باؤنڈ میڈیا کے لیے فرضی URL۔
  - `{{MediaPath}}` کمانڈ چلانے سے پہلے لکھا گیا لوکل عارضی پاتھ۔
- جب فی سیشن Docker sandbox فعال ہو، اِن باؤنڈ میڈیا کو sandbox ورک اسپیس میں کاپی کیا جاتا ہے اور `MediaPath`/`MediaUrl` کو `media/inbound/<filename>` جیسے نسبتی پاتھ میں دوبارہ لکھا جاتا ہے۔
- میڈیا فہم (اگر `tools.media.*` یا مشترکہ `tools.media.models` کے ذریعے کنفیگر کیا گیا ہو) ٹیمپلیٹنگ سے پہلے چلتا ہے اور `[Image]`، `[Audio]`، اور `[Video]` بلاکس کو `Body` میں داخل کر سکتا ہے۔
  - آڈیو `{{Transcript}}` سیٹ کرتا ہے اور کمانڈ پارسنگ کے لیے ٹرانسکرپٹ استعمال کرتا ہے تاکہ سلیش کمانڈز کام کرتی رہیں۔
  - ویڈیو اور تصویر کی وضاحتیں کمانڈ پارسنگ کے لیے کسی بھی کیپشن متن کو برقرار رکھتی ہیں۔
- By default only the first matching image/audio/video attachment is processed; set `tools.media.<cap>.attachments` to process multiple attachments.

## Limits & Errors

**آؤٹ باؤنڈ ارسال کی حدیں (WhatsApp ویب ارسال)**

- تصاویر: دوبارہ کمپریشن کے بعد تقریباً 6 MB کی حد۔
- آڈیو/وائس/ویڈیو: 16 MB کی حد؛ دستاویزات: 100 MB کی حد۔
- حد سے بڑی یا ناقابلِ مطالعہ میڈیا → لاگز میں واضح خرابی، اور جواب چھوڑ دیا جاتا ہے۔

**میڈیا فہم کی حدیں (ٹرانسکرپشن/تفصیل)**

- تصویر بطورِ طے شدہ: 10 MB (`tools.media.image.maxBytes`)۔
- آڈیو بطورِ طے شدہ: 20 MB (`tools.media.audio.maxBytes`)۔
- ویڈیو بطورِ طے شدہ: 50 MB (`tools.media.video.maxBytes`)۔
- حد سے بڑی میڈیا فہم کو چھوڑ دیتی ہے، مگر اصل باڈی کے ساتھ جوابات پھر بھی بھیجے جاتے ہیں۔

## Notes for Tests

- تصویر/آڈیو/دستاویز کیسز کے لیے ارسال + جواب کے بہاؤ کو کور کریں۔
- تصاویر کے لیے دوبارہ کمپریشن (سائز کی حد) اور آڈیو کے لیے وائس نوٹ فلیگ کی توثیق کریں۔
- یقینی بنائیں کہ کثیر میڈیا جوابات ترتیب وار ارسال کے طور پر پھیلیں۔
