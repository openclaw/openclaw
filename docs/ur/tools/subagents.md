---
summary: "ذیلی ایجنٹس: علیحدہ ایجنٹ رنز کو شروع کرنا جو نتائج کی اطلاع درخواست کرنے والی چیٹ کو دیتے ہیں"
read_when:
  - آپ ایجنٹ کے ذریعے پس منظر/متوازی کام چاہتے ہیں
  - آپ sessions_spawn یا sub-agent ٹول پالیسی میں تبدیلی کر رہے ہیں
title: "ذیلی ایجنٹس"
x-i18n:
  source_path: tools/subagents.md
  source_hash: 3c83eeed69a65dbb
  provider: openai
  model: gpt-5.2-chat-latest
  workflow: v1
  generated_at: 2026-02-08T10:48:01Z
---

# ذیلی ایجنٹس

ذیلی ایجنٹس پس منظر میں چلنے والے ایجنٹ رنز ہوتے ہیں جو کسی موجودہ ایجنٹ رن سے شروع کیے جاتے ہیں۔ یہ اپنی الگ سیشن میں چلتے ہیں (`agent:<agentId>:subagent:<uuid>`) اور مکمل ہونے پر درخواست کرنے والی چیٹ چینل کو اپنے نتیجے کا **اعلان** کرتے ہیں۔

## سلیش کمانڈ

موجودہ سیشن کے لیے ذیلی ایجنٹ رنز کو دیکھنے یا کنٹرول کرنے کے لیے `/subagents` استعمال کریں:

- `/subagents list`
- `/subagents stop <id|#|all>`
- `/subagents log <id|#> [limit] [tools]`
- `/subagents info <id|#>`
- `/subagents send <id|#> <message>`

`/subagents info` رن کی میٹا ڈیٹا دکھاتا ہے (اسٹیٹس، ٹائم اسٹیمپس، سیشن آئی ڈی، ٹرانسکرپٹ پاتھ، کلین اپ)۔

بنیادی اہداف:

- “تحقیق / طویل کام / سست ٹول” جیسے کاموں کو متوازی بنانا تاکہ مرکزی رن بلاک نہ ہو۔
- ذیلی ایجنٹس کو بطورِ طے شدہ علیحدہ رکھنا (سیشن کی جدائی + اختیاری sandboxing)۔
- ٹول کی سطح کو غلط استعمال سے محفوظ رکھنا: ذیلی ایجنٹس کو بطورِ طے شدہ سیشن ٹولز نہیں ملتے۔
- نیسٹڈ فین آؤٹ سے بچنا: ذیلی ایجنٹس مزید ذیلی ایجنٹس شروع نہیں کر سکتے۔

لاگت کا نوٹ: ہر ذیلی ایجنٹ کا اپنا **سیاق** اور ٹوکن استعمال ہوتا ہے۔ بھاری یا تکراری
کاموں کے لیے ذیلی ایجنٹس پر سستا ماڈل سیٹ کریں اور اپنے مرکزی ایجنٹ کو اعلیٰ معیار کے ماڈل پر رکھیں۔
آپ اسے `agents.defaults.subagents.model` کے ذریعے یا ہر ایجنٹ کی اوور رائیڈز سے کنفیگر کر سکتے ہیں۔

## ٹول

`sessions_spawn` استعمال کریں:

- ایک ذیلی ایجنٹ رن شروع کرتا ہے (`deliver: false`، گلوبل لین: `subagent`)
- پھر ایک اعلان مرحلہ چلاتا ہے اور اعلان کا جواب درخواست کرنے والی چیٹ چینل میں پوسٹ کرتا ہے
- بطورِ طے شدہ ماڈل: کالر سے وراثت لیتا ہے، الا یہ کہ آپ `agents.defaults.subagents.model` سیٹ کریں (یا ہر ایجنٹ کے لیے `agents.list[].subagents.model`)؛ واضح `sessions_spawn.model` ہمیشہ غالب رہتا ہے۔
- بطورِ طے شدہ سوچ: کالر سے وراثت لیتا ہے، الا یہ کہ آپ `agents.defaults.subagents.thinking` سیٹ کریں (یا ہر ایجنٹ کے لیے `agents.list[].subagents.thinking`)؛ واضح `sessions_spawn.thinking` ہمیشہ غالب رہتا ہے۔

ٹول کے پیرامیٹرز:

- `task` (لازم)
- `label?` (اختیاری)
- `agentId?` (اختیاری؛ اگر اجازت ہو تو کسی دوسرے ایجنٹ آئی ڈی کے تحت اسپان کریں)
- `model?` (اختیاری؛ ذیلی ایجنٹ کے ماڈل کو اوور رائیڈ کرتا ہے؛ غلط قدریں نظر انداز کی جاتی ہیں اور وارننگ کے ساتھ ذیلی ایجنٹ ڈیفالٹ ماڈل پر چلتا ہے)
- `thinking?` (اختیاری؛ ذیلی ایجنٹ رن کے لیے سوچ کی سطح کو اوور رائیڈ کرتا ہے)
- `runTimeoutSeconds?` (بطورِ طے شدہ `0`؛ سیٹ ہونے پر N سیکنڈ بعد ذیلی ایجنٹ رن منسوخ کر دیا جاتا ہے)
- `cleanup?` (`delete|keep`، بطورِ طے شدہ `keep`)

اجازت فہرست:

- `agents.list[].subagents.allowAgents`: ایجنٹ آئی ڈیز کی فہرست جنہیں `agentId` کے ذریعے ہدف بنایا جا سکتا ہے (`["*"]` کسی کو بھی اجازت دینے کے لیے)۔ بطورِ طے شدہ: صرف درخواست کرنے والا ایجنٹ۔

ڈسکوری:

- `agents_list` استعمال کریں تاکہ معلوم ہو سکے کہ اس وقت `sessions_spawn` کے لیے کون سے ایجنٹ آئی ڈیز اجازت یافتہ ہیں۔

خودکار آرکائیو:

- ذیلی ایجنٹ سیشنز `agents.defaults.subagents.archiveAfterMinutes` کے بعد خودکار طور پر آرکائیو ہو جاتے ہیں (بطورِ طے شدہ: 60)۔
- آرکائیو `sessions.delete` استعمال کرتا ہے اور ٹرانسکرپٹ کا نام `*.deleted.<timestamp>` رکھتا ہے (اسی فولڈر میں)۔
- `cleanup: "delete"` اعلان کے فوراً بعد آرکائیو کر دیتا ہے (نام کی تبدیلی کے ذریعے ٹرانسکرپٹ برقرار رہتا ہے)۔
- خودکار آرکائیو بہترین کوشش کی بنیاد پر ہے؛ اگر gateway دوبارہ شروع ہو جائے تو زیرِ التوا ٹائمرز ضائع ہو جاتے ہیں۔
- `runTimeoutSeconds` خودکار آرکائیو نہیں کرتا؛ یہ صرف رن کو روکتا ہے۔ سیشن خودکار آرکائیو تک موجود رہتا ہے۔

## تصدیق

ذیلی ایجنٹ کی تصدیق **ایجنٹ آئی ڈی** کی بنیاد پر حل ہوتی ہے، نہ کہ سیشن کی قسم پر:

- ذیلی ایجنٹ سیشن کلید `agent:<agentId>:subagent:<uuid>` ہے۔
- auth اسٹور اس ایجنٹ کے `agentDir` سے لوڈ ہوتا ہے۔
- مرکزی ایجنٹ کے auth پروفائلز کو **فال بیک** کے طور پر ضم کیا جاتا ہے؛ تصادم کی صورت میں ایجنٹ پروفائلز مرکزی پروفائلز پر غالب رہتے ہیں۔

نوٹ: یہ ضم کرنا اضافی نوعیت کا ہے، اس لیے مرکزی پروفائلز ہمیشہ فال بیک کے طور پر دستیاب رہتے ہیں۔ فی الحال ہر ایجنٹ کے لیے مکمل طور پر علیحدہ auth سپورٹ نہیں ہے۔

## اعلان

ذیلی ایجنٹس اعلان مرحلے کے ذریعے رپورٹ کرتے ہیں:

- اعلان مرحلہ ذیلی ایجنٹ سیشن کے اندر چلتا ہے (درخواست کرنے والے سیشن میں نہیں)۔
- اگر ذیلی ایجنٹ عین `ANNOUNCE_SKIP` کے ساتھ جواب دے، تو کچھ بھی پوسٹ نہیں کیا جاتا۔
- بصورتِ دیگر اعلان کا جواب درخواست کرنے والی چیٹ چینل میں فالو اَپ `agent` کال کے ذریعے پوسٹ کیا جاتا ہے (`deliver=true`)۔
- اعلان کے جوابات دستیاب ہونے پر تھریڈ/موضوع کی روٹنگ برقرار رکھتے ہیں (Slack تھریڈز، Telegram ٹاپکس، Matrix تھریڈز)۔
- اعلان کے پیغامات ایک مستحکم ٹیمپلیٹ میں نارملائز کیے جاتے ہیں:
  - `Status:` رن کے نتیجے سے ماخوذ (`success`، `error`، `timeout`، یا `unknown`)۔
  - `Result:` اعلان مرحلے کا خلاصہ مواد (یا اگر موجود نہ ہو تو `(not available)`)۔
  - `Notes:` غلطی کی تفصیلات اور دیگر مفید سیاق۔
- `Status` ماڈل آؤٹ پٹ سے اخذ نہیں کیا جاتا؛ یہ رن ٹائم کے نتیجہ جاتی سگنلز سے آتا ہے۔

اعلان پے لوڈز کے آخر میں ایک اسٹیٹس لائن شامل ہوتی ہے (چاہے لپٹی ہوئی ہو):

- رن ٹائم (مثلاً `runtime 5m12s`)
- ٹوکن استعمال (ان پٹ/آؤٹ پٹ/کل)
- ماڈل پرائسنگ کنفیگر ہونے پر تخمینی لاگت (`models.providers.*.models[].cost`)
- `sessionKey`، `sessionId`، اور ٹرانسکرپٹ پاتھ (تاکہ مرکزی ایجنٹ `sessions_history` کے ذریعے ہسٹری حاصل کر سکے یا فائل کو ڈسک پر دیکھ سکے)

## ٹول پالیسی (ذیلی ایجنٹ ٹولز)

بطورِ طے شدہ، ذیلی ایجنٹس کو **سیشن ٹولز کے علاوہ تمام ٹولز** ملتے ہیں:

- `sessions_list`
- `sessions_history`
- `sessions_send`
- `sessions_spawn`

کنفیگ کے ذریعے اوور رائیڈ کریں:

```json5
{
  agents: {
    defaults: {
      subagents: {
        maxConcurrent: 1,
      },
    },
  },
  tools: {
    subagents: {
      tools: {
        // deny wins
        deny: ["gateway", "cron"],
        // if allow is set, it becomes allow-only (deny still wins)
        // allow: ["read", "exec", "process"]
      },
    },
  },
}
```

## ہم وقتیّت

ذیلی ایجنٹس ایک مخصوص اِن-پروسیس کیو لین استعمال کرتے ہیں:

- لین کا نام: `subagent`
- ہم وقتیّت: `agents.defaults.subagents.maxConcurrent` (بطورِ طے شدہ `8`)

## روکنا

- درخواست کرنے والی چیٹ میں `/stop` بھیجنے سے درخواست کرنے والا سیشن منسوخ ہو جاتا ہے اور اس سے شروع کیے گئے تمام فعال ذیلی ایجنٹ رنز رک جاتے ہیں۔

## حدود

- ذیلی ایجنٹ اعلان **بہترین کوشش** کی بنیاد پر ہے۔ اگر gateway دوبارہ شروع ہو جائے تو زیرِ التوا “واپس اعلان” کام ضائع ہو جاتا ہے۔
- ذیلی ایجنٹس اب بھی اسی gateway پروسیس کے وسائل شیئر کرتے ہیں؛ `maxConcurrent` کو حفاظتی والو کے طور پر استعمال کریں۔
- `sessions_spawn` ہمیشہ نان بلاکنگ ہے: یہ فوراً `{ status: "accepted", runId, childSessionKey }` واپس کرتا ہے۔
- ذیلی ایجنٹ سیاق میں صرف `AGENTS.md` + `TOOLS.md` انجیکٹ ہوتے ہیں (کوئی `SOUL.md`، `IDENTITY.md`، `USER.md`، `HEARTBEAT.md`، یا `BOOTSTRAP.md` نہیں)۔
