---
summary: "cron.add کی ان پٹ ہینڈلنگ کو مضبوط بنانا، اسکیماز کو ہم آہنگ کرنا، اور cron UI/ایجنٹ ٹولنگ کو بہتر بنانا"
owner: "openclaw"
status: "complete"
last_updated: "2026-01-05"
title: "Cron Add کی مضبوطی"
---

# Cron Add کی مضبوطی اور اسکیما کی ہم آہنگی

## سیاق و سباق

حالیہ گیٹ وے لاگز میں غلط پیرامیٹرز کے ساتھ بار بار `cron.add` کی ناکامیاں دکھائی دیتی ہیں (`sessionTarget`, `wakeMode`, `payload` غائب ہیں، اور `schedule` خراب ہے)۔ یہ اس بات کی نشاندہی کرتا ہے کہ کم از کم ایک کلائنٹ (ممکنہ طور پر agent ٹول کال پاتھ) ریپڈ یا جزوی طور پر متعین شدہ جاب payloads بھیج رہا ہے۔ علاوہ ازیں، TypeScript میں cron provider enums، گیٹ وے اسکیمہ، CLI فلیگز، اور UI فارم ٹائپس کے درمیان drift موجود ہے، نیز `cron.status` کے لیے UI mismatch ہے (UI `jobCount` کی توقع کرتا ہے جبکہ گیٹ وے `jobs` واپس کرتا ہے)۔

## اہداف

- عام wrapper پے لوڈز کو نارملائز کر کے اور غیر موجود `kind` فیلڈز کا اندازہ لگا کر `cron.add` INVALID_REQUEST اسپام کو روکنا۔
- گیٹ وے اسکیما، cron ٹائپس، CLI دستاویزات، اور UI فارمز میں cron فراہم کنندہ فہرستوں کو ہم آہنگ کرنا۔
- ایجنٹ cron ٹول اسکیما کو واضح بنانا تاکہ LLM درست جاب پے لوڈز تیار کرے۔
- کنٹرول UI میں cron اسٹیٹس جاب کاؤنٹ ڈسپلے کو درست کرنا۔
- نارملائزیشن اور ٹول کے رویے کو کور کرنے کے لیے ٹیسٹس شامل کرنا۔

## غیر اہداف

- cron شیڈولنگ کی معنویت یا جاب ایگزیکیوشن کے رویے میں تبدیلی۔
- نئے شیڈول اقسام یا cron ایکسپریشن پارسنگ کا اضافہ۔
- ضروری فیلڈ فکسز سے آگے cron کے UI/UX کی اوورہالنگ۔

## نتائج (موجودہ خلا)

- گیٹ وے میں `CronPayloadSchema`، `signal` + `imessage` کو خارج کرتا ہے، جبکہ TS ٹائپس انہیں شامل کرتی ہیں۔
- کنٹرول UI کا CronStatus، `jobCount` کی توقع رکھتا ہے، مگر گیٹ وے `jobs` واپس کرتا ہے۔
- ایجنٹ cron ٹول اسکیما من مانی `job` آبجیکٹس کی اجازت دیتا ہے، جس سے خراب ان پٹس ممکن ہو جاتے ہیں۔
- گیٹ وے `cron.add` کی سخت توثیق کرتا ہے اور کوئی نارملائزیشن نہیں کرتا، اس لیے لپٹے ہوئے پے لوڈز ناکام ہو جاتے ہیں۔

## کیا بدلا

- `cron.add` اور `cron.update` اب عام wrapper شکلوں کو نارملائز کرتے ہیں اور غیر موجود `kind` فیلڈز کا اندازہ لگاتے ہیں۔
- ایجنٹ cron ٹول اسکیما گیٹ وے اسکیما سے مطابقت رکھتا ہے، جس سے غلط پے لوڈز کم ہوتے ہیں۔
- فراہم کنندہ enums کو گیٹ وے، CLI، UI، اور macOS picker میں ہم آہنگ کیا گیا ہے۔
- کنٹرول UI اسٹیٹس کے لیے گیٹ وے کے `jobs` کاؤنٹ فیلڈ کا استعمال کرتا ہے۔

## موجودہ رویہ

- **نارملائزیشن:** لپٹے ہوئے `data`/`job` پے لوڈز کو ان ریپ کیا جاتا ہے؛ `schedule.kind` اور `payload.kind` محفوظ صورت میں اخذ کیے جاتے ہیں۔
- **ڈیفالٹس:** غیر موجود ہونے پر `wakeMode` اور `sessionTarget` کے لیے محفوظ ڈیفالٹس لاگو کیے جاتے ہیں۔
- **فراہم کنندگان:** Discord/Slack/Signal/iMessage اب CLI/UI میں یکساں طور پر ظاہر ہوتے ہیں۔

نارملائزڈ شکل اور مثالوں کے لیے [Cron jobs](/automation/cron-jobs) دیکھیں۔

## توثیق

- گیٹ وے لاگز میں `cron.add` INVALID_REQUEST غلطیوں میں کمی کی نگرانی کریں۔
- ریفریش کے بعد کنٹرول UI میں cron اسٹیٹس پر جاب کاؤنٹ کی تصدیق کریں۔

## اختیاری فالو اپس

- دستی کنٹرول UI اسموک: ہر فراہم کنندہ کے لیے ایک cron جاب شامل کریں اور اسٹیٹس جاب کاؤنٹ کی تصدیق کریں۔

## کھلے سوالات

- کیا `cron.add` کو کلائنٹس کی جانب سے واضح `state` قبول کرنا چاہیے (فی الحال اسکیما کے ذریعے ممنوع)؟
- کیا ہمیں `webchat` کو بطور واضح ڈیلیوری فراہم کنندہ اجازت دینی چاہیے (فی الحال ڈیلیوری ریزولوشن میں فلٹر کیا جاتا ہے)؟
