---
summary: "OpenClaw 系統提示的內容及其組裝方式"
read_when:
  - 編輯系統提示文字、工具列表或時間/心跳區段時
  - 變更工作區引導或 Skills 注入行為時
title: "系統提示"
---

# 系統提示

OpenClaw 為每次智慧代理執行建立自訂的系統提示。此提示由 **OpenClaw 擁有**，並且不使用 p-coding-agent 的預設提示。

該提示由 OpenClaw 組裝並注入到每次智慧代理執行中。

## 結構

此提示故意設計為緊湊，並使用固定區段：

- **工具集**: 目前工具列表 + 簡短說明。
- **安全性**: 簡短的防護提醒，避免尋求權力行為或規避監督。
- **Skills** (可用時): 告知模型如何按需求載入 Skills 指令。
- **OpenClaw 自我更新**: 如何執行 `config.apply` 和 `update.run`。
- **工作區**: 工作目錄 (`agents.defaults.workspace`)。
- **文件**: OpenClaw 文件的本地路徑 (儲存庫或 npm 套件) 以及何時閱讀它們。
- **工作區檔案 (注入)**: 表示下方包含引導檔案。
- **沙箱** (啟用時): 表示沙箱隔離執行時環境、沙箱路徑，以及是否提供提升的執行權限。
- **目前日期與時間**: 使用者本地時間、時區和時間格式。
- **回覆標籤**: 支援的供應商可選回覆標籤語法。
- **心跳**: 心跳提示和確認行為。
- **執行時環境**: 主機、作業系統、node、模型、儲存庫根目錄 (偵測到時)、思考層級 (一行)。
- **推理**: 目前可見度層級 + /reasoning 切換提示。

系統提示中的安全防護措施是建議性的。它們引導模型行為，但不強制執行政策。使用工具政策、執行批准、沙箱隔離和頻道允許清單進行硬性強制執行；操作員可以設計停用這些功能。

## 提示模式

OpenClaw 可以為子智慧代理呈現較小的系統提示。執行時環境為每次執行設定一個
`promptMode` (非使用者面設定)：

- `full` (預設): 包含以上所有區段。
- `minimal`: 用於子智慧代理；省略 **Skills**、**記憶體召回**、**OpenClaw
  自我更新**、**模型別名**、**使用者身份**、**回覆標籤**、
  **訊息**、**靜默回覆** 和 **心跳**。工具集、**安全性**、
  工作區、沙箱、目前日期與時間 (已知時)、執行時環境和注入的上下文仍然可用。
- `none`: 只回傳基本身份行。

當 `promptMode=minimal` 時，額外注入的提示會標記為 **子智慧代理上下文**，而非 **群組聊天上下文**。

## 工作區引導注入

引導檔案會被修剪並附加在 **專案上下文** 下方，因此模型無需顯式讀取即可查看身份和個人資料上下文：

- `AGENTS.md`
- `SOUL.md`
- `TOOLS.md`
- `IDENTITY.md`
- `USER.md`
- `HEARTBEAT.md`
- `BOOTSTRAP.md` (僅限全新工作區)
- `MEMORY.md` 和/或 `memory.md` (當存在於工作區時；兩者之一或兩者皆可注入)

所有這些檔案都會在每個回合中**注入到上下文視窗**，這意味著它們會消耗權杖。請保持它們簡潔 — 尤其是 `MEMORY.md`，它會隨著時間增長，導致意想不到的高上下文使用量和更頻繁的壓縮。

> **注意：** `memory/*.md` 的每日檔案**不會**自動注入。它們是透過 `memory_search` 和 `memory_get` 工具按需求存取的，因此除非模型明確讀取它們，否則它們不會計入上下文視窗。

大型檔案會被截斷並附有標記。每個檔案的最大大小由
`agents.defaults.bootstrapMaxChars` 控制 (預設：20000)。遺失的檔案會注入一個
簡短的遺失檔案標記。

子智慧代理工作階段只會注入 `AGENTS.md` 和 `TOOLS.md` (其他引導檔案會被過濾掉以保持子智慧代理上下文較小)。

內部掛鉤可以透過 `agent:bootstrap` 攔截此步驟，以修改或替換注入的引導檔案 (例如將 `SOUL.md` 替換為其他角色)。

若要檢查每個注入檔案的貢獻量 (原始與注入、截斷，加上工具綱要開銷)，請使用 `/context list` 或 `/context detail`。請參閱 [上下文](/concepts/context)。

## 時間處理

當使用者時區已知時，系統提示會包含一個專用的**目前日期與時間**區段。為了保持提示的快取穩定性，它現在只包含**時區** (沒有動態時鐘或時間格式)。

當智慧代理需要目前時間時，請使用 `session_status`；狀態卡中包含一個時間戳記行。

設定方式：

- `agents.defaults.userTimezone`
- `agents.defaults.timeFormat` (`auto` | `12` | `24`)

請參閱 [日期與時間](/date-time) 以了解完整的行為詳情。

## Skills

當存在符合條件的 Skills 時，OpenClaw 會注入一個緊湊的**可用 Skills 列表**
(`formatSkillsForPrompt`)，其中包含每個 skill 的**檔案路徑**。該提示會指示模型使用 `read`
來載入列出位置 (工作區、託管或綑綁) 的 SKILL.md。如果沒有符合條件的 skills，則會省略
Skills 區段。

```
<available_skills>
  <skill>
    <name>...</name>
    <description>...</description>
    <location>...</location>
  </skill>
</available_skills>
```

這使得基本提示保持精簡，同時仍能實現目標性 skills 使用。

## 文件

可用時，系統提示會包含一個**文件**區段，指向本地 OpenClaw docs 目錄 (儲存庫工作區中的 `docs/` 或綑綁的 npm 套件文件)，並註明公共鏡像、原始碼儲存庫、社群 Discord 和 ClawHub ([https://clawhub.com](https://clawhub.com)) 以進行 skills 探索。該提示會指示模型優先查閱本地文件，了解 OpenClaw 行為、命令、設定或架構，並在可能的情況下自行執行 `openclaw status` (僅當它缺乏存取權限時才詢問使用者)。
