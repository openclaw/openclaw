```
---
summary: "å­ä»£ç†ï¼šç”¢ç”Ÿç¨ç«‹çš„ä»£ç†åŸ·è¡Œï¼Œä¸¦å°‡çµæœå›å ±çµ¦è«‹æ±‚èŠå¤©"
read_when:
  - æ‚¨éœ€è¦é€éä»£ç†é€²è¡ŒèƒŒæ™¯/å¹³è¡Œå·¥ä½œæ™‚
  - æ‚¨æ­£åœ¨è®Šæ›´ `sessions_spawn` æˆ–å­ä»£ç†å·¥å…·ç­–ç•¥æ™‚
title: "å­ä»£ç†"
---

# å­ä»£ç†

å­ä»£ç†è®“æ‚¨å¯ä»¥åœ¨èƒŒæ™¯åŸ·è¡Œä»»å‹™ï¼Œè€Œä¸æœƒé˜»æ“‹ä¸»è¦å°è©±ã€‚ç•¶æ‚¨ç”¢ç”Ÿä¸€å€‹å­ä»£ç†æ™‚ï¼Œå®ƒæœƒåœ¨è‡ªå·±çš„ç¨ç«‹å·¥ä½œéšæ®µä¸­åŸ·è¡Œï¼Œå®Œæˆå·¥ä½œå¾Œï¼Œæœƒå°‡çµæœå›å ±çµ¦èŠå¤©ã€‚

**ä½¿ç”¨æƒ…å¢ƒï¼š**

- åœ¨ä¸»è¦æ™ºæ…§ä»£ç†ç¹¼çºŒå›ç­”å•é¡Œçš„åŒæ™‚ï¼Œç ”ç©¶ä¸€å€‹ä¸»é¡Œ
- å¹³è¡ŒåŸ·è¡Œå¤šå€‹é•·æ™‚é–“ä»»å‹™ï¼ˆç¶²è·¯çˆ¬èŸ²ã€ç¨‹å¼ç¢¼åˆ†æã€æª”æ¡ˆè™•ç†ï¼‰
- åœ¨å¤šæ™ºæ…§ä»£ç†è¨­å®šä¸­ï¼Œå°‡ä»»å‹™å§”æ´¾çµ¦å°ˆé–€çš„æ™ºæ…§ä»£ç†

## å¿«é€Ÿé–‹å§‹

ä½¿ç”¨å­ä»£ç†æœ€ç°¡å–®çš„æ–¹å¼æ˜¯è‡ªç„¶åœ°è©¢å•æ‚¨çš„æ™ºæ…§ä»£ç†ï¼š

> "ç”¢ç”Ÿä¸€å€‹å­ä»£ç†ä¾†ç ”ç©¶æœ€æ–°çš„ Node.js ç™¼è¡Œèªªæ˜"

æ™ºæ…§ä»£ç†æœƒåœ¨å¹•å¾Œå‘¼å« `sessions_spawn` å·¥å…·ã€‚ç•¶å­ä»£ç†å®Œæˆæ™‚ï¼Œå®ƒæœƒå°‡å…¶ç™¼ç¾çµæœå›å ±åˆ°æ‚¨çš„èŠå¤©ä¸­ã€‚

æ‚¨ä¹Ÿå¯ä»¥æ˜ç¢ºåœ°æŒ‡å®šé¸é …ï¼š

> "ç”¢ç”Ÿä¸€å€‹å­ä»£ç†ä¾†åˆ†æä»Šå¤©çš„ä¼ºæœå™¨æ—¥èªŒã€‚ä½¿ç”¨ gpt-5.2 ä¸¦è¨­å®š 5 åˆ†é˜é€¾æ™‚ã€‚"

## é‹ä½œæ–¹å¼

<Steps>
  <Step title="ä¸»è¦æ™ºæ…§ä»£ç†ç”¢ç”Ÿ">
    ä¸»è¦æ™ºæ…§ä»£ç†å‘¼å« `sessions_spawn` ä¸¦é™„å¸¶ä»»å‹™æè¿°ã€‚æ­¤å‘¼å«æ˜¯**éé˜»å¡çš„** â€” ä¸»è¦æ™ºæ…§ä»£ç†æœƒç«‹å³æ”¶åˆ° `{ status: "accepted", runId, childSessionKey }`ã€‚
  </Step>
  <Step title="å­ä»£ç†åœ¨èƒŒæ™¯åŸ·è¡Œ">
    æ–°çš„ç¨ç«‹å·¥ä½œéšæ®µ (`agent:<agentId>:subagent:<uuid>`) æœƒåœ¨å°ˆç”¨çš„ `subagent` ä½‡åˆ—é€šé“ä¸Šå»ºç«‹ã€‚
  </Step>
  <Step title="çµæœå·²å…¬ä½ˆ">
    ç•¶å­ä»£ç†å®Œæˆæ™‚ï¼Œå®ƒæœƒå°‡å…¶ç™¼ç¾çµæœå›å ±çµ¦è«‹æ±‚èŠå¤©ã€‚ä¸»è¦æ™ºæ…§ä»£ç†æœƒç™¼å¸ƒä¸€å€‹è‡ªç„¶èªè¨€æ‘˜è¦ã€‚
  </Step>
  <Step title="å·¥ä½œéšæ®µå·²å°å­˜">
    å­ä»£ç†å·¥ä½œéšæ®µæœƒåœ¨ 60 åˆ†é˜å¾Œè‡ªå‹•å°å­˜ï¼ˆå¯è¨­å®šï¼‰ã€‚å°è©±è¨˜éŒ„æœƒä¿ç•™ã€‚
  </Steps>

<Tip>
æ¯å€‹å­ä»£ç†éƒ½æœ‰å…¶**è‡ªå·±**çš„ä¸Šä¸‹æ–‡å’Œ Token ç”¨é‡ã€‚ç‚ºå­ä»£ç†è¨­å®šä¸€å€‹æ›´ä¾¿å®œçš„æ¨¡å‹ä»¥ç¯€çœè²»ç”¨ â€” è«‹åƒé–±ä¸‹é¢çš„ [è¨­å®šé è¨­æ¨¡å‹](#setting-a-default-model)ã€‚
</Tip>

## è¨­å®š

å­ä»£ç†ç„¡éœ€è¨­å®šå³å¯ç«‹å³ä½¿ç”¨ã€‚é è¨­å€¼ï¼š

- æ¨¡å‹ï¼šç›®æ¨™æ™ºæ…§ä»£ç†çš„æ­£å¸¸æ¨¡å‹é¸æ“‡ï¼ˆé™¤é `subagents.model` å·²è¨­å®šï¼‰
- æ€è€ƒï¼šç„¡å­ä»£ç†è¦†è“‹ï¼ˆé™¤é `subagents.thinking` å·²è¨­å®šï¼‰
- æœ€å¤§ä¸¦ç™¼æ•¸ï¼š8
- è‡ªå‹•å°å­˜ï¼š60 åˆ†é˜å¾Œ

### è¨­å®šé è¨­æ¨¡å‹

ç‚ºå­ä»£ç†ä½¿ç”¨æ›´ä¾¿å®œçš„æ¨¡å‹ä»¥ç¯€çœ Token è²»ç”¨ï¼š

```json5
{
  agents: {
    defaults: {
      subagents: {
        model: "minimax/MiniMax-M2.1",
      },
    },
  },
}
```

### è¨­å®šé è¨­æ€è€ƒå±¤ç´š

```json5
{
  agents: {
    defaults: {
      subagents: {
        thinking: "low",
      },
    },
  },
}
```

### æ¯å€‹æ™ºæ…§ä»£ç†è¦†è“‹

åœ¨å¤šæ™ºæ…§ä»£ç†è¨­å®šä¸­ï¼Œæ‚¨å¯ä»¥ç‚ºæ¯å€‹æ™ºæ…§ä»£ç†è¨­å®šå­ä»£ç†é è¨­å€¼ï¼š

```json5
{
  agents: {
    list: [
      {
        id: "researcher",
        subagents: {
          model: "anthropic/claude-sonnet-4",
        },
      },
      {
        id: "assistant",
        subagents: {
          model: "minimax/MiniMax-M2.1",
        },
      },
    ],
  },
}
```

### ä¸¦ç™¼æ€§

æ§åˆ¶å¯ä»¥åŒæ™‚åŸ·è¡Œçš„å­ä»£ç†æ•¸é‡ï¼š

```json5
{
  agents: {
    defaults: {
      subagents: {
        maxConcurrent: 4, // default: 8
      },
    },
  },
}
```

å­ä»£ç†ä½¿ç”¨å°ˆç”¨çš„ä½‡åˆ—é€šé“ (`subagent`)ï¼Œè©²é€šé“èˆ‡ä¸»è¦æ™ºæ…§ä»£ç†ä½‡åˆ—åˆ†é–‹ï¼Œå› æ­¤å­ä»£ç†åŸ·è¡Œä¸æœƒé˜»æ“‹å…¥ç«™å›è¦†ã€‚

### è‡ªå‹•å°å­˜

å­ä»£ç†å·¥ä½œéšæ®µæœƒåœ¨å¯è¨­å®šçš„æ™‚é–“å¾Œè‡ªå‹•å°å­˜ï¼š

```json5
{
  agents: {
    defaults: {
      subagents: {
        archiveAfterMinutes: 120, // default: 60
      },
    },
  },
}
```

<Note>
å°å­˜æœƒå°‡å°è©±è¨˜éŒ„é‡æ–°å‘½åç‚º `*.deleted.<timestamp>`ï¼ˆç›¸åŒè³‡æ–™å¤¾ï¼‰â€” å°è©±è¨˜éŒ„æœƒä¿ç•™ï¼Œä¸æœƒåˆªé™¤ã€‚è‡ªå‹•å°å­˜è¨ˆæ™‚å™¨æ˜¯ç›¡åŠ›è€Œç‚ºçš„ï¼›å¦‚æœ Gateway é‡æ–°å•Ÿå‹•ï¼Œå¾…è™•ç†çš„è¨ˆæ™‚å™¨å°‡æœƒéºå¤±ã€‚
</Note>

## `sessions_spawn` å·¥å…·

é€™æ˜¯æ™ºæ…§ä»£ç†å‘¼å«ä»¥å»ºç«‹å­ä»£ç†çš„å·¥å…·ã€‚

### åƒæ•¸

| åƒæ•¸                | é¡å‹                   | é è¨­å€¼            | æè¿°                                                    |
| ------------------- | ---------------------- | ------------------ | -------------------------------------------------------------- |
| `task`              | string                 | _(å¿…å¡«)_       | å­ä»£ç†æ‡‰è©²åšä»€éº¼                                   |
| `label`             | string                 | â€”                  | ç”¨æ–¼è­˜åˆ¥çš„ç°¡çŸ­æ¨™ç±¤                                 |
| `agentId`           | string                 | _(å‘¼å«è€…çš„æ™ºæ…§ä»£ç†)_ | åœ¨ä¸åŒçš„æ™ºæ…§ä»£ç† ID ä¸‹ç”¢ç”Ÿï¼ˆå¿…é ˆè¢«å…è¨±ï¼‰             |
| `model`             | string                 | _(é¸å¡«)_       | è¦†è“‹æ­¤å­ä»£ç†çš„æ¨¡å‹                          |
| `thinking`          | string                 | _(é¸å¡«)_       | è¦†è“‹æ€è€ƒå±¤ç´š (`off`ã€`low`ã€`medium`ã€`high` ç­‰) |
| `runTimeoutSeconds` | number                 | `0` (ç„¡é™åˆ¶)     | åœ¨ N ç§’å¾Œçµ‚æ­¢å­ä»£ç†                            |
| `cleanup`           | `"delete"` \| `"keep"` | `"keep"`           | å…¬ä½ˆå¾Œç«‹å³å°å­˜ `"delete"`                 |

### æ¨¡å‹è§£æé †åº

å­ä»£ç†æ¨¡å‹æŒ‰æ­¤é †åºè§£æï¼ˆç¬¬ä¸€å€‹åŒ¹é…å‹å‡ºï¼‰ï¼š

1. `sessions_spawn` å‘¼å«ä¸­æ˜ç¢ºçš„ `model` åƒæ•¸
2. æ¯å€‹æ™ºæ…§ä»£ç†çš„è¨­å®šï¼š`agents.list[].subagents.model`
3. å…¨åŸŸé è¨­å€¼ï¼š`agents.defaults.subagents.model`
4. ç›®æ¨™æ™ºæ…§ä»£ç†è©²æ–°å·¥ä½œéšæ®µçš„æ­£å¸¸æ¨¡å‹è§£æ

æ€è€ƒå±¤ç´šæŒ‰æ­¤é †åºè§£æï¼š

1. `sessions_spawn` å‘¼å«ä¸­æ˜ç¢ºçš„ `thinking` åƒæ•¸
2. æ¯å€‹æ™ºæ…§ä»£ç†çš„è¨­å®šï¼š`agents.list[].subagents.thinking`
3. å…¨åŸŸé è¨­å€¼ï¼š`agents.defaults.subagents.thinking`
4. å¦å‰‡ä¸æ‡‰ç”¨å­ä»£ç†ç‰¹å®šçš„æ€è€ƒè¦†è“‹

<Note>
ç„¡æ•ˆçš„æ¨¡å‹å€¼æœƒè¢«éœé»˜è·³é â€” å­ä»£ç†æœƒåœ¨ä¸‹ä¸€å€‹æœ‰æ•ˆé è¨­å€¼ä¸ŠåŸ·è¡Œï¼Œä¸¦åœ¨å·¥å…·çµæœä¸­ç™¼å‡ºè­¦å‘Šã€‚
</Note>

### è·¨æ™ºæ…§ä»£ç†ç”¢ç”Ÿ

é è¨­æƒ…æ³ä¸‹ï¼Œå­ä»£ç†åªèƒ½åœ¨å…¶è‡ªå·±çš„æ™ºæ…§ä»£ç† ID ä¸‹ç”¢ç”Ÿã€‚è‹¥è¦å…è¨±æ™ºæ…§ä»£ç†åœ¨å…¶ä»–æ™ºæ…§ä»£ç† ID ä¸‹ç”¢ç”Ÿå­ä»£ç†ï¼š

```json5
{
  agents: {
    list: [
      {
        id: "orchestrator",
        subagents: {
          allowAgents: ["researcher", "coder"], // or ["*"] to allow any
        },
      },
    ],
  },
}
```

<Tip>
ä½¿ç”¨ `agents_list` å·¥å…·ä¾†ç™¼ç¾ç›®å‰å…è¨± `sessions_spawn` çš„æ™ºæ…§ä»£ç† IDã€‚
</Tip>

## ç®¡ç†å­ä»£ç† (`/subagents`)

ä½¿ç”¨ `/subagents` æ–œç·šæŒ‡ä»¤ä¾†æª¢æŸ¥å’Œæ§åˆ¶ç•¶å‰å·¥ä½œéšæ®µçš„å­ä»£ç†åŸ·è¡Œï¼š

| æŒ‡ä»¤                                       | æè¿°                                    |
| ------------------------------------------ | ---------------------------------------------- |
| `/subagents list`                          | åˆ—å‡ºæ‰€æœ‰å­ä»£ç†åŸ·è¡Œï¼ˆæ´»å‹•ä¸­å’Œå·²å®Œæˆï¼‰ |
| `/subagents stop <id|#|all>`               | åœæ­¢æ­£åœ¨åŸ·è¡Œçš„å­ä»£ç†                       |
| `/subagents log <id|#> [limit] [tools]`    | æŸ¥çœ‹å­ä»£ç†å°è©±è¨˜éŒ„                      |
| `/subagents info <id|#>`                   | é¡¯ç¤ºè©³ç´°åŸ·è¡Œä¸­ç¹¼è³‡æ–™                     |
| `/subagents send <id|#> <message>`         | å‘æ­£åœ¨åŸ·è¡Œçš„å­ä»£ç†ç™¼é€è¨Šæ¯          |

æ‚¨å¯ä»¥é€éæ¸…å–®ç´¢å¼• (`1`ã€`2`)ã€åŸ·è¡Œ ID å‰ç¶´ã€å®Œæ•´å·¥ä½œéšæ®µé‡‘é‘°æˆ– `last` å¼•ç”¨å­ä»£ç†ã€‚

<AccordionGroup>
  <Accordion title="ç¯„ä¾‹ï¼šåˆ—å‡ºä¸¦åœæ­¢å­ä»£ç†">
    ```
    /subagents list
    ```

    ```
    ğŸ§­ Subagents (current session)
    Active: 1 Â· Done: 2
    1) âœ… Â· research logs Â· 2m31s Â· run a1b2c3d4 Â· agent:main:subagent:...
    2) âœ… Â· check deps Â· 45s Â· run e5f6g7h8 Â· agent:main:subagent:...
    3) ğŸ”„ Â· deploy staging Â· 1m12s Â· run i9j0k1l2 Â· agent:main:subagent:...
    ```

    ```
    /subagents stop 3
    ```

    ```
    âš™ï¸ å·²è«‹æ±‚åœæ­¢ deploy stagingã€‚
    ```

  </Accordion>
  <Accordion title="ç¯„ä¾‹ï¼šæª¢æŸ¥å­ä»£ç†">
    ```
    /subagents info 1
    ```

    ```
    â„¹ï¸ å­ä»£ç†è³‡è¨Š
    Status: âœ…
    Label: research logs
    Task: Research the latest server error logs and summarize findings
    Run: a1b2c3d4-...
    Session: agent:main:subagent:...
    Runtime: 2m31s
    Cleanup: keep
    Outcome: ok
    ```

  </Accordion>
  <Accordion title="ç¯„ä¾‹ï¼šæŸ¥çœ‹å­ä»£ç†æ—¥èªŒ">
    ```
    /subagents log 1 10
    ```

    é¡¯ç¤ºå­ä»£ç†å°è©±è¨˜éŒ„çš„æœ€å¾Œ 10 å‰‡è¨Šæ¯ã€‚æ–°å¢ `tools` ä»¥åŒ…å«å·¥å…·å‘¼å«è¨Šæ¯ï¼š

    ```
    /subagents log 1 10 tools
    ```

  </Accordion>
  <Accordion title="ç¯„ä¾‹ï¼šç™¼é€å¾ŒçºŒè¨Šæ¯">
    ```
    /subagents send 3 "Also check the staging environment"
    ```

    å°‡è¨Šæ¯ç™¼é€åˆ°æ­£åœ¨åŸ·è¡Œçš„å­ä»£ç†å·¥ä½œéšæ®µï¼Œä¸¦ç­‰å¾…æœ€å¤š 30 ç§’ä»¥ç²å¾—å›è¦†ã€‚

  </Accordion>
</AccordionGroup>

## å…¬ä½ˆ (çµæœå¦‚ä½•å›å ±)

ç•¶å­ä»£ç†å®Œæˆæ™‚ï¼Œå®ƒæœƒç¶“éä¸€å€‹**å…¬ä½ˆ**æ­¥é©Ÿï¼š

1. æ“·å–å­ä»£ç†çš„æœ€çµ‚å›è¦†
2. å‘ä¸»è¦æ™ºæ…§ä»£ç†çš„å·¥ä½œéšæ®µç™¼é€ä¸€å‰‡åŒ…å«çµæœã€ç‹€æ…‹å’Œçµ±è¨ˆè³‡æ–™çš„æ‘˜è¦è¨Šæ¯
3. ä¸»è¦æ™ºæ…§ä»£ç†å‘æ‚¨çš„èŠå¤©ç™¼å¸ƒè‡ªç„¶èªè¨€æ‘˜è¦

å…¬ä½ˆå›è¦†æœƒåœ¨å¯ç”¨æ™‚ä¿ç•™ç·šç¨‹/ä¸»é¡Œè·¯ç”±ï¼ˆSlack ç·šç¨‹ã€Telegram ä¸»é¡Œã€Matrix ç·šç¨‹ï¼‰ã€‚

### å…¬ä½ˆçµ±è¨ˆè³‡æ–™

æ¯æ¬¡å…¬ä½ˆéƒ½åŒ…å«ä¸€å€‹å¸¶æœ‰ä»¥ä¸‹å…§å®¹çš„çµ±è¨ˆè¡Œï¼š

- åŸ·è¡Œæ™‚é–“
- Token ç”¨é‡ï¼ˆè¼¸å…¥/è¼¸å‡º/ç¸½è¨ˆï¼‰
- é ä¼°è²»ç”¨ï¼ˆç•¶é€é `models.providers.*.models[].cost` è¨­å®šæ¨¡å‹å®šåƒ¹æ™‚ï¼‰
- å·¥ä½œéšæ®µé‡‘é‘°ã€å·¥ä½œéšæ®µ ID å’Œå°è©±è¨˜éŒ„è·¯å¾‘

### å…¬ä½ˆç‹€æ…‹

å…¬ä½ˆè¨Šæ¯åŒ…å«ä¸€å€‹å¾åŸ·è¡Œçµæœï¼ˆè€Œéæ¨¡å‹è¼¸å‡ºï¼‰æ´¾ç”Ÿçš„ç‹€æ…‹ï¼š

- **æˆåŠŸå®Œæˆ** (`ok`) â€” ä»»å‹™æ­£å¸¸å®Œæˆ
- **éŒ¯èª¤** â€” ä»»å‹™å¤±æ•—ï¼ˆéŒ¯èª¤è©³ç´°è³‡æ–™åœ¨å‚™è¨»ä¸­ï¼‰
- **é€¾æ™‚** â€” ä»»å‹™è¶…å‡º `runTimeoutSeconds`
- **æœªçŸ¥** â€” ç„¡æ³•ç¢ºå®šç‹€æ…‹

<Tip>
å¦‚æœä¸éœ€è¦é¢å‘ä½¿ç”¨è€…çš„å…¬ä½ˆï¼Œä¸»è¦æ™ºæ…§ä»£ç†çš„æ‘˜è¦æ­¥é©Ÿå¯ä»¥è¿”å› `NO_REPLY`ï¼Œä¸¦ä¸”ä¸æœƒç™¼å¸ƒä»»ä½•å…§å®¹ã€‚
é€™èˆ‡ `ANNOUNCE_SKIP` ä¸åŒï¼Œå¾Œè€…ç”¨æ–¼æ™ºæ…§ä»£ç†åˆ°æ™ºæ…§ä»£ç†çš„å…¬ä½ˆæµç¨‹ (`sessions_send`)ã€‚
</Tip>

## å·¥å…·ç­–ç•¥

é è¨­æƒ…æ³ä¸‹ï¼Œå­ä»£ç†æœƒç²å¾—**æ‰€æœ‰å·¥å…·ï¼Œé™¤äº†**ä¸€çµ„è¢«æ‹’çµ•çš„å·¥å…·ï¼Œé€™äº›å·¥å…·å°æ–¼èƒŒæ™¯ä»»å‹™è€Œè¨€æ˜¯ä¸å®‰å…¨æˆ–ä¸å¿…è¦çš„ï¼š

<AccordionGroup>
  <Accordion title="é è¨­æ‹’çµ•çš„å·¥å…·">
    | è¢«æ‹’çµ•çš„å·¥å…· | åŸå›  |
    |-------------|--------|
    | `sessions_list` | å·¥ä½œéšæ®µç®¡ç† â€” ç”±ä¸»è¦æ™ºæ…§ä»£ç†å”èª¿ |
    | `sessions_history` | å·¥ä½œéšæ®µç®¡ç† â€” ç”±ä¸»è¦æ™ºæ…§ä»£ç†å”èª¿ |
    | `sessions_send` | å·¥ä½œéšæ®µç®¡ç† â€” ç”±ä¸»è¦æ™ºæ…§ä»£ç†å”èª¿ |
    | `sessions_spawn` | ç„¡å·¢ç‹€æ“´å±•ï¼ˆå­ä»£ç†ç„¡æ³•ç”¢ç”Ÿå­ä»£ç†ï¼‰ |
    | `gateway` | ç³»çµ±ç®¡ç† â€” å¾å­ä»£ç†åŸ·è¡Œå±éšª |
    | `agents_list` | ç³»çµ±ç®¡ç† |
    | `whatsapp_login` | äº’å‹•å¼è¨­å®š â€” éä»»å‹™ |
    | `session_status` | ç‹€æ…‹/æ’ç¨‹ â€” ç”±ä¸»è¦æ™ºæ…§ä»£ç†å”èª¿ |
    | `cron` | ç‹€æ…‹/æ’ç¨‹ â€” ç”±ä¸»è¦æ™ºæ…§ä»£ç†å”èª¿ |
    | `memory_search` | åœ¨ç”¢ç”Ÿæç¤ºä¸­å‚³éç›¸é—œè³‡è¨Šå³å¯ |
    | `memory_get` | åœ¨ç”¢ç”Ÿæç¤ºä¸­å‚³éç›¸é—œè³‡è¨Šå³å¯ |
  </Accordion>
</AccordionGroup>

### è‡ªè¨‚å­ä»£ç†å·¥å…·

æ‚¨å¯ä»¥é€²ä¸€æ­¥é™åˆ¶å­ä»£ç†å·¥å…·ï¼š

```json5
{
  tools: {
    subagents: {
      tools: {
        // deny ç¸½æ˜¯å„ªå…ˆæ–¼ allow
        deny: ["browser", "firecrawl"],
      },
    },
  },
}
```

è‹¥è¦å°‡å­ä»£ç†é™åˆ¶ç‚º**åƒ…é™**ç‰¹å®šå·¥å…·ï¼š

```json5
{
  tools: {
    subagents: {
      tools: {
        allow: ["read", "exec", "process", "write", "edit", "apply_patch"],
        // å¦‚æœè¨­å®šäº† denyï¼Œä»ç„¶æœƒå„ªå…ˆ
      },
    },
  },
}
```

<Note>
è‡ªè¨‚æ‹’çµ•é …ç›®æœƒ**æ–°å¢åˆ°**é è¨­æ‹’çµ•æ¸…å–®ä¸­ã€‚å¦‚æœè¨­å®šäº† `allow`ï¼Œå‰‡åªæœ‰é€™äº›å·¥å…·å¯ç”¨ï¼ˆé è¨­æ‹’çµ•æ¸…å–®ä»ç„¶é©ç”¨ï¼‰ã€‚
</Note>

## èº«ä»½é©—è­‰

å­ä»£ç†èº«ä»½é©—è­‰æ˜¯é€é**æ™ºæ…§ä»£ç† ID** è§£æï¼Œè€Œä¸æ˜¯é€éå·¥ä½œéšæ®µé¡å‹ï¼š

- èº«ä»½é©—è­‰å„²å­˜æœƒå¾ç›®æ¨™æ™ºæ…§ä»£ç†çš„ `agentDir` è¼‰å…¥
- ä¸»è¦æ™ºæ…§ä»£ç†çš„èº«ä»½é©—è­‰è¨­å®šæª”æœƒåˆä½µä½œç‚º**å‚™ç”¨**ï¼ˆæ™ºæ…§ä»£ç†è¨­å®šæª”åœ¨è¡çªæ™‚å‹å‡ºï¼‰
- åˆä½µæ˜¯ç´¯åŠ çš„ â€” ä¸»è¦è¨­å®šæª”å§‹çµ‚å¯ç”¨ä½œå‚™ç”¨

<Note>
ç›®å‰ä¸æ”¯æ´æ¯å€‹å­ä»£ç†å®Œå…¨éš”é›¢çš„èº«ä»½é©—è­‰ã€‚
</Note>

## ä¸Šä¸‹æ–‡å’Œç³»çµ±æç¤º

èˆ‡ä¸»è¦æ™ºæ…§ä»£ç†ç›¸æ¯”ï¼Œå­ä»£ç†æœƒæ”¶åˆ°ç²¾ç°¡çš„ç³»çµ±æç¤ºï¼š

- **åŒ…å«ï¼š** å·¥å…·ã€å·¥ä½œå€ã€åŸ·è¡Œæ™‚å€æ®µï¼Œä»¥åŠ `AGENTS.md` å’Œ `TOOLS.md`
- **ä¸åŒ…å«ï¼š** `SOUL.md`ã€`IDENTITY.md`ã€`USER.md`ã€`HEARTBEAT.md`ã€`BOOTSTRAP.md`

å­ä»£ç†é‚„æœƒæ”¶åˆ°ä¸€å€‹ä»¥ä»»å‹™ç‚ºä¸­å¿ƒçš„ç³»çµ±æç¤ºï¼ŒæŒ‡ç¤ºå…¶å°ˆæ³¨æ–¼æŒ‡å®šçš„ä»»å‹™ï¼Œå®Œæˆä»»å‹™ï¼Œè€Œä¸æ˜¯å……ç•¶ä¸»è¦æ™ºæ…§ä»£ç†ã€‚

## åœæ­¢å­ä»£ç†

| æ–¹æ³•                 | æ•ˆæœ                                                                    |
| ---------------------- | ------------------------------------------------------------------------- |
| èŠå¤©ä¸­çš„ `/stop`    | çµ‚æ­¢ä¸»è¦å·¥ä½œéšæ®µ**å’Œ**å¾å…¶ç”¢ç”Ÿæ‰€æœ‰æ´»å‹•ä¸­çš„å­ä»£ç†åŸ·è¡Œ |
| `/subagents stop <id>` | åœæ­¢ç‰¹å®šçš„å­ä»£ç†ï¼Œè€Œä¸å½±éŸ¿ä¸»è¦å·¥ä½œéšæ®µ             |
| `runTimeoutSeconds`    | åœ¨æŒ‡å®šæ™‚é–“å¾Œè‡ªå‹•çµ‚æ­¢å­ä»£ç†åŸ·è¡Œ           |

<Note>
`runTimeoutSeconds` ä¸æœƒè‡ªå‹•å°å­˜å·¥ä½œéšæ®µã€‚å·¥ä½œéšæ®µæœƒä¿ç•™ï¼Œç›´åˆ°æ­£å¸¸çš„å°å­˜è¨ˆæ™‚å™¨è§¸ç™¼ã€‚
</Note>

## å®Œæ•´è¨­å®šç¯„ä¾‹

<Accordion title="å®Œæ•´çš„å­ä»£ç†è¨­å®š">
```json5
{
  agents: {
    defaults: {
      model: { primary: "anthropic/claude-sonnet-4" },
      subagents: {
        model: "minimax/MiniMax-M2.1",
        thinking: "low",
        maxConcurrent: 4,
        archiveAfterMinutes: 30,
      },
    },
    list: [
      {
        id: "main",
        default: true,
        name: "Personal Assistant",
      },
      {
        id: "ops",
        name: "Ops Agent",
        subagents: {
          model: "anthropic/claude-sonnet-4",
          allowAgents: ["main"], // ops å¯ä»¥ç”¢ç”Ÿ "main" ä¸‹çš„å­ä»£ç†
        },
      },
    ],
  },
  tools: {
    subagents: {
      tools: {
        deny: ["browser"], // å­ä»£ç†ä¸èƒ½ä½¿ç”¨ç€è¦½å™¨
      },
    },
  },
}
```
</Accordion>

## é™åˆ¶

<Warning>
- **ç›¡åŠ›è€Œç‚ºçš„å…¬ä½ˆï¼š** å¦‚æœ Gateway é‡æ–°å•Ÿå‹•ï¼Œå¾…è™•ç†çš„å…¬ä½ˆå·¥ä½œå°‡æœƒéºå¤±ã€‚
- **ç„¡å·¢ç‹€ç”¢ç”Ÿï¼š** å­ä»£ç†ç„¡æ³•ç”¢ç”Ÿè‡ªå·±çš„å­ä»£ç†ã€‚
- **å…±äº«è³‡æºï¼š** å­ä»£ç†å…±äº« Gateway è™•ç†ç¨‹åºï¼›ä½¿ç”¨ `maxConcurrent` ä½œç‚ºå®‰å…¨é–¥ã€‚
- **è‡ªå‹•å°å­˜æ˜¯ç›¡åŠ›è€Œç‚ºçš„ï¼š** Gateway é‡æ–°å•Ÿå‹•æ™‚ï¼Œå¾…è™•ç†çš„å°å­˜è¨ˆæ™‚å™¨å°‡æœƒéºå¤±ã€‚
</Warning>

## åƒé–±

- [å·¥ä½œéšæ®µå·¥å…·](/concepts/session-tool) â€” é—œæ–¼ `sessions_spawn` å’Œå…¶ä»–å·¥ä½œéšæ®µå·¥å…·çš„è©³ç´°è³‡è¨Š
- [å¤šæ™ºæ…§ä»£ç†æ²™ç®±å’Œå·¥å…·](/tools/multi-agent-sandbox-tools) â€” æ¯å€‹æ™ºæ…§ä»£ç†çš„å·¥å…·é™åˆ¶å’Œæ²™ç®±éš”é›¢
- [è¨­å®š](/gateway/configuration) â€” `agents.defaults.subagents` åƒè€ƒ
- [ä½‡åˆ—](/concepts/queue) â€” `subagent` é€šé“å¦‚ä½•é‹ä½œ
```
