---
summary: "р╕Хр╕гр╕гр╕Бр╕░р╕кр╕Цр╕▓р╕Щр╕░р╣Бр╕Цр╕Ър╣Ар╕бр╕Щр╕╣р╣Бр╕ер╕░р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Бр╕кр╕Фр╕Зр╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕лр╣Зр╕Щ"
read_when:
  - р╕Ыр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕З UI р╣Бр╕Цр╕Ър╣Ар╕бр╕Щр╕╣р╕Вр╕нр╕З mac р╕лр╕гр╕╖р╕нр╕Ыр╕гр╕▒р╕Ър╕Хр╕гр╕гр╕Бр╕░р╕кр╕Цр╕▓р╕Щр╕░
title: "р╣Бр╕Цр╕Ър╣Ар╕бр╕Щр╕╣"
---

# р╕Хр╕гр╕гр╕Бр╕░р╕кр╕Цр╕▓р╕Щр╕░р╣Бр╕Цр╕Ър╣Ар╕бр╕Щр╕╣

## р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Бр╕кр╕Фр╕З

- р╣Ар╕гр╕▓р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щр╕Вр╕нр╕Зр╣Ар╕нр╣Ар╕Ир╕Щр╕Хр╣Мр╣Гр╕Щр╣Др╕нр╕Др╕нр╕Щр╣Бр╕Цр╕Ър╣Ар╕бр╕Щр╕╣р╣Бр╕ер╕░р╣Гр╕Щр╣Бр╕Цр╕зр╕кр╕Цр╕▓р╕Щр╕░р╣Бр╕гр╕Бр╕Вр╕нр╕Зр╣Ар╕бр╕Щр╕╣
- р╕кр╕Цр╕▓р╕Щр╕░р╕кр╕╕р╕Вр╕ар╕▓р╕Юр╕Ир╕░р╕Цр╕╣р╕Бр╕Лр╣Ир╕нр╕Щр╣Др╕зр╣Йр╕Вр╕Ур╕░р╕бр╕╡р╕Зр╕▓р╕Щр╕Чр╕│р╕нр╕вр╕╣р╣И; р╕Ир╕░р╕Бр╕ер╕▒р╕Ър╕бр╕▓р╣Ар╕бр╕╖р╣Ир╕нр╕Чр╕╕р╕Бр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕зр╣Ир╕▓р╕З
- р╕Ър╕ер╣Зр╕нр╕Б тАЬNodesтАЭ р╣Гр╕Щр╣Ар╕бр╕Щр╕╣р╕Ир╕░р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░ **р╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣М** р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ (р╣Вр╕лр╕Щр╕Фр╕Чр╕╡р╣Ир╕Ир╕▒р╕Ър╕Др╕╣р╣Ир╕Ьр╣Ир╕▓р╕Щ `node.list`) р╣Др╕бр╣Ир╕гр╕зр╕бр╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Др╕Др╕ер╣Ар╕нр╕Щр╕Хр╣М/р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Хр╕Щ
- р╕кр╣Ир╕зр╕Щ тАЬUsageтАЭ р╕Ир╕░р╕Ыр╕гр╕▓р╕Бр╕Пр╣Гр╕Хр╣Й Context р╣Ар╕бр╕╖р╣Ир╕нр╕бр╕╡р╕кр╣Бр╕Щр╣Зр╕Ыр╕Кр╣Зр╕нр╕Хр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕лр╣Йр╕Ър╕гр╕┤р╕Бр╕▓р╕г

## р╣Вр╕бр╣Ар╕Фр╕ер╕кр╕Цр╕▓р╕Щр╕░

- р╣Ар╕Лр╕кр╕Кр╕▒р╕Щ: р╕нр╕╡р╣Ар╕зр╕Щр╕Хр╣Мр╕бр╕▓р╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Ъ `runId` (р╕Хр╣Ир╕нр╕Бр╕▓р╕гр╕гр╕▒р╕Щ) р╣Бр╕ер╕░ `sessionKey` р╣Гр╕Щр╣Ар╕Юр╕вр╣Мр╣Вр╕лр╕ер╕Ф р╣Ар╕Лр╕кр╕Кр╕▒р╕Щ тАЬр╕лр╕ер╕▒р╕БтАЭ р╕Др╕╖р╕нр╕Др╕╡р╕вр╣М `main`; р╕лр╕▓р╕Бр╣Др╕бр╣Ир╕бр╕╡ р╕Ир╕░р╣Гр╕Кр╣Йр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕Чр╕╡р╣Ир╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕ер╣Ир╕▓р╕кр╕╕р╕Фр╣Бр╕Чр╕Щ 19. р╣Ар╕Лр╕кр╕Кр╕▒р╕Щ тАЬmainтАЭ р╕Др╕╖р╕нр╕Др╕╡р╕вр╣М `main`; р╕лр╕▓р╕Бр╣Др╕бр╣Ир╕бр╕╡ р╣Ар╕гр╕▓р╕Ир╕░р╕вр╣Йр╕нр╕Щр╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╣Гр╕Кр╣Йр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕Чр╕╡р╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕ер╣Ир╕▓р╕кр╕╕р╕Ф
- 20. р╕ер╕│р╕Фр╕▒р╕Ър╕Др╕зр╕▓р╕бр╕кр╕│р╕Др╕▒р╕Н: main р╕Кр╕Щр╕░р╣Ар╕кр╕бр╕н 21. р╕лр╕▓р╕Б main р╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И р╕кр╕Цр╕▓р╕Щр╕░р╕Вр╕нр╕Зр╕бр╕▒р╕Щр╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Чр╕▒р╕Щр╕Чр╕╡ р╕ер╕│р╕Фр╕▒р╕Ър╕Др╕зр╕▓р╕бр╕кр╕│р╕Др╕▒р╕Н: р╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Бр╕Кр╕Щр╕░р╣Ар╕кр╕бр╕н р╕лр╕▓р╕Бр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Бр╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕│р╕Зр╕▓р╕Щ р╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╕Чр╕▒р╕Щр╕Чр╕╡ р╕лр╕▓р╕Бр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Бр╕зр╣Ир╕▓р╕З р╕Ир╕░р╣Бр╕кр╕Фр╕Зр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕Чр╕╡р╣Ир╣Др╕бр╣Ир╣Гр╕Кр╣Ир╕лр╕ер╕▒р╕Бр╕Лр╕╢р╣Ир╕Зр╕Чр╕│р╕Зр╕▓р╕Щр╕ер╣Ир╕▓р╕кр╕╕р╕Ф р╣Ар╕гр╕▓р╕Ир╕░р╣Др╕бр╣Ир╕кр╕ер╕▒р╕Ър╣Др╕Ыр╕бр╕▓р╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б; р╕Ир╕░р╕кр╕ер╕▒р╕Ър╣Ар╕Йр╕Юр╕▓р╕░р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щр╕зр╣Ир╕▓р╕Зр╕лр╕гр╕╖р╕нр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Бр╣Ар╕гр╕┤р╣Ир╕бр╕Чр╕│р╕Зр╕▓р╕Щ 22. р╣Ар╕гр╕▓р╕Ир╕░р╣Др╕бр╣Ир╕кр╕ер╕▒р╕Ър╣Др╕Ыр╕бр╕▓р╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б; р╣Ар╕гр╕▓р╕Ир╕░р╕кр╕ер╕▒р╕Ър╣Ар╕Йр╕Юр╕▓р╕░р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щр╕зр╣Ир╕▓р╕Зр╕лр╕гр╕╖р╕н main р╣Ар╕гр╕┤р╣Ир╕бр╕Чр╕│р╕Зр╕▓р╕Щ
- р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б:
  - `job`: р╕Бр╕▓р╕гр╕гр╕▒р╕Щр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕гр╕░р╕Фр╕▒р╕Ър╕кр╕╣р╕З (`state: started|streaming|done|error`).
  - `tool`: `phase: start|result` р╕Юр╕гр╣Йр╕нр╕б `toolName` р╣Бр╕ер╕░ `meta/args`.

## Enum IconState (Swift)

- `idle`
- `workingMain(ActivityKind)`
- `workingOther(ActivityKind)`
- `overridden(ActivityKind)` (р╕Фр╕╡р╕Ър╕▒р╕Б override)

### ActivityKind тЖТ р╣Др╕нр╕Др╕нр╕Щ

- `exec` тЖТ ЁЯТ╗
- `read` тЖТ ЁЯУД
- `write` тЖТ тЬНя╕П
- `edit` тЖТ ЁЯУЭ
- `attach` тЖТ ЁЯУО
- р╕Др╣Ир╕▓р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ тЖТ ЁЯЫая╕П

### 23. р╕Бр╕▓р╕гр╣Бр╕бр╕Ыр╣Ар╕Кр╕┤р╕Зр╕ар╕▓р╕Ю

- `idle`: р╕Хр╕▒р╕з critter р╕Ыр╕Бр╕Хр╕┤
- `workingMain`: р╕Ыр╣Йр╕▓р╕вр╕Юр╕гр╣Йр╕нр╕бр╣Др╕нр╕Др╕нр╕Щ р╕кр╕╡р╣Ар╕Хр╣Зр╕б р╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щр╕Вр╕▓ тАЬр╕Чр╕│р╕Зр╕▓р╕ЩтАЭ
- `workingOther`: р╕Ыр╣Йр╕▓р╕вр╕Юр╕гр╣Йр╕нр╕бр╣Др╕нр╕Др╕нр╕Щ р╕кр╕╡р╕лр╕бр╣Ир╕Щ р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕зр╕┤р╣Ир╕Зр╕зр╕╕р╣Ир╕Щ
- `overridden`: р╣Гр╕Кр╣Йр╣Др╕нр╕Др╕нр╕Щ/р╕кр╕╡р╕Чр╕╡р╣Ир╣Ар╕ер╕╖р╕нр╕Бр╣Др╕зр╣Йр╣Вр╕Фр╕вр╣Др╕бр╣Ир╕Др╕│р╕Щр╕╢р╕Зр╕Цр╕╢р╕Зр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б

## р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕Цр╕зр╕кр╕Цр╕▓р╕Щр╕░ (р╣Ар╕бр╕Щр╕╣)

- р╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Чр╕╡р╣Ир╕бр╕╡р╕Зр╕▓р╕Щр╕Чр╕│: `<Session role> ┬╖ <activity label>`
  - р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: `Main ┬╖ exec: pnpm test`, `Other ┬╖ read: apps/macos/Sources/OpenClaw/AppState.swift`.
- р╣Ар╕бр╕╖р╣Ир╕нр╕зр╣Ир╕▓р╕З: р╕Ир╕░р╕вр╣Йр╕нр╕Щр╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╣Гр╕Кр╣Йр╕кр╕гр╕╕р╕Ыр╕кр╕Цр╕▓р╕Щр╕░р╕кр╕╕р╕Вр╕ар╕▓р╕Ю

## р╕Бр╕▓р╕гр╕гр╕▒р╕Ър╕нр╕╡р╣Ар╕зр╕Щр╕Хр╣М

- р╣Бр╕лр╕ер╣Ир╕Зр╕Чр╕╡р╣Ир╕бр╕▓: р╕нр╕╡р╣Ар╕зр╕Щр╕Хр╣Мр╕Ир╕▓р╕Б controlтАСchannel `agent` (`ControlChannel.handleAgentEvent`).
- р╕Яр╕┤р╕ер╕Фр╣Мр╕Чр╕╡р╣Ир╣Бр╕вр╕Бр╣Др╕Фр╣Й:
  - `stream: "job"` р╕Юр╕гр╣Йр╕нр╕б `data.state` р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Ар╕гр╕┤р╣Ир╕б/р╕лр╕вр╕╕р╕Ф
  - `stream: "tool"` р╕Юр╕гр╣Йр╕нр╕б `data.phase`, `name`, р╣Бр╕ер╕░р╕Хр╕▒р╕зр╣Ар╕ер╕╖р╕нр╕Б `meta`/`args`.
- р╕Ыр╣Йр╕▓р╕вр╕Бр╕│р╕Бр╕▒р╕Ъ:
  - `exec`: р╕Ър╕гр╕гр╕Чр╕▒р╕Фр╣Бр╕гр╕Бр╕Вр╕нр╕З `args.command`.
  - `read`/`write`: р╕Юр╕▓р╕Шр╕Чр╕╡р╣Ир╕вр╣Ир╕нр╣Бр╕ер╣Йр╕з
  - `edit`: р╕Юр╕▓р╕Шр╕Юр╕гр╣Йр╕нр╕бр╕Кр╕Щр╕┤р╕Фр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Чр╕╡р╣Ир╕нр╕Щр╕╕р╕бр╕▓р╕Щр╕Ир╕▓р╕Б `meta`/р╕Ир╕│р╕Щр╕зр╕Щ diff
  - р╕Др╣Ир╕▓ fallback: р╕Кр╕╖р╣Ир╕нр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕н

## Debug override

- р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ тЦ╕ Debug тЦ╕ р╕Хр╕▒р╕зр╣Ар╕ер╕╖р╕нр╕Б тАЬIcon overrideтАЭ:
  - `System (auto)` (р╕Др╣Ир╕▓р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ)
  - `Working: main` (р╕Хр╕▓р╕бр╕Кр╕Щр╕┤р╕Фр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕н)
  - `Working: other` (р╕Хр╕▓р╕бр╕Кр╕Щр╕┤р╕Фр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕н)
  - `Idle`
- р╕Ир╕▒р╕Фр╣Ар╕Бр╣Зр╕Ър╕Ьр╣Ир╕▓р╕Щ `@AppStorage("iconOverride")`; р╣Бр╕бр╣Зр╕Ыр╣Др╕Ыр╕вр╕▒р╕З `IconState.overridden`.

## р╣Ар╕Кр╣Зр╕Бр╕ер╕┤р╕кр╕Хр╣Мр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

- р╕Бр╕гр╕░р╕Хр╕╕р╣Йр╕Щр╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Б: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Др╕нр╕Др╕нр╕Щр╕кр╕ер╕▒р╕Ър╕Чр╕▒р╕Щр╕Чр╕╡р╣Бр╕ер╕░р╣Бр╕Цр╕зр╕кр╕Цр╕▓р╕Щр╕░р╣Бр╕кр╕Фр╕Зр╕Ыр╣Йр╕▓р╕вр╕Вр╕нр╕Зр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Б
- р╕Бр╕гр╕░р╕Хр╕╕р╣Йр╕Щр╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕Чр╕╡р╣Ир╣Др╕бр╣Ир╣Гр╕Кр╣Ир╕лр╕ер╕▒р╕Бр╕Вр╕Ур╕░р╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Бр╕зр╣Ир╕▓р╕З: р╣Др╕нр╕Др╕нр╕Щ/р╕кр╕Цр╕▓р╕Щр╕░р╣Бр╕кр╕Фр╕Зр╕Вр╕нр╕Зр╕Чр╕╡р╣Ир╣Др╕бр╣Ир╣Гр╕Кр╣Ир╕лр╕ер╕▒р╕Б р╣Бр╕ер╕░р╕Др╕Зр╕Чр╕╡р╣Ир╕Ир╕Щр╕Бр╕зр╣Ир╕▓р╕Ир╕░р╣Ар╕кр╕гр╣Зр╕И
- р╣Ар╕гр╕┤р╣Ир╕бр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Бр╕Вр╕Ур╕░р╕бр╕╡р╕Зр╕▓р╕Щр╕нр╕╖р╣Ир╕Щр╕нр╕вр╕╣р╣И: р╣Др╕нр╕Др╕нр╕Щр╕кр╕ер╕▒р╕Ър╣Др╕Ыр╕Чр╕╡р╣Ир╕лр╕ер╕▒р╕Бр╕Чр╕▒р╕Щр╕Чр╕╡
- р╕Бр╕▓р╕гр╕Юр╕╕р╣Ир╕Зр╕Вр╕нр╕Зр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕нр╕нр╕вр╣Ир╕▓р╕Зр╕гр╕зр╕Фр╣Ар╕гр╣Зр╕з: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Ыр╣Йр╕▓р╕вр╣Др╕бр╣Ир╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ъ (р╕бр╕╡р╕Кр╣Ир╕зр╕Зр╕Ьр╣Ир╕нр╕Щр╕Ьр╕▒р╕Щ TTL р╕Ър╕Щр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕н)
- р╣Бр╕Цр╕зр╕кр╕╕р╕Вр╕ар╕▓р╕Юр╕Бр╕ер╕▒р╕Ър╕бр╕▓р╣Бр╕кр╕Фр╕Зр╣Ар╕бр╕╖р╣Ир╕нр╕Чр╕╕р╕Бр╣Ар╕Лр╕кр╕Кр╕▒р╕Щр╕зр╣Ир╕▓р╕З
