---
summary: "โหมดการรันแบบยกระดับและไดเรกทีฟ /elevated"
read_when:
  - เมื่อปรับค่าเริ่มต้นของโหมดการยกระดับ รายการอนุญาต หรือพฤติกรรมของคำสั่งสแลช
title: "โหมดการยกระดับ"
---

# โหมดการยกระดับ (/elevated directives)

## ทำอะไรได้บ้าง

- `/elevated on` ทำงานบนโฮสต์Gatewayและคงการอนุมัติการรันคำสั่งไว้(เช่นเดียวกับ `/elevated ask`).
- `/elevated full` ทำงานบนโฮสต์Gateway **และ** อนุมัติการรันคำสั่งอัตโนมัติ(ข้ามการอนุมัติ).
- `/elevated ask` ทำงานบนโฮสต์Gatewayแต่ยังคงการอนุมัติการรันคำสั่งไว้(เช่นเดียวกับ `/elevated on`).
- `on`/`ask` **ไม่** บังคับใช้ `exec.security=full`; นโยบายความปลอดภัย/การถามที่ตั้งค่าไว้ยังคงมีผล.
- เปลี่ยนพฤติกรรมเฉพาะเมื่อเอเจนต์ถูก **sandboxed** (หากไม่ใช่ การรันคำสั่งจะทำงานบนโฮสต์อยู่แล้ว).
- รูปแบบไดเรกทีฟ: `/elevated on|off|ask|full`, `/elev on|off|ask|full`.
- รับเฉพาะ `on|off|ask|full` เท่านั้น; อื่นๆจะส่งคำแนะนำกลับและไม่เปลี่ยนสถานะ.

## สิ่งที่ควบคุม(และสิ่งที่ไม่ควบคุม)

- **เกตการใช้งาน**: `tools.elevated` เป็นฐานระดับส่วนกลาง. `agents.list[].tools.elevated` สามารถจำกัดการยกระดับต่อเอเจนต์เพิ่มเติมได้(ทั้งสองต้องอนุญาต).
- **สถานะต่อเซสชัน**: `/elevated on|off|ask|full` ตั้งระดับการยกระดับสำหรับคีย์เซสชันปัจจุบัน.
- **ไดเรกทีฟแบบอินไลน์**: `/elevated on|ask|full` ภายในข้อความมีผลเฉพาะข้อความนั้น.
- **กลุ่ม**: ในแชตกลุ่ม ไดเรกทีฟการยกระดับจะถูกยอมรับเฉพาะเมื่อมีการกล่าวถึงเอเจนต์ ข้อความแบบคำสั่งล้วนที่ข้ามข้อกำหนดการกล่าวถึงจะถือว่าเป็นการกล่าวถึง. Command-only messages that bypass mention requirements are treated as mentioned.
- **การรันบนโฮสต์**: การยกระดับบังคับ `exec` ไปยังโฮสต์Gateway; `full` ยังตั้งค่า `security=full`.
- **การอนุมัติ**: `full` ข้ามการอนุมัติการรันคำสั่ง; `on`/`ask` ปฏิบัติตามเมื่อกฎ allowlist/ask กำหนดให้ต้องอนุมัติ.
- **เอเจนต์ที่ไม่ถูก sandboxed**: ไม่มีผลต่อที่ตั้งการรัน; มีผลเฉพาะการคุมสิทธิ์ การบันทึก และสถานะ.
- **นโยบายเครื่องมือยังคงมีผล**: หาก `exec` ถูกปฏิเสธโดยนโยบายเครื่องมือ จะไม่สามารถใช้การยกระดับได้.
- **แยกจาก `/exec`**: `/exec` ปรับค่าเริ่มต้นต่อเซสชันสำหรับผู้ส่งที่ได้รับอนุญาตและไม่ต้องใช้การยกระดับ.

## ลำดับการตัดสินผล

1. ไดเรกทีฟแบบอินไลน์ในข้อความ(มีผลเฉพาะข้อความนั้น).
2. การแทนที่ระดับเซสชัน(ตั้งค่าโดยส่งข้อความที่เป็นไดเรกทีฟล้วน).
3. ค่าเริ่มต้นส่วนกลาง(`agents.defaults.elevatedDefault` ในคอนฟิก).

## การตั้งค่าเริ่มต้นของเซสชัน

- ส่งข้อความที่เป็น **เฉพาะ** ไดเรกทีฟ(อนุญาตช่องว่าง) เช่น `/elevated full`.
- ระบบจะส่งข้อความยืนยัน(`Elevated mode set to full...` / `Elevated mode disabled.`).
- หากการเข้าถึงการยกระดับถูกปิดใช้งานหรือผู้ส่งไม่อยู่ใน allowlist ที่อนุมัติ ไดเรกทีฟจะตอบกลับด้วยข้อผิดพลาดที่ดำเนินการได้และไม่เปลี่ยนสถานะเซสชัน.
- ส่ง `/elevated` (หรือ `/elevated:`) โดยไม่ใส่อาร์กิวเมนต์เพื่อดูระดับการยกระดับปัจจุบัน.

## ความพร้อมใช้งาน+allowlists

- เกตฟีเจอร์: `tools.elevated.enabled` (ค่าเริ่มต้นสามารถปิดผ่านคอนฟิกได้แม้โค้ดจะรองรับ).
- allowlist ผู้ส่ง: `tools.elevated.allowFrom` พร้อม allowlist แยกตามผู้ให้บริการ(เช่น `discord`, `whatsapp`).
- เกตต่อเอเจนต์: `agents.list[].tools.elevated.enabled` (ไม่บังคับ; ทำได้เพียงจำกัดเพิ่มเติม).
- allowlist ต่อเอเจนต์: `agents.list[].tools.elevated.allowFrom` (ไม่บังคับ; เมื่อกำหนด ผู้ส่งต้องตรงกับ **ทั้ง** allowlist ส่วนกลาง+ต่อเอเจนต์).
- ทางเลือกสำรองของ Discord: หากละ `tools.elevated.allowFrom.discord` จะใช้รายการ `channels.discord.dm.allowFrom` เป็นทางเลือกสำรอง ตั้งค่า `tools.elevated.allowFrom.discord` (แม้เป็น `[]`) เพื่อแทนที่ allowlist ต่อเอเจนต์จะ **ไม่** ใช้ทางเลือกสำรอง. Set `tools.elevated.allowFrom.discord` (even `[]`) to override. Per-agent allowlists do **not** use the fallback.
- ทุกเกตต้องผ่าน มิฉะนั้นจะถือว่าการยกระดับไม่พร้อมใช้งาน.

## การบันทึก+สถานะ

- การเรียกใช้การรันคำสั่งแบบยกระดับจะถูกบันทึกในระดับ info.
- สถานะเซสชันจะแสดงโหมดการยกระดับ(เช่น `elevated=ask`, `elevated=full`).
