---
summary: "рдореЗрдиреВ рдмрд╛рд░ рдХреА рд╕реНрдерд┐рддрд┐ рддрд░реНрдХ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдХреНрдпрд╛ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ"
read_when:
  - mac рдореЗрдиреВ UI рдпрд╛ рд╕реНрдерд┐рддрд┐ рддрд░реНрдХ рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХрд░рддреЗ рд╕рдордп
title: "рдореЗрдиреВ рдмрд╛рд░"
---

# рдореЗрдиреВ рдмрд╛рд░ рд╕реНрдерд┐рддрд┐ рддрд░реНрдХ

## рдХреНрдпрд╛ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ

- рд╣рдо рд╡рд░реНрддрдорд╛рди рдПрдЬреЗрдВрдЯ рдХреЗ рдХрд╛рд░реНрдптАСрд╕реНрдерд┐рддрд┐ рдХреЛ рдореЗрдиреВ рдмрд╛рд░ рдЖрдЗрдХрди рдФрд░ рдореЗрдиреВ рдХреА рдкрд╣рд▓реА рд╕реНрдерд┐рддрд┐ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВред
- рдХрд╛рд░реНрдп рд╕рдХреНрд░рд┐рдп рд╣реЛрдиреЗ рдХреЗ рджреМрд░рд╛рди рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕реНрдерд┐рддрд┐ рдЫрд┐рдкреА рд░рд╣рддреА рд╣реИ; рд╕рднреА рд╕рддреНрд░ рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╣реЛрдиреЗ рдкрд░ рдпрд╣ рд╡рд╛рдкрд╕ рдЖрддреА рд╣реИред
- рдореЗрдиреВ рдореЗрдВ тАЬNodesтАЭ рдмреНрд▓реЙрдХ рдХреЗрд╡рд▓ **рдбрд┐рд╡рд╛рдЗрд╕** рд╕реВрдЪреАрдмрджреНрдз рдХрд░рддрд╛ рд╣реИ ( `node.list` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреЗрдпрд░реНрдб рдиреЛрдбреНрд╕), рди рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ/рдЙрдкрд╕реНрдерд┐рддрд┐ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдБред
- рдЬрдм рдкреНрд░рджрд╛рддрд╛ рдЙрдкрдпреЛрдЧ рд╕реНрдиреИрдкрд╢реЙрдЯ рдЙрдкрд▓рдмреНрдз рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ Context рдХреЗ рдЕрдВрддрд░реНрдЧрдд тАЬUsageтАЭ рдЕрдиреБрднрд╛рдЧ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИред

## рд╕реНрдерд┐рддрд┐ рдореЙрдбрд▓

- 20. рд╕реЗрд╢рдВрд╕: рдЗрд╡реЗрдВрдЯреНрд╕ `runId` (рдкреНрд░рддрд┐тАСрд░рди) рдХреЗ рд╕рд╛рде рдЖрддреЗ рд╣реИрдВ, рдФрд░ рдкреЗрд▓реЛрдб рдореЗрдВ `sessionKey` рднреА рд╣реЛрддрд╛ рд╣реИред 21. тАЬmainтАЭ рд╕реЗрд╢рди рдХреА рдХреБрдВрдЬреА `main` рд╣реИ; рдпрджрд┐ рдЕрдиреБрдкрд╕реНрдерд┐рдд рд╣реЛ, рддреЛ рд╣рдо рд╕рдмрд╕реЗ рд╣рд╛рд▓ рдореЗрдВ рдЕрдкрдбреЗрдЯ рд╣реБрдП рд╕реЗрд╢рди рдкрд░ рдлрд╝реЙрд▓рдмреИрдХ рдХрд░рддреЗ рд╣реИрдВред
- 22. рдкреНрд░рд╛рдердорд┐рдХрддрд╛: main рд╣рдореЗрд╢рд╛ рдЬреАрддрддрд╛ рд╣реИред рдЕрдЧрд░ main active рд╣реИ, рддреЛ рдЙрд╕рдХрд╛ state рддреБрд░рдВрдд рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред 24. рдпрджрд┐ main idle рд╣реИ, рддреЛ рд╕рдмрд╕реЗ рд╣рд╛рд▓ рдореЗрдВ рд╕рдХреНрд░рд┐рдп nonтАСmain рд╕реЗрд╢рди рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред 25. рд╣рдо рдЧрддрд┐рд╡рд┐рдзрд┐ рдХреЗ рдмреАрдЪ flipтАСflop рдирд╣реАрдВ рдХрд░рддреЗ; рдХреЗрд╡рд▓ рддрдм рд╕реНрд╡рд┐рдЪ рдХрд░рддреЗ рд╣реИрдВ рдЬрдм рд╡рд░реНрддрдорд╛рди рд╕реЗрд╢рди idle рд╣реЛ рдЬрд╛рдП рдпрд╛ main рд╕рдХреНрд░рд┐рдп рд╣реЛ рдЬрд╛рдПред
- рдЧрддрд┐рд╡рд┐рдзрд┐ рдкреНрд░рдХрд╛рд░:
  - `job`: рдЙрдЪреНрдЪтАСрд╕реНрддрд░реАрдп рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрди (`state: started|streaming|done|error`)ред
  - `tool`: `phase: start|result` рдХреЗ рд╕рд╛рде `toolName` рдФрд░ `meta/args`ред

## IconState enum (Swift)

- `idle`
- `workingMain(ActivityKind)`
- `workingOther(ActivityKind)`
- `overridden(ActivityKind)` (рдбрд┐рдмрдЧ рдУрд╡рд░рд░рд╛рдЗрдб)

### ActivityKind тЖТ рдЧреНрд▓рд┐рдлрд╝

- `exec` тЖТ ЁЯТ╗
- `read` тЖТ ЁЯУД
- `write` тЖТ тЬНя╕П
- `edit` тЖТ ЁЯУЭ
- `attach` тЖТ ЁЯУО
- default тЖТ ЁЯЫая╕П

### рджреГрд╢реНрдп рдореИрдкрд┐рдВрдЧ

- `idle`: рд╕рд╛рдорд╛рдиреНрдп рдХреНрд░рд┐рдЯрд░ред
- `workingMain`: рдЧреНрд▓рд┐рдлрд╝ рдХреЗ рд╕рд╛рде рдмреИрдЬ, рдкреВрд░реНрдг рдЯрд┐рдВрдЯ, рдкреИрд░ тАЬрдХрд╛рд░реНрдпрд░рддтАЭ рдПрдиреАрдореЗрд╢рдиред
- `workingOther`: рдЧреНрд▓рд┐рдлрд╝ рдХреЗ рд╕рд╛рде рдмреИрдЬ, рдореНрдпреВрдЯ рдЯрд┐рдВрдЯ, рдмрд┐рдирд╛ рд╕реНрдХрд░реАред
- `overridden`: рдЧрддрд┐рд╡рд┐рдзрд┐ рдХреА рдкрд░рд╡рд╛рд╣ рдХрд┐рдП рдмрд┐рдирд╛ рдЪреБрдирд╛ рдЧрдпрд╛ рдЧреНрд▓рд┐рдлрд╝/рдЯрд┐рдВрдЯ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред

## рд╕реНрдерд┐рддрд┐ рдкрдВрдХреНрддрд┐ рдкрд╛рда (рдореЗрдиреВ)

- рдЬрдм рдХрд╛рд░реНрдп рд╕рдХреНрд░рд┐рдп рд╣реЛ: `<Session role> ┬╖ <activity label>`
  - рдЙрджрд╛рд╣рд░рдг: `Main ┬╖ exec: pnpm test`, `Other ┬╖ read: apps/macos/Sources/OpenClaw/AppState.swift`ред
- рдЬрдм рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╣реЛ: рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕рд╛рд░рд╛рдВрд╢ рдкрд░ рд╡рд╛рдкрд╕ рдЬрд╛рддрд╛ рд╣реИред

## рдЗрд╡реЗрдВрдЯ рдЗрдирдЬреЗрд╢рди

- рд╕реНрд░реЛрдд: рдХрдВрдЯреНрд░реЛрд▓тАСрдЪреИрдирд▓ `agent` рдЗрд╡реЗрдВрдЯреНрд╕ (`ControlChannel.handleAgentEvent`)ред
- рдкрд╛рд░реНрд╕ рдХрд┐рдП рдЧрдП рдлрд╝реАрд▓реНрдб:
  - `stream: "job"` рдЬрд┐рд╕рдореЗрдВ рдкреНрд░рд╛рд░рдВрдн/рд░реЛрдХ рдХреЗ рд▓рд┐рдП `data.state`ред
  - `stream: "tool"` рдЬрд┐рд╕рдореЗрдВ `data.phase`, `name`, рд╡реИрдХрд▓реНрдкрд┐рдХ `meta`/`args`ред
- рд▓реЗрдмрд▓:
  - `exec`: `args.command` рдХреА рдкрд╣рд▓реА рдкрдВрдХреНрддрд┐ред
  - `read`/`write`: рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдкрдеред
  - `edit`: рдкрде рддрдерд╛ `meta`/рдбрд┐рдлрд╝ рдХрд╛рдЙрдВрдЯреНрд╕ рд╕реЗ рдЕрдиреБрдорд╛рдирд┐рдд рдкрд░рд┐рд╡рд░реНрддрди рдкреНрд░рдХрд╛рд░ред
  - рдлреЙрд▓рдмреИрдХ: рдЯреВрд▓ рдХрд╛ рдирд╛рдоред

## рдбрд┐рдмрдЧ рдУрд╡рд░рд░рд╛рдЗрдб

- рд╕реЗрдЯрд┐рдВрдЧреНрд╕ тЦ╕ рдбрд┐рдмрдЧ тЦ╕ тАЬIcon overrideтАЭ рдкрд┐рдХрд░:
  - `System (auto)` (рдбрд┐рдлрд╝реЙрд▓реНрдЯ)
  - `Working: main` (рдкреНрд░рддрд┐ рдЯреВрд▓ рдкреНрд░рдХрд╛рд░)
  - `Working: other` (рдкреНрд░рддрд┐ рдЯреВрд▓ рдкреНрд░рдХрд╛рд░)
  - `Idle`
- `@AppStorage("iconOverride")` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд; `IconState.overridden` рд╕реЗ рдореИрдк рдХрд┐рдпрд╛ рдЧрдпрд╛ред

## рдкрд░реАрдХреНрд╖рдг рдЪреЗрдХрд▓рд┐рд╕реНрдЯ

- рдореБрдЦреНрдп рд╕рддреНрд░ рдЬреЙрдм рдЯреНрд░рд┐рдЧрд░ рдХрд░реЗрдВ: рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдЗрдХрди рддреБрд░рдВрдд рд╕реНрд╡рд┐рдЪ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рд╕реНрдерд┐рддрд┐ рдкрдВрдХреНрддрд┐ рдореБрдЦреНрдп рд▓реЗрдмрд▓ рджрд┐рдЦрд╛рддреА рд╣реИред
- рдореБрдЦреНрдп рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╣реЛрдиреЗ рдкрд░ рдЧреИрд░тАСрдореБрдЦреНрдп рд╕рддреНрд░ рдЬреЙрдм рдЯреНрд░рд┐рдЧрд░ рдХрд░реЗрдВ: рдЖрдЗрдХрди/рд╕реНрдерд┐рддрд┐ рдЧреИрд░тАСрдореБрдЦреНрдп рджрд┐рдЦрд╛рддреА рд╣реИ; рдЙрд╕рдХреЗ рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рддрдХ рд╕реНрдерд┐рд░ рд░рд╣рддреА рд╣реИред
- рдЕрдиреНрдп рд╕рдХреНрд░рд┐рдп рд╣реЛрдиреЗ рдкрд░ рдореБрдЦреНрдп рд╢реБрд░реВ рдХрд░реЗрдВ: рдЖрдЗрдХрди рддреБрд░рдВрдд рдореБрдЦреНрдп рдкрд░ рдлрд╝реНрд▓рд┐рдк рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред
- рддреАрд╡реНрд░ рдЯреВрд▓ рдмрд░реНрд╕реНрдЯ: рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдмреИрдЬ рдлрд╝реНрд▓рд┐рдХрд░ рди рдХрд░реЗ (рдЯреВрд▓ рдкрд░рд┐рдгрд╛рдореЛрдВ рдкрд░ TTL рдЧреНрд░реЗрд╕)ред
- рд╕рднреА рд╕рддреНрд░ рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╣реЛрдиреЗ рдкрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдкрдВрдХреНрддрд┐ рдкреБрдирдГ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИред
