---
summary: "WhatsApp (рд╡реЗрдм рдЪреИрдирд▓) рдПрдХреАрдХрд░рдг: рд▓реЙрдЧрд┐рди, рдЗрдирдмреЙрдХреНрд╕, рдЙрддреНрддрд░, рдореАрдбрд┐рдпрд╛ рдФрд░ рд╕рдВрдЪрд╛рд▓рди"
read_when:
  - WhatsApp/рд╡реЗрдм рдЪреИрдирд▓ рд╡реНрдпрд╡рд╣рд╛рд░ рдпрд╛ рдЗрдирдмреЙрдХреНрд╕ рд░реВрдЯрд┐рдВрдЧ рдкрд░ рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп
title: "WhatsApp"
---

# WhatsApp (рд╡реЗрдм рдЪреИрдирд▓)

Status: WhatsApp Web via Baileys only. Gateway owns the session(s).

## рддреНрд╡рд░рд┐рдд рд╕реЗрдЯрдЕрдк (рд╢реБрд░реБрдЖрддреА)

1. рдпрджрд┐ рд╕рдВрднрд╡ рд╣реЛ рддреЛ **рдЕрд▓рдЧ рдлреЛрди рдирдВрдмрд░** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ (рдЕрдиреБрд╢рдВрд╕рд┐рдд)ред
2. `~/.openclaw/openclaw.json` рдореЗрдВ WhatsApp рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред
3. QR рдХреЛрдб рд╕реНрдХреИрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `openclaw channels login` рдЪрд▓рд╛рдПрдБ (Linked Devices)ред
4. Gateway рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВред

рдиреНрдпреВрдирддрдо рд╡рд┐рдиреНрдпрд╛рд╕:

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+15551234567"],
    },
  },
}
```

## рд▓рдХреНрд╖реНрдп

- рдПрдХ Gateway рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдХрдИ WhatsApp рдЦрд╛рддреЗ (рдорд▓реНрдЯреА-рдЕрдХрд╛рдЙрдВрдЯ)ред
- рдирд┐рд░реНрдзрд╛рд░рдХ рд░реВрдЯрд┐рдВрдЧ: рдЙрддреНрддрд░ WhatsApp рдкрд░ рд╣реА рд▓реМрдЯреЗрдВ, рдХреЛрдИ рдореЙрдбрд▓ рд░реВрдЯрд┐рдВрдЧ рдирд╣реАрдВред
- рдореЙрдбрд▓ рдХреЛ рдЙрджреНрдзреГрдд рдЙрддреНрддрд░ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╕рдВрджрд░реНрдн рдорд┐рд▓реЗред

## рдХреЙрдиреНрдлрд╝рд┐рдЧ рд▓рд┐рдЦрд╛рд╡рдЯ

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, WhatsApp рдХреЛ `/config set|unset` рджреНрд╡рд╛рд░рд╛ рдЯреНрд░рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рдХреЙрдиреНрдлрд╝рд┐рдЧ рдЕрдкрдбреЗрдЯ рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛрддреА рд╣реИ (рдЗрд╕рдХреЗ рд▓рд┐рдП `commands.config: true` рдЖрд╡рд╢реНрдпрдХ рд╣реИ)ред

рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:

```json5
{
  channels: { whatsapp: { configWrites: false } },
}
```

## рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ (рдХреМрди рдХреНрдпрд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ)

- **Gateway** Baileys рд╕реЙрдХреЗрдЯ рдФрд░ рдЗрдирдмреЙрдХреНрд╕ рд▓реВрдк рдХрд╛ рд╕реНрд╡рд╛рдореА рд╣реИред
- **CLI / macOS рдРрдк** Gateway рд╕реЗ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВ; Baileys рдХрд╛ рдкреНрд░рддреНрдпрдХреНрд╖ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВред
- **рд╕рдХреНрд░рд┐рдп рд▓рд┐рд╕реНрдирд░** рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ; рдЕрдиреНрдпрдерд╛ рднреЗрдЬрдирд╛ рддреБрд░рдВрдд рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред

## рдлреЛрди рдирдВрдмрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ (рджреЛ рдореЛрдб)

WhatsApp requires a real mobile number for verification. VoIP and virtual numbers are usually blocked. There are two supported ways to run OpenClaw on WhatsApp:

### рд╕рдорд░реНрдкрд┐рдд рдирдВрдмрд░ (рдЕрдиреБрд╢рдВрд╕рд┐рдд)

Use a **separate phone number** for OpenClaw. Best UX, clean routing, no self-chat quirks. Ideal setup: **spare/old Android phone + eSIM**. Leave it on WiтАСFi and power, and link it via QR.

**WhatsApp Business:** You can use WhatsApp Business on the same device with a different number. Great for keeping your personal WhatsApp separate тАФ install WhatsApp Business and register the OpenClaw number there.

**рдирдореВрдирд╛ рд╡рд┐рдиреНрдпрд╛рд╕ (рд╕рдорд░реНрдкрд┐рдд рдирдВрдмрд░, рд╕рд┐рдВрдЧрд▓-рдпреВрдЬрд╝рд░ allowlist):**

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+15551234567"],
    },
  },
}
```

**Pairing mode (optional):**
If you want pairing instead of allowlist, set `channels.whatsapp.dmPolicy` to `pairing`. Unknown senders get a pairing code; approve with:
`openclaw pairing approve whatsapp <code>`

### рд╡реНрдпрдХреНрддрд┐рдЧрдд рдирдВрдмрд░ (рдлрд╝реЙрд▓рдмреИрдХ)

Quick fallback: run OpenClaw on **your own number**. Message yourself (WhatsApp тАЬMessage yourselfтАЭ) for testing so you donтАЩt spam contacts. Expect to read verification codes on your main phone during setup and experiments. **Must enable self-chat mode.**
When the wizard asks for your personal WhatsApp number, enter the phone you will message from (the owner/sender), not the assistant number.

**рдирдореВрдирд╛ рд╡рд┐рдиреНрдпрд╛рд╕ (рд╡реНрдпрдХреНрддрд┐рдЧрдд рдирдВрдмрд░, self-chat):**

```json
{
  "whatsapp": {
    "selfChatMode": true,
    "dmPolicy": "allowlist",
    "allowFrom": ["+15551234567"]
  }
}
```

Self-chat replies default to `[{identity.name}]` when set (otherwise `[openclaw]`)
if `messages.responsePrefix` is unset. Set it explicitly to customize or disable
the prefix (use `""` to remove it).

### рдирдВрдмрд░ рд╕реНрд░реЛрдд рд╕реБрдЭрд╛рд╡

- рдЖрдкрдХреЗ рджреЗрд╢ рдХреЗ рдореЛрдмрд╛рдЗрд▓ рдХреИрд░рд┐рдпрд░ рд╕реЗ **рд▓реЛрдХрд▓ eSIM** (рд╕рдмрд╕реЗ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп)
  - рдСрд╕реНрдЯреНрд░рд┐рдпрд╛: [hot.at](https://www.hot.at)
  - рдпреВрдХреЗ: [giffgaff](https://www.giffgaff.com) тАФ рдореБрдлрд╝реНрдд SIM, рдХреЛрдИ рдЕрдиреБрдмрдВрдз рдирд╣реАрдВ
- **рдкреНрд░реАрдкреЗрдб SIM** тАФ рд╕рд╕реНрддрд╛, рд╕рддреНрдпрд╛рдкрди рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рдПрдХ SMS рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдкрд░реНрдпрд╛рдкреНрдд

**рдмрдЪреЗрдВ:** TextNow, Google Voice, рдЕрдзрд┐рдХрд╛рдВрд╢ тАЬfree SMSтАЭ рд╕реЗрд╡рд╛рдПрдБ тАФ WhatsApp рдЗрдиреНрд╣реЗрдВ рдЖрдХреНрд░рд╛рдордХ рд░реВрдк рд╕реЗ рдмреНрд▓реЙрдХ рдХрд░рддрд╛ рд╣реИред

**Tip:** The number only needs to receive one verification SMS. After that, WhatsApp Web sessions persist via `creds.json`.

## Twilio рдХреНрдпреЛрдВ рдирд╣реАрдВ?

- рдкреНрд░рд╛рд░рдВрднрд┐рдХ OpenClaw рдмрд┐рд▓реНрдбреНрд╕ рдореЗрдВ Twilio рдХреЗ WhatsApp Business рдПрдХреАрдХрд░рдг рдХрд╛ рд╕рдорд░реНрдерди рдерд╛ред
- WhatsApp Business рдирдВрдмрд░ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рд╣рд╛рдпрдХ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИрдВред
- Meta 24тАСрдШрдВрдЯреЗ рдХреА рдЙрддреНрддрд░ рд╡рд┐рдВрдбреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ; рдпрджрд┐ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ 24 рдШрдВрдЯреЛрдВ рдореЗрдВ рдЙрддреНрддрд░ рдирд╣реАрдВ рджрд┐рдпрд╛ рд╣реИ, рддреЛ рдмрд┐рдЬрд╝рдиреЗрд╕ рдирдВрдмрд░ рдирдП рд╕рдВрджреЗрд╢ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред
- рдЙрдЪреНрдЪ-рд╡реЙрд▓реНрдпреВрдо рдпрд╛ тАЬрдЪреИрдЯреАтАЭ рдЙрдкрдпреЛрдЧ рдЖрдХреНрд░рд╛рдордХ рдмреНрд▓реЙрдХрд┐рдВрдЧ рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдмрд┐рдЬрд╝рдиреЗрд╕ рдЕрдХрд╛рдЙрдВрдЯ рджрд░реНрдЬрдиреЛрдВ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рд╣рд╛рдпрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рдмрдиреЗ рд╣реИрдВред
- рдкрд░рд┐рдгрд╛рдо: рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдбрд┐рд▓реАрд╡рд░реА рдФрд░ рдмрд╛рд░-рдмрд╛рд░ рдмреНрд▓реЙрдХ, рдЗрд╕рд▓рд┐рдП рд╕рдорд░реНрдерди рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ред

## рд▓реЙрдЧрд┐рди + рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕

- рд▓реЙрдЧрд┐рди рдХрдорд╛рдВрдб: `openclaw channels login` (Linked Devices рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ QR)ред
- рдорд▓реНрдЯреА-рдЕрдХрд╛рдЙрдВрдЯ рд▓реЙрдЧрд┐рди: `openclaw channels login --account <id>` (`<id>` = `accountId`)ред
- рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЕрдХрд╛рдЙрдВрдЯ (рдЬрдм `--account` рдЫреЛрдбрд╝рд╛ рдЧрдпрд╛ рд╣реЛ): рдпрджрд┐ рдореМрдЬреВрдж рд╣реЛ рддреЛ `default`, рдЕрдиреНрдпрдерд╛ рдкрд╣рд▓рд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдЕрдХрд╛рдЙрдВрдЯ рдЖрдИрдбреА (рдХреНрд░рдордмрджреНрдз)ред
- рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ `~/.openclaw/credentials/whatsapp/<accountId>/creds.json` рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрддред
- рдмреИрдХрдЕрдк рдХреЙрдкреА `creds.json.bak` рдкрд░ (рдХрд░рдкреНрд╢рди рд╣реЛрдиреЗ рдкрд░ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд)ред
- рд▓реЗрдЧреЗрд╕реА рд╕рдВрдЧрддрддрд╛: рдкреБрд░рд╛рдиреЗ рдЗрдВрд╕реНрдЯреЙрд▓ Baileys рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕реАрдзреЗ `~/.openclaw/credentials/` рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреЗ рдереЗред
- рд▓реЙрдЧрдЖрдЙрдЯ: `openclaw channels logout` (рдпрд╛ `--account <id>`) WhatsApp рдСрде рд╕реНрдЯреЗрдЯ рд╣рдЯрд╛рддрд╛ рд╣реИ (рд▓реЗрдХрд┐рди рд╕рд╛рдЭрд╛ `oauth.json` рд░рдЦрддрд╛ рд╣реИ)ред
- рд▓реЙрдЧрдЖрдЙрдЯреЗрдб рд╕реЙрдХреЗрдЯ => рдкреБрдирдГ рд▓рд┐рдВрдХ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрджреЗрд╢ рджреЗрдиреЗ рд╡рд╛рд▓реА рддреНрд░реБрдЯрд┐ред

## рдЗрдирдмрд╛рдЙрдВрдб рдлрд╝реНрд▓реЛ (DM + рд╕рдореВрд╣)

- WhatsApp рдЗрд╡реЗрдВрдЯреНрд╕ `messages.upsert` (Baileys) рд╕реЗ рдЖрддреЗ рд╣реИрдВред
- рд╢рдЯрдбрд╛рдЙрди рдкрд░ рдЗрдирдмреЙрдХреНрд╕ рд▓рд┐рд╕реНрдирд░реНрд╕ рдХреЛ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдкрд░реАрдХреНрд╖рдг/рд░реАрд╕реНрдЯрд╛рд░реНрдЯ рдореЗрдВ рдЗрд╡реЗрдВрдЯ рд╣реИрдВрдбрд▓рд░реНрд╕ рдЬрдорд╛ рди рд╣реЛрдВред
- рд╕реНрдЯреЗрдЯрд╕/рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рдЪреИрдЯреНрд╕ рдЕрдирджреЗрдЦреА рдХреА рдЬрд╛рддреА рд╣реИрдВред
- рдбрд╛рдпрд░реЗрдХреНрдЯ рдЪреИрдЯреНрд╕ E.164 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИрдВ; рд╕рдореВрд╣ group JID рдХрд╛ред
- **DM рдиреАрддрд┐**: `channels.whatsapp.dmPolicy` рдбрд╛рдпрд░реЗрдХреНрдЯ рдЪреИрдЯ рдПрдХреНрд╕реЗрд╕ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `pairing`)ред
  - рдкреЗрдпрд░рд┐рдВрдЧ: рдЕрдЬреНрдЮрд╛рдд рдкреНрд░реЗрд╖рдХреЛрдВ рдХреЛ рдкреЗрдпрд░рд┐рдВрдЧ рдХреЛрдб рдорд┐рд▓рддрд╛ рд╣реИ ( `openclaw pairing approve whatsapp <code>` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдиреБрдореЛрджрди; рдХреЛрдб 1 рдШрдВрдЯреЗ рдмрд╛рдж рд╕рдорд╛рдкреНрдд)ред
  - рдУрдкрди: `channels.whatsapp.allowFrom` рдореЗрдВ `"*"` рд╢рд╛рдорд┐рд▓ рд╣реЛрдирд╛ рдЖрд╡рд╢реНрдпрдХред
  - рдЖрдкрдХрд╛ рд▓рд┐рдВрдХ рдХрд┐рдпрд╛ рд╣реБрдЖ WhatsApp рдирдВрдмрд░ рдирд┐рд╣рд┐рдд рд░реВрдк рд╕реЗ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╣реИ, рдЗрд╕рд▓рд┐рдП self рд╕рдВрджреЗрд╢ `channels.whatsapp.dmPolicy` рдФрд░ `channels.whatsapp.allowFrom` рдЬрд╛рдБрдЪреЛрдВ рдХреЛ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВред

### рд╡реНрдпрдХреНрддрд┐рдЧрдд-рдирдВрдмрд░ рдореЛрдб (рдлрд╝реЙрд▓рдмреИрдХ)

рдпрджрд┐ рдЖрдк OpenClaw рдХреЛ **рдЕрдкрдиреЗ рд╡реНрдпрдХреНрддрд┐рдЧрдд WhatsApp рдирдВрдмрд░** рдкрд░ рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рддреЛ `channels.whatsapp.selfChatMode` рд╕рдХреНрд╖рдо рдХрд░реЗрдВ (рдКрдкрд░ рджрд┐рдП рдирдореВрдиреЗ рджреЗрдЦреЗрдВ)ред

рд╡реНрдпрд╡рд╣рд╛рд░:

- рдЖрдЙрдЯрдмрд╛рдЙрдВрдб DM рдХрднреА рднреА рдкреЗрдпрд░рд┐рдВрдЧ рдЙрддреНрддрд░ рдЯреНрд░рд┐рдЧрд░ рдирд╣реАрдВ рдХрд░рддреЗ (рд╕рдВрдкрд░реНрдХреЛрдВ рдХреЛ рд╕реНрдкреИрдо рд╕реЗ рдмрдЪрд╛рддрд╛ рд╣реИ)ред
- рдЗрдирдмрд╛рдЙрдВрдб рдЕрдЬреНрдЮрд╛рдд рдкреНрд░реЗрд╖рдХ рдЕрднреА рднреА `channels.whatsapp.dmPolicy` рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реИрдВред
- self-chat рдореЛрдб (allowFrom рдореЗрдВ рдЖрдкрдХрд╛ рдирдВрдмрд░ рд╢рд╛рдорд┐рд▓) рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реАрдб рд░рд╕реАрджреЗрдВ рд╕реЗ рдмрдЪрддрд╛ рд╣реИ рдФрд░ mention JID рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рддрд╛ рд╣реИред
- рдЧреИрд░тАСselfтАСchat DM рдХреЗ рд▓рд┐рдП рд░реАрдб рд░рд╕реАрджреЗрдВ рднреЗрдЬреА рдЬрд╛рддреА рд╣реИрдВред

## рд░реАрдб рд░рд╕реАрджреЗрдВ

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, Gateway рд╕реНрд╡реАрдХрд╛рд░ рд╣реЛрдиреЗ рдкрд░ рдЗрдирдмрд╛рдЙрдВрдб WhatsApp рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдкрдврд╝рд╛ рд╣реБрдЖ (рдиреАрд▓реЗ рдЯрд┐рдХ) рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рддрд╛ рд╣реИред

рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдк рд╕реЗ рдЕрдХреНрд╖рдо рдХрд░реЗрдВ:

```json5
{
  channels: { whatsapp: { sendReadReceipts: false } },
}
```

рдкреНрд░рддрд┐-рдЕрдХрд╛рдЙрдВрдЯ рдЕрдХреНрд╖рдо рдХрд░реЗрдВ:

```json5
{
  channels: {
    whatsapp: {
      accounts: {
        personal: { sendReadReceipts: false },
      },
    },
  },
}
```

рдиреЛрдЯреНрд╕:

- self-chat рдореЛрдб рдореЗрдВ рд░реАрдб рд░рд╕реАрджреЗрдВ рд╣рдореЗрд╢рд╛ рдЫреЛрдбрд╝реА рдЬрд╛рддреА рд╣реИрдВред

## WhatsApp FAQ: рд╕рдВрджреЗрд╢ рднреЗрдЬрдирд╛ + рдкреЗрдпрд░рд┐рдВрдЧ

**Will OpenClaw message random contacts when I link WhatsApp?**  
No. Default DM policy is **pairing**, so unknown senders only get a pairing code and their message is **not processed**. OpenClaw only replies to chats it receives, or to sends you explicitly trigger (agent/CLI).

**WhatsApp рдкрд░ рдкреЗрдпрд░рд┐рдВрдЧ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИ?**  
рдкреЗрдпрд░рд┐рдВрдЧ рдЕрдЬреНрдЮрд╛рдд рдкреНрд░реЗрд╖рдХреЛрдВ рдХреЗ рд▓рд┐рдП DM рдЧреЗрдЯ рд╣реИ:

- рдирдП рдкреНрд░реЗрд╖рдХ рд╕реЗ рдкрд╣рд▓рд╛ DM рдПрдХ рдЫреЛрдЯрд╛ рдХреЛрдб рд▓реМрдЯрд╛рддрд╛ рд╣реИ (рд╕рдВрджреЗрд╢ рдкреНрд░реЛрд╕реЗрд╕ рдирд╣реАрдВ рд╣реЛрддрд╛)ред
- рдЕрдиреБрдореЛрджрди рдХрд░реЗрдВ: `openclaw pairing approve whatsapp <code>` (рд╕реВрдЪреА рдХреЗ рд▓рд┐рдП `openclaw pairing list whatsapp`)ред
- рдХреЛрдб 1 рдШрдВрдЯреЗ рдмрд╛рдж рд╕рдорд╛рдкреНрдд; рд▓рдВрдмрд┐рдд рдЕрдиреБрд░реЛрдз рдкреНрд░рддрд┐ рдЪреИрдирд▓ 3 рддрдХ рд╕реАрдорд┐рддред

**Can multiple people use different OpenClaw instances on one WhatsApp number?**  
Yes, by routing each sender to a different agent via `bindings` (peer `kind: "dm"`, sender E.164 like `+15551234567`). Replies still come from the **same WhatsApp account**, and direct chats collapse to each agentтАЩs main session, so use **one agent per person**. DM access control (`dmPolicy`/`allowFrom`) is global per WhatsApp account. See [Multi-Agent Routing](/concepts/multi-agent).

**Why do you ask for my phone number in the wizard?**  
The wizard uses it to set your **allowlist/owner** so your own DMs are permitted. ItтАЩs not used for auto-sending. If you run on your personal WhatsApp number, use that same number and enable `channels.whatsapp.selfChatMode`.

## рд╕рдВрджреЗрд╢ рд╕рд╛рдорд╛рдиреНрдпреАрдХрд░рдг (рдореЙрдбрд▓ рдХреНрдпрд╛ рджреЗрдЦрддрд╛ рд╣реИ)

- `Body` рд╡рд░реНрддрдорд╛рди рд╕рдВрджреЗрд╢ рдмреЙрдбреА рд╣реИ, рдПрдиреНрд╡реЗрд▓рдк рдХреЗ рд╕рд╛рдеред

- рдЙрджреНрдзреГрдд рдЙрддреНрддрд░ рд╕рдВрджрд░реНрдн **рд╣рдореЗрд╢рд╛ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ**:

  ```
  [Replying to +1555 id:ABC123]
  <quoted text or <media:...>>
  [/Replying]
  ```

- рдЙрддреНрддрд░ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рднреА рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ:
  - `ReplyToId` = stanzaId
  - `ReplyToBody` = рдЙрджреНрдзреГрдд рдмреЙрдбреА рдпрд╛ рдореАрдбрд┐рдпрд╛ рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░
  - `ReplyToSender` = E.164 (рдЬрдм рдЬреНрдЮрд╛рдд рд╣реЛ)

- рдХреЗрд╡рд▓тАСрдореАрдбрд┐рдпрд╛ рдЗрдирдмрд╛рдЙрдВрдб рд╕рдВрджреЗрд╢ рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ:
  - `<media:image|video|audio|document|sticker>`

## рд╕рдореВрд╣

- рд╕рдореВрд╣ `agent:<agentId>:whatsapp:group:<jid>` рд╕рддреНрд░реЛрдВ рд╕реЗ рдореИрдк рд╣реЛрддреЗ рд╣реИрдВред
- рд╕рдореВрд╣ рдиреАрддрд┐: `channels.whatsapp.groupPolicy = open|disabled|allowlist` (рдбрд┐рдлрд╝реЙрд▓реНрдЯ `allowlist`)ред
- рд╕рдХреНрд░рд┐рдпрдг рдореЛрдб:
  - `mention` (рдбрд┐рдлрд╝реЙрд▓реНрдЯ): @mention рдпрд╛ regex рдореИрдЪ рдЖрд╡рд╢реНрдпрдХред
  - `always`: рд╣рдореЗрд╢рд╛ рдЯреНрд░рд┐рдЧрд░ред
- `/activation mention|always` рдХреЗрд╡рд▓ ownerтАСonly рд╣реИ рдФрд░ рдЗрд╕реЗ рдЕрд▓рдЧ рд╕рдВрджреЗрд╢ рдХреЗ рд░реВрдк рдореЗрдВ рднреЗрдЬрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред
- Owner = `channels.whatsapp.allowFrom` (рдпрд╛ рдпрджрд┐ рдЕрдирд╕реЗрдЯ рд╣реЛ рддреЛ self E.164)ред
- **рдЗрддрд┐рд╣рд╛рд╕ рдЗрдВрдЬреЗрдХреНрд╢рди** (рдХреЗрд╡рд▓ рд▓рдВрдмрд┐рдд):
  - рд╣рд╛рд▓ рдХреЗ _рдЕрдкреНрд░реЛрд╕реЗрд╕реНрдб_ рд╕рдВрджреЗрд╢ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ 50) рдЗрд╕рдХреЗ рдЕрдВрддрд░реНрдЧрдд рдбрд╛рд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВ:
    `[Chat messages since your last reply - for context]` (рдЬреЛ рд╕рдВрджреЗрд╢ рдкрд╣рд▓реЗ рд╕реЗ рд╕рддреНрд░ рдореЗрдВ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдкреБрдирдГ рдЗрдВрдЬреЗрдХреНрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛)
  - рд╡рд░реНрддрдорд╛рди рд╕рдВрджреЗрд╢ рдЗрд╕рдХреЗ рдЕрдВрддрд░реНрдЧрдд:
    `[Current message - respond to this]`
  - рдкреНрд░реЗрд╖рдХ рдкреНрд░рддреНрдпрдп рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ: `[from: Name (+E164)]`
- рд╕рдореВрд╣ рдореЗрдЯрд╛рдбреЗрдЯрд╛ 5 рдорд┐рдирдЯ рдХреЗ рд▓рд┐рдП рдХреИрд╢ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рд╡рд┐рд╖рдп + рдкреНрд░рддрд┐рднрд╛рдЧреА)ред

## рдЙрддреНрддрд░ рд╡рд┐рддрд░рдг (рдереНрд░реЗрдбрд┐рдВрдЧ)

- WhatsApp Web рдорд╛рдирдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИ (рд╡рд░реНрддрдорд╛рди Gateway рдореЗрдВ рдЙрджреНрдзреГрдд рдЙрддреНрддрд░ рдереНрд░реЗрдбрд┐рдВрдЧ рдирд╣реАрдВ)ред
- рдЗрд╕ рдЪреИрдирд▓ рдкрд░ рд░рд┐рдкреНрд▓рд╛рдИ рдЯреИрдЧреНрд╕ рдЕрдирджреЗрдЦреЗ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред

## рд╕реНрд╡реАрдХреГрддрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдПрдБ (рдкреНрд░рд╛рдкреНрддрд┐ рдкрд░ рдСрдЯреЛтАСрд░рд┐рдПрдХреНрдЯ)

WhatsApp can automatically send emoji reactions to incoming messages immediately upon receipt, before the bot generates a reply. This provides instant feedback to users that their message was received.

**рд╡рд┐рдиреНрдпрд╛рд╕:**

```json
{
  "whatsapp": {
    "ackReaction": {
      "emoji": "ЁЯСА",
      "direct": true,
      "group": "mentions"
    }
  }
}
```

**рд╡рд┐рдХрд▓реНрдк:**

- `emoji` (string): Emoji to use for acknowledgment (e.g., "ЁЯСА", "тЬЕ", "ЁЯУи"). Empty or omitted = feature disabled.
- `direct` (boolean, рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `true`): рдбрд╛рдпрд░реЗрдХреНрдЯ/DM рдЪреИрдЯреНрд╕ рдореЗрдВ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдПрдБ рднреЗрдЬреЗрдВред
- `group` (string, рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `"mentions"`): рд╕рдореВрд╣ рдЪреИрдЯ рд╡реНрдпрд╡рд╣рд╛рд░:
  - `"always"`: рд╕рднреА рд╕рдореВрд╣ рд╕рдВрджреЗрд╢реЛрдВ рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (рдмрд┐рдирд╛ @mention рднреА)
  - `"mentions"`: рдХреЗрд╡рд▓ рддрдм рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдЬрдм рдмреЙрдЯ @mentioned рд╣реЛ
  - `"never"`: рд╕рдореВрд╣реЛрдВ рдореЗрдВ рдХрднреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рди рдХрд░реЗрдВ

**рдкреНрд░рддрд┐тАСрдЕрдХрд╛рдЙрдВрдЯ рдУрд╡рд░рд░рд╛рдЗрдб:**

```json
{
  "whatsapp": {
    "accounts": {
      "work": {
        "ackReaction": {
          "emoji": "тЬЕ",
          "direct": false,
          "group": "always"
        }
      }
    }
  }
}
```

**рд╡реНрдпрд╡рд╣рд╛рд░ рдиреЛрдЯреНрд╕:**

- рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдПрдБ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреЗ рд╣реА **рддреБрд░рдВрдд** рднреЗрдЬреА рдЬрд╛рддреА рд╣реИрдВ, рдЯрд╛рдЗрдкрд┐рдВрдЧ рд╕рдВрдХреЗрддрдХреЛрдВ рдпрд╛ рдмреЙрдЯ рдЙрддреНрддрд░реЛрдВ рд╕реЗ рдкрд╣рд▓реЗред
- `requireMention: false` (activation: always) рд╡рд╛рд▓реЗ рд╕рдореВрд╣реЛрдВ рдореЗрдВ, `group: "mentions"` рд╕рднреА рд╕рдВрджреЗрд╢реЛрдВ рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░реЗрдЧрд╛ (рдХреЗрд╡рд▓ @mentions рдирд╣реАрдВ)ред
- рдлрд╛рдпрд░тАСрдПрдВрдбтАСрдлреЙрд░рдЧреЗрдЯ: рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╡рд┐рдлрд▓рддрд╛рдУрдВ рдХреЛ рд▓реЙрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдмреЙрдЯ рдХреЗ рдЙрддреНрддрд░ рджреЗрдиреЗ рд╕реЗ рдирд╣реАрдВ рд░реЛрдХрддреАрдВред
- рд╕рдореВрд╣ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рднрд╛рдЧреА JID рд╕реНрд╡рддрдГ рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
- WhatsApp `messages.ackReaction` рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рддрд╛ рд╣реИ; рдЗрд╕рдХреЗ рдмрдЬрд╛рдп `channels.whatsapp.ackReaction` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

## рдПрдЬреЗрдВрдЯ рдЯреВрд▓ (рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдПрдБ)

- рдЯреВрд▓: `whatsapp` with `react` action (`chatJid`, `messageId`, `emoji`, рд╡реИрдХрд▓реНрдкрд┐рдХ `remove`)ред
- рд╡реИрдХрд▓реНрдкрд┐рдХ: `participant` (рд╕рдореВрд╣ рдкреНрд░реЗрд╖рдХ), `fromMe` (рдЕрдкрдиреЗ рд╣реА рд╕рдВрджреЗрд╢ рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛), `accountId` (рдорд▓реНрдЯреАтАСрдЕрдХрд╛рдЙрдВрдЯ)ред
- рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╣рдЯрд╛рдиреЗ рдХрд╛ рдЕрд░реНрде: рджреЗрдЦреЗрдВ [/tools/reactions](/tools/reactions)ред
- рдЯреВрд▓ рдЧреЗрдЯрд┐рдВрдЧ: `channels.whatsapp.actions.reactions` (рдбрд┐рдлрд╝реЙрд▓реНрдЯ: рд╕рдХреНрд╖рдо)ред

## рд╕реАрдорд╛рдПрдБ

- рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ `channels.whatsapp.textChunkLimit` рддрдХ рдЪрдВрдХ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ 4000)ред
- рд╡реИрдХрд▓реНрдкрд┐рдХ рдирдИтАСрд▓рд╛рдЗрди рдЪрдВрдХрд┐рдВрдЧ: рд▓рдВрдмрд╛рдИ рдЪрдВрдХрд┐рдВрдЧ рд╕реЗ рдкрд╣рд▓реЗ рдЦрд╛рд▓реА рд▓рд╛рдЗрдиреЛрдВ (рдкреИрд░рд╛рдЧреНрд░рд╛рдл рд╕реАрдорд╛рдПрдБ) рдкрд░ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `channels.whatsapp.chunkMode="newline"` рд╕реЗрдЯ рдХрд░реЗрдВред
- рдЗрдирдмрд╛рдЙрдВрдб рдореАрдбрд┐рдпрд╛ рд╕реЗрд╡ `channels.whatsapp.mediaMaxMb` рджреНрд╡рд╛рд░рд╛ рд╕реАрдорд┐рдд (рдбрд┐рдлрд╝реЙрд▓реНрдЯ 50 MB)ред
- рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдореАрдбрд┐рдпрд╛ рдЖрдЗрдЯрдо `agents.defaults.mediaMaxMb` рджреНрд╡рд╛рд░рд╛ рд╕реАрдорд┐рдд (рдбрд┐рдлрд╝реЙрд▓реНрдЯ 5 MB)ред

## рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рднреЗрдЬрдирд╛ (рдЯреЗрдХреНрд╕реНрдЯ + рдореАрдбрд┐рдпрд╛)

- рд╕рдХреНрд░рд┐рдп рд╡реЗрдм рд▓рд┐рд╕реНрдирд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ; Gateway рди рдЪрд▓рдиреЗ рдкрд░ рддреНрд░реБрдЯрд┐ред
- рдЯреЗрдХреНрд╕реНрдЯ рдЪрдВрдХрд┐рдВрдЧ: рдкреНрд░рддрд┐ рд╕рдВрджреЗрд╢ рдЕрдзрд┐рдХрддрдо 4k ( `channels.whatsapp.textChunkLimit` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп, рд╡реИрдХрд▓реНрдкрд┐рдХ `channels.whatsapp.chunkMode`)ред
- рдореАрдбрд┐рдпрд╛:
  - рдЗрдореЗрдЬ/рд╡реАрдбрд┐рдпреЛ/рдСрдбрд┐рдпреЛ/рдбреЙрдХреНрдпреВрдореЗрдВрдЯ рд╕рдорд░реНрдерд┐рддред
  - рдСрдбрд┐рдпреЛ PTT рдХреЗ рд░реВрдк рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ; `audio/ogg` => `audio/ogg; codecs=opus`ред
  - рдХреИрдкреНрд╢рди рдХреЗрд╡рд▓ рдкрд╣рд▓реЗ рдореАрдбрд┐рдпрд╛ рдЖрдЗрдЯрдо рдкрд░ред
  - рдореАрдбрд┐рдпрд╛ рдлрд╝реЗрдЪ HTTP(S) рдФрд░ рд▓реЛрдХрд▓ рдкрд╛рдереНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред
  - рдПрдирд┐рдореЗрдЯреЗрдб GIFs: рдЗрдирд▓рд╛рдЗрди рд▓реВрдкрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП WhatsApp `gifPlayback: true` рдХреЗ рд╕рд╛рде MP4 рдЕрдкреЗрдХреНрд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред
    - CLI: `openclaw message send --media <mp4> --gif-playback`
    - Gateway: `send` рдкреИрд░рд╛рдореАрдЯрд░ рдореЗрдВ `gifPlayback: true` рд╢рд╛рдорд┐рд▓

## рд╡реЙрдпрд╕ рдиреЛрдЯреНрд╕ (PTT рдСрдбрд┐рдпреЛ)

WhatsApp рдСрдбрд┐рдпреЛ рдХреЛ **рд╡реЙрдпрд╕ рдиреЛрдЯреНрд╕** (PTT рдмрдмрд▓) рдХреЗ рд░реВрдк рдореЗрдВ рднреЗрдЬрддрд╛ рд╣реИред

- Best results: OGG/Opus. OpenClaw rewrites `audio/ogg` to `audio/ogg; codecs=opus`.
- WhatsApp рдХреЗ рд▓рд┐рдП `[[audio_as_voice]]` рдЕрдирджреЗрдЦрд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдСрдбрд┐рдпреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╡реЙрдпрд╕ рдиреЛрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдЬрд╛рддрд╛ рд╣реИ)ред

## рдореАрдбрд┐рдпрд╛ рд╕реАрдорд╛рдПрдБ + рдЕрдиреБрдХреВрд▓рди

- рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рд╕реАрдорд╛: 5 MB (рдкреНрд░рддрд┐ рдореАрдбрд┐рдпрд╛ рдЖрдЗрдЯрдо)ред
- рдУрд╡рд░рд░рд╛рдЗрдб: `agents.defaults.mediaMaxMb`ред
- рдЗрдореЗрдЬреЗрдЬрд╝ рдХреЛ рд╕реАрдорд╛ рдХреЗ рднреАрддрд░ JPEG рдореЗрдВ рд╕реНрд╡рддрдГ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рд░реАрд╕рд╛рдЗрдЬрд╝ + рдХреНрд╡рд╛рд▓рд┐рдЯреА рд╕реНрд╡реАрдк)ред
- рдУрд╡рд░рд╕рд╛рдЗрдЬрд╝ рдореАрдбрд┐рдпрд╛ => рддреНрд░реБрдЯрд┐; рдореАрдбрд┐рдпрд╛ рдЙрддреНрддрд░ рдЯреЗрдХреНрд╕реНрдЯ рдЪреЗрддрд╛рд╡рдиреА рдкрд░ рдлрд╝реЙрд▓рдмреИрдХ рдХрд░рддрд╛ рд╣реИред

## рд╣рд╛рд░реНрдЯрдмреАрдЯреНрд╕

- **Gateway рд╣рд╛рд░реНрдЯрдмреАрдЯ** рдХрдиреЗрдХреНрд╢рди рд╕реНрд╡рд╛рд╕реНрдереНрдп рд▓реЙрдЧ рдХрд░рддрд╛ рд╣реИ (`web.heartbeatSeconds`, рдбрд┐рдлрд╝реЙрд▓реНрдЯ 60s)ред
- **рдПрдЬреЗрдВрдЯ рд╣рд╛рд░реНрдЯрдмреАрдЯ** рдкреНрд░рддрд┐ рдПрдЬреЗрдВрдЯ (`agents.list[].heartbeat`) рдпрд╛ рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдк рд╕реЗ
  `agents.defaults.heartbeat` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдЬрдм рдкреНрд░рддрд┐тАСрдПрдЬреЗрдВрдЯ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдБ рд╕реЗрдЯ рди рд╣реЛрдВ рддреЛ рдлрд╝реЙрд▓рдмреИрдХ)ред
  - Uses the configured heartbeat prompt (default: `Read HEARTBEAT.md if it exists (workspace context). Follow it strictly. Do not infer or repeat old tasks from prior chats. If nothing needs attention, reply HEARTBEAT_OK.`) + `HEARTBEAT_OK` skip behavior.
  - рдбрд┐рд▓реАрд╡рд░реА рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдВрддрд┐рдо рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдЪреИрдирд▓ рдкрд░ (рдпрд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рд▓рдХреНрд╖реНрдп рдкрд░)ред

## рдкреБрдирдГрдХрдиреЗрдХреНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░

- рдмреИрдХрдСрдлрд╝ рдиреАрддрд┐: `web.reconnect`:
  - `initialMs`, `maxMs`, `factor`, `jitter`, `maxAttempts`ред
- рдпрджрд┐ maxAttempts рдкрд╣реБрдБрдЪ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╡реЗрдм рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рд░реБрдХ рдЬрд╛рддреА рд╣реИ (degraded)ред
- рд▓реЙрдЧрдЖрдЙрдЯреЗрдб => рд░реЛрдХреЗрдВ рдФрд░ рдкреБрдирдГ рд▓рд┐рдВрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ред

## рдХреЙрдиреНрдлрд╝рд┐рдЧ рддреНрд╡рд░рд┐рдд рдорд╛рдирдЪрд┐рддреНрд░

- `channels.whatsapp.dmPolicy` (DM рдиреАрддрд┐: pairing/allowlist/open/disabled)ред
- `channels.whatsapp.selfChatMode` (sameтАСphone рд╕реЗрдЯрдЕрдк; рдмреЙрдЯ рдЖрдкрдХрд╛ рд╡реНрдпрдХреНрддрд┐рдЧрдд WhatsApp рдирдВрдмрд░ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ)ред
- `channels.whatsapp.allowFrom` (DM allowlist). WhatsApp uses E.164 phone numbers (no usernames).
- `channels.whatsapp.mediaMaxMb` (рдЗрдирдмрд╛рдЙрдВрдб рдореАрдбрд┐рдпрд╛ рд╕реЗрд╡ рд╕реАрдорд╛)ред
- `channels.whatsapp.ackReaction` (рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрддрд┐ рдкрд░ рдСрдЯреЛтАСрд░рд┐рдПрдХреНрд╢рди: `{emoji, direct, group}`)ред
- `channels.whatsapp.accounts.<accountId>.*` (per-account settings + optional `authDir`).
- `channels.whatsapp.accounts.<accountId>.mediaMaxMb` (per-account inbound media cap).
- `channels.whatsapp.accounts.<accountId>.ackReaction` (per-account ack reaction override).
- `channels.whatsapp.groupAllowFrom` (рд╕рдореВрд╣ рдкреНрд░реЗрд╖рдХ allowlist)ред
- `channels.whatsapp.groupPolicy` (рд╕рдореВрд╣ рдиреАрддрд┐)ред
- `channels.whatsapp.historyLimit` / `channels.whatsapp.accounts.<accountId>.historyLimit` (group history context; `0` disables).
- `channels.whatsapp.dmHistoryLimit` (DM history limit in user turns). Per-user overrides: `channels.whatsapp.dms["<phone>"].historyLimit`.
- `channels.whatsapp.groups` (рд╕рдореВрд╣ allowlist + mention рдЧреЗрдЯрд┐рдВрдЧ рдбрд┐рдлрд╝реЙрд▓реНрдЯ; рд╕рднреА рдХреА рдЕрдиреБрдорддрд┐ рдХреЗ рд▓рд┐рдП `"*"` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ)
- `channels.whatsapp.actions.reactions` (WhatsApp рдЯреВрд▓ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЧреЗрдЯ рдХрд░реЗрдВ)ред
- `agents.list[].groupChat.mentionPatterns` (рдпрд╛ `messages.groupChat.mentionPatterns`)
- `messages.groupChat.historyLimit`
- `channels.whatsapp.messagePrefix` (inbound prefix; per-account: `channels.whatsapp.accounts.<accountId>.messagePrefix`; deprecated: `messages.messagePrefix`)
- `messages.responsePrefix` (рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдкреНрд░реАрдлрд╝рд┐рдХреНрд╕)
- `agents.defaults.mediaMaxMb`
- `agents.defaults.heartbeat.every`
- `agents.defaults.heartbeat.model` (рд╡реИрдХрд▓реНрдкрд┐рдХ рдУрд╡рд░рд░рд╛рдЗрдб)
- `agents.defaults.heartbeat.target`
- `agents.defaults.heartbeat.to`
- `agents.defaults.heartbeat.session`
- `agents.list[].heartbeat.*` (рдкреНрд░рддрд┐тАСрдПрдЬреЗрдВрдЯ рдУрд╡рд░рд░рд╛рдЗрдбреНрд╕)
- `session.*` (scope, idle, store, mainKey)
- `web.enabled` (false рд╣реЛрдиреЗ рдкрд░ рдЪреИрдирд▓ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдЕрдХреНрд╖рдо)
- `web.heartbeatSeconds`
- `web.reconnect.*`

## рд▓реЙрдЧреНрд╕ + рд╕рдорд╕реНрдпрд╛тАСрдирд┐рд╡рд╛рд░рдг

- рдЙрдкрдкреНрд░рдгрд╛рд▓рд┐рдпрд╛рдБ: `whatsapp/inbound`, `whatsapp/outbound`, `web-heartbeat`, `web-reconnect`ред
- рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓: `/tmp/openclaw/openclaw-YYYY-MM-DD.log` (рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп)ред
- рд╕рдорд╕реНрдпрд╛тАСрдирд┐рд╡рд╛рд░рдг рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛: [Gateway troubleshooting](/gateway/troubleshooting)ред

## рд╕рдорд╕реНрдпрд╛тАСрдирд┐рд╡рд╛рд░рдг (рддреНрд╡рд░рд┐рдд)

**рд▓рд┐рдВрдХ рдирд╣реАрдВ / QR рд▓реЙрдЧрд┐рди рдЖрд╡рд╢реНрдпрдХ**

- рд▓рдХреНрд╖рдг: `channels status` рдореЗрдВ `linked: false` рджрд┐рдЦрддрд╛ рд╣реИ рдпрд╛ тАЬNot linkedтАЭ рдЪреЗрддрд╛рд╡рдиреАред
- рд╕рдорд╛рдзрд╛рди: Gateway рд╣реЛрд╕реНрдЯ рдкрд░ `openclaw channels login` рдЪрд▓рд╛рдПрдБ рдФрд░ QR рд╕реНрдХреИрди рдХрд░реЗрдВ (WhatsApp тЖТ Settings тЖТ Linked Devices)ред

**рд▓рд┐рдВрдХреНрдб рд▓реЗрдХрд┐рди рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯреЗрдб / рдкреБрдирдГрдХрдиреЗрдХреНрдЯ рд▓реВрдк**

- рд▓рдХреНрд╖рдг: `channels status` рдореЗрдВ `running, disconnected` рджрд┐рдЦрддрд╛ рд╣реИ рдпрд╛ тАЬLinked but disconnectedтАЭ рдЪреЗрддрд╛рд╡рдиреАред
- Fix: `openclaw doctor` (or restart the gateway). If it persists, relink via `channels login` and inspect `openclaw logs --follow`.

**Bun рд░рдирдЯрд╛рдЗрдо**

- Bun is **not recommended**. WhatsApp (Baileys) and Telegram are unreliable on Bun.
  Run the gateway with **Node**. (See Getting Started runtime note.)
