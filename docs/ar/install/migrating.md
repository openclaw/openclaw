---
summary: "نقل (ترحيل) تثبيت OpenClaw من جهاز إلى آخر"
read_when:
  - أنت تنقل OpenClaw إلى حاسوب محمول أو خادم جديد
  - تريد الحفاظ على الجلسات والمصادقة وتسجيلات الدخول إلى القنوات (WhatsApp وغيرها)
title: "دليل الترحيل"
---

# ترحيل OpenClaw إلى جهاز جديد

يشرح هذا الدليل كيفية ترحيل Gateway لـ OpenClaw من جهاز إلى آخر **من دون إعادة تنفيذ التهيئة الأولية**.

الترحيل بسيط من حيث المبدأ:

- انسخ **دليل الحالة** (`$OPENCLAW_STATE_DIR`، الافتراضي: `~/.openclaw/`) — ويشمل التهيئة والمصادقة والجلسات وحالة القنوات.
- انسخ **مساحة العمل** الخاصة بك (`~/.openclaw/workspace/` افتراضيًا) — وتشمل ملفات الوكيل (الذاكرة، المطالبات، إلخ).

لكن توجد أخطاء شائعة تتعلق بـ **الملفات التعريفية** و**الأذونات** و**النسخ الجزئي**.

## قبل أن تبدأ (ما الذي تقوم بترحيله)

### 1. تحديد دليل الحالة

تستخدم معظم عمليات التثبيت الإعداد الافتراضي:

- **دليل الحالة:** `~/.openclaw/`

لكن قد يكون مختلفًا إذا كنت تستخدم:

- `--profile <name>` (غالبًا يصبح `~/.openclaw-<profile>/`)
- `OPENCLAW_STATE_DIR=/some/path`

إذا لم تكن متأكدًا، شغّل الأمر على الجهاز **القديم**:

```bash
openclaw status
```

ابحث عن إشارات إلى `OPENCLAW_STATE_DIR` / الملف التعريفي في المخرجات. إذا كنت تشغّل عدة Gateways، كرر ذلك لكل ملف تعريفي.

### 2. تحديد مساحة العمل

الإعدادات الافتراضية الشائعة:

- `~/.openclaw/workspace/` (مساحة العمل الموصى بها)
- مجلد مخصص أنشأته بنفسك

مساحة العمل هي المكان الذي توجد فيه ملفات مثل `MEMORY.md` و`USER.md` و`memory/*.md`.

### 3. فهم ما الذي سيتم الحفاظ عليه

إذا نسخت **كلا** دليل الحالة ومساحة العمل، فستحتفظ بـ:

- تهيئة Gateway (`openclaw.json`)
- الملفات التعريفية للمصادقة / مفاتيح API / رموز OAuth
- سجل الجلسات + حالة الوكيل
- حالة القنوات (مثل تسجيل الدخول/الجلسة في WhatsApp)
- ملفات مساحة العمل الخاصة بك (الذاكرة، ملاحظات Skills، إلخ)

إذا نسخت **فقط** مساحة العمل (مثلًا عبر Git)، فلن يتم الحفاظ على:

- الجلسات
- بيانات الاعتماد
- تسجيلات الدخول إلى القنوات

فهذه موجودة تحت `$OPENCLAW_STATE_DIR`.

## خطوات الترحيل (الموصى بها)

### الخطوة 0 — إنشاء نسخة احتياطية (على الجهاز القديم)

على الجهاز **القديم**، أوقف الـ Gateway أولًا حتى لا تتغير الملفات أثناء النسخ:

```bash
openclaw gateway stop
```

(اختياري لكنه موصى به) قم بأرشفة دليل الحالة ومساحة العمل:

```bash
# Adjust paths if you use a profile or custom locations
cd ~
tar -czf openclaw-state.tgz .openclaw

tar -czf openclaw-workspace.tgz .openclaw/workspace
```

إذا كان لديك عدة ملفات تعريف/أدلة حالة (مثل `~/.openclaw-main` و`~/.openclaw-work`)، فأرشف كل واحد منها.

### الخطوة 1 — تثبيت OpenClaw على الجهاز الجديد

على الجهاز **الجديد**، ثبّت CLI (وNode إذا لزم الأمر):

- انظر: [Install](/install)

في هذه المرحلة، لا بأس إذا أنشأت التهيئة الأولية دليل `~/.openclaw/` جديدًا — ستقوم بالكتابة فوقه في الخطوة التالية.

### الخطوة 2 — نسخ دليل الحالة + مساحة العمل إلى الجهاز الجديد

انسخ **كلا** التاليين:

- `$OPENCLAW_STATE_DIR` (الافتراضي `~/.openclaw/`)
- مساحة العمل الخاصة بك (الافتراضي `~/.openclaw/workspace/`)

أساليب شائعة:

- `scp` للأرشيفات واستخراجها
- `rsync -a` عبر SSH
- قرص خارجي

بعد النسخ، تأكد من:

- تضمين الأدلة المخفية (مثل `.openclaw/`)
- صحة ملكية الملفات للمستخدم الذي يشغّل الـ Gateway

### الخطوة 3 — تشغيل Doctor (الترحيلات + إصلاح الخدمات)

على الجهاز **الجديد**:

```bash
openclaw doctor
```

يُعد Doctor الأمر «الآمن والبسيط». فهو يصلح الخدمات، ويطبّق ترحيلات التهيئة، ويحذّر من حالات عدم التطابق.

ثم:

```bash
openclaw gateway restart
openclaw status
```

## البنادق الشائعة (وكيفية تجنبها)

### خطأ شائع: عدم تطابق الملف التعريفي / دليل الحالة

إذا كنت تشغّل الـ Gateway القديم باستخدام ملف تعريفي (أو `OPENCLAW_STATE_DIR`)، بينما يستخدم الـ Gateway الجديد ملفًا مختلفًا، فسترى أعراضًا مثل:

- عدم تطبيق تغييرات التهيئة
- قنوات مفقودة أو مسجّل خروجها
- سجل جلسات فارغ

الحل: شغّل الـ Gateway/الخدمة باستخدام **نفس** الملف التعريفي/دليل الحالة الذي قمت بترحيله، ثم أعد التشغيل:

```bash
openclaw doctor
```

### خطأ شائع: نسخ `openclaw.json` فقط

`openclaw.json` غير كافٍ. يخزّن العديد من الموفّرين الحالة تحت:

- `$OPENCLAW_STATE_DIR/credentials/`
- `$OPENCLAW_STATE_DIR/agents/<agentId>/...`

احرص دائمًا على ترحيل مجلد `$OPENCLAW_STATE_DIR` بالكامل.

### خطأ شائع: الأذونات / الملكية

إذا قمت بالنسخ كمستخدم root أو غيّرت المستخدمين، فقد يفشل الـ Gateway في قراءة بيانات الاعتماد/الجلسات.

الحل: تأكد من أن دليل الحالة + مساحة العمل مملوكان للمستخدم الذي يشغّل الـ Gateway.

### البندق: الهجرة بين الوسائط البعيدة/المحلية

- إذا كانت واجهتك (WebUI/TUI) تشير إلى Gateway **بعيد**، فإن المضيف البعيد هو من يملك مخزن الجلسات + مساحة العمل.
- ترحيل حاسوبك المحمول لن ينقل حالة الـ Gateway البعيد.

إذا كنت في وضع بعيد، فقم بترحيل **مضيف Gateway**.

### خطأ شائع: الأسرار في النسخ الاحتياطية

يحتوي `$OPENCLAW_STATE_DIR` على أسرار (مفاتيح API، رموز OAuth، بيانات اعتماد WhatsApp). تعامل مع النسخ الاحتياطية كأسرار إنتاج:

- المتجر مشفر
- تجنّب مشاركتها عبر قنوات غير آمنة
- قم بتدوير المفاتيح إذا اشتبهت في التعرّض

## قائمة التحقق

على الجهاز الجديد، تأكد من:

- أن `openclaw status` يُظهر أن الـ Gateway يعمل
- أن قنواتك لا تزال متصلة (مثلًا لا يتطلب WhatsApp إعادة الاقتران)
- أن لوحة التحكم تفتح وتعرض الجلسات الحالية
- أن ملفات مساحة العمل (الذاكرة، التهيئات) موجودة

## ذو صلة

- [Doctor](/gateway/doctor)
- [استكشاف أخطاء Gateway وإصلاحها](/gateway/troubleshooting)
- [أين يخزّن OpenClaw بياناته؟](/help/faq#where-does-openclaw-store-its-data)
