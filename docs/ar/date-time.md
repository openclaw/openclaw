---
summary: "التعامل مع التاريخ والوقت عبر الأظرفة والمطالبات والأدوات والموصلات"
read_when:
  - أنت تغيّر كيفية عرض الطوابع الزمنية على النموذج أو المستخدمين
  - أنت تستكشف أخطاء تنسيق الوقت في الرسائل أو مخرجات مطالبة النظام
title: "التاريخ والوقت"
---

# التاريخ والوقت

يعتمد OpenClaw افتراضيًا **الوقت المحلي للمضيف لطوابع النقل الزمنية**، و**المنطقة الزمنية للمستخدم فقط في مطالبة النظام**.
يتم الحفاظ على طوابع المزوّد الزمنية بحيث تحتفظ الأدوات بدلالاتها الأصلية (يتوفر الوقت الحالي عبر `session_status`).

## أظرفة الرسائل (محلي افتراضيًا)

تُغلَّف الرسائل الواردة بطابع زمني (بدقة الدقائق):

```
[Provider ... 2026-01-05 16:26 PST] message text
```

يكون هذا الطابع الزمني للأظرف **محليًا للمضيف افتراضيًا**، بغض النظر عن المنطقة الزمنية للمزوّد.

يمكنك تجاوز هذا السلوك:

```json5
{
  agents: {
    defaults: {
      envelopeTimezone: "local", // "utc" | "local" | "user" | IANA timezone
      envelopeTimestamp: "on", // "on" | "off"
      envelopeElapsed: "on", // "on" | "off"
    },
  },
}
```

- `envelopeTimezone: "utc"` يستخدم UTC.
- `envelopeTimezone: "local"` يستخدم المنطقة الزمنية للمضيف.
- `envelopeTimezone: "user"` يستخدم `agents.defaults.userTimezone` (مع الرجوع إلى منطقة المضيف عند التعذّر).
- استخدم منطقة زمنية صريحة من IANA (مثل `"America/Chicago"`) لمنطقة ثابتة.
- `envelopeTimestamp: "off"` يزيل الطوابع الزمنية المطلقة من رؤوس الأظرفة.
- `envelopeElapsed: "off"` يزيل لاحقات الزمن المنقضي (نمط `+2m`).

### أمثلة

**محلي (افتراضي):**

```
[WhatsApp +1555 2026-01-18 00:19 PST] hello
```

**المنطقة الزمنية للمستخدم:**

```
[WhatsApp +1555 2026-01-18 00:19 CST] hello
```

**تمكين الزمن المنقضي:**

```
[WhatsApp +1555 +30s 2026-01-18T05:19Z] follow-up
```

## مطالبة النظام: التاريخ والوقت الحاليان

إذا كانت المنطقة الزمنية للمستخدم معروفة، تتضمن مطالبة النظام قسمًا مخصصًا بعنوان
**التاريخ والوقت الحاليان** مع **المنطقة الزمنية فقط** (من دون ساعة/تنسيق وقت)
للحفاظ على استقرار التخزين المؤقت للمطالبة:

```
Time zone: America/Chicago
```

عندما يحتاج الوكيل إلى الوقت الحالي، استخدم أداة `session_status`؛ تتضمن بطاقة
الحالة سطرًا للطابع الزمني.

## أسطر أحداث النظام (محلي افتراضيًا)

تُسبَق أحداث النظام المُدرجة في سياق الوكيل بطابع زمني باستخدام
اختيار المنطقة الزمنية نفسه الخاص بأظرفة الرسائل (الافتراضي: محلي للمضيف).

```
System: [2026-01-12 12:19:17 PST] Model switched.
```

### تهيئة المنطقة الزمنية للمستخدم + التنسيق

```json5
{
  agents: {
    defaults: {
      userTimezone: "America/Chicago",
      timeFormat: "auto", // auto | 12 | 24
    },
  },
}
```

- `userTimezone` يعيّن **المنطقة الزمنية المحلية للمستخدم** لسياق المطالبة.
- `timeFormat` يتحكم في **عرض 12/24 ساعة** داخل المطالبة. يتبع `auto` تفضيلات نظام التشغيل.

## اكتشاف تنسيق الوقت (تلقائي)

عند `timeFormat: "auto"`، يفحص OpenClaw تفضيلات نظام التشغيل (macOS/Windows)
ويعود إلى تنسيق الإعدادات المحلية عند الحاجة. يتم **تخزين القيمة المكتشفة مؤقتًا لكل عملية**
لتجنّب استدعاءات النظام المتكررة.

## حمولات الأدوات + الموصلات (وقت المزوّد الخام + حقول مُوحّدة)

تعيد أدوات القنوات **طوابع زمنية أصلية خاصة بالمزوّد** وتضيف حقولًا مُوحّدة للاتساق:

- `timestampMs`: ميلي ثانية منذ الحقبة (UTC)
- `timestampUtc`: سلسلة ISO 8601 بتوقيت UTC

يتم الحفاظ على حقول المزوّد الخام بحيث لا يضيع أي شيء.

- Slack: سلاسل شبيهة بالحقبة من واجهة البرمجة
- Discord: طوابع زمنية ISO بتوقيت UTC
- Telegram/WhatsApp: طوابع زمنية رقمية/ISO خاصة بالمزوّد

إذا كنت بحاجة إلى الوقت المحلي، فحوّله لاحقًا باستخدام المنطقة الزمنية المعروفة.

## مستندات ذات صلة

- [مطالبة النظام](/concepts/system-prompt)
- [المناطق الزمنية](/concepts/timezone)
- [الرسائل](/concepts/messages)
