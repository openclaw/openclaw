---
summary: "وضع التنفيذ المرتفع وتوجيهات ‎/elevated‎"
read_when:
  - ضبط الإعدادات الافتراضية لوضع elevated، أو قوائم السماح، أو سلوك أوامر الشرطة المائلة
title: "وضع Elevated"
---

# وضع Elevated (توجيهات ‎/elevated‎)

## ما الذي يفعله

- `/elevated on` يعمل على مضيف Gateway ويُبقي موافقات التنفيذ (نفس `/elevated ask`).
- `/elevated full` يعمل على مضيف Gateway **ويُوافق تلقائيًا** على التنفيذ (يتجاوز موافقات التنفيذ).
- `/elevated ask` يعمل على مضيف Gateway لكنه يُبقي موافقات التنفيذ (نفس `/elevated on`).
- `on`/`ask` **لا** تفرض `exec.security=full`؛ إذ تظل سياسة الأمان/الاستعلام المهيّأة سارية.
- لا يغيّر السلوك إلا عندما يكون الوكيل **sandboxed** (وإلا فإن التنفيذ يعمل بالفعل على المضيف).
- صيغ التوجيه: `/elevated on|off|ask|full`، `/elev on|off|ask|full`.
- تُقبل فقط `on|off|ask|full`؛ وأي شيء آخر يُعيد تلميحًا ولا يغيّر الحالة.

## ما الذي يتحكم به (وما الذي لا يتحكم به)

- **بوابات الإتاحة**: `tools.elevated` هو خط الأساس العام. يمكن لـ `agents.list[].tools.elevated` تقييد elevated أكثر لكل وكيل (يجب أن يسمح كلاهما).
- **حالة لكل جلسة**: `/elevated on|off|ask|full` يضبط مستوى elevated لمفتاح الجلسة الحالية.
- **توجيه مضمن**: `/elevated on|ask|full` داخل الرسالة يطبّق على تلك الرسالة فقط.
- **المجموعات**: في محادثات المجموعات، لا تُحترم توجيهات elevated إلا عند ذكر الوكيل. الرسائل التي تحتوي أوامر فقط وتتجاوز متطلبات الذكر تُعامَل على أنها مذكورة.
- **تنفيذ المضيف**: يفرض elevated `exec` على مضيف Gateway؛ كما أن `full` يضبط أيضًا `security=full`.
- **الموافقات**: `full` يتجاوز موافقات التنفيذ؛ بينما `on`/`ask` يلتزمان بها عندما تتطلب قواعد قائمة السماح/الاستعلام ذلك.
- **وكلاء غير sandboxed**: بلا تأثير على الموقع؛ يؤثر فقط على البوابات، والتسجيل، والحالة.
- **تظل سياسة الأدوات سارية**: إذا كان `exec` مرفوضًا بواسطة سياسة الأداة، فلا يمكن استخدام elevated.
- **منفصل عن `/exec`**: `/exec` يضبط الإعدادات الافتراضية لكل جلسة للمرسلين المخوّلين ولا يتطلب elevated.

## ترتيب الحسم

1. التوجيه المضمن في الرسالة (ينطبق على تلك الرسالة فقط).
2. تجاوز الجلسة (يُضبط بإرسال رسالة تحتوي التوجيه فقط).
3. الإعداد الافتراضي العام (`agents.defaults.elevatedDefault` في التهيئة).

## تعيين إعداد افتراضي للجلسة

- أرسل رسالة تكون **فقط** التوجيه (يُسمح بالمسافات)، مثل `/elevated full`.
- يُرسل ردّ تأكيدي (`Elevated mode set to full...` / `Elevated mode disabled.`).
- إذا كان الوصول إلى elevated معطّلًا أو لم يكن المرسل ضمن قائمة السماح المعتمدة، يردّ التوجيه بخطأ قابل للتنفيذ ولا يغيّر حالة الجلسة.
- أرسل `/elevated` (أو `/elevated:`) دون وسيطة لعرض مستوى elevated الحالي.

## الإتاحة + قوائم السماح

- بوابة الميزة: `tools.elevated.enabled` (يمكن أن تكون معطّلة افتراضيًا عبر التهيئة حتى لو كان الكود يدعمها).
- قائمة سماح المرسل: `tools.elevated.allowFrom` مع قوائم سماح لكل موفّر (مثل `discord`، `whatsapp`).
- بوابة لكل وكيل: `agents.list[].tools.elevated.enabled` (اختيارية؛ لا يمكنها إلا مزيدًا من التقييد).
- قائمة سماح لكل وكيل: `agents.list[].tools.elevated.allowFrom` (اختيارية؛ عند تعيينها، يجب أن يطابق المرسل **كلًا من** قائمة السماح العامة وقائمة السماح لكل وكيل).
- بديل Discord: إذا حُذفت `tools.elevated.allowFrom.discord`، تُستخدم قائمة `channels.discord.dm.allowFrom` كبديل. اضبط `tools.elevated.allowFrom.discord` (حتى `[]`) للتجاوز. قوائم السماح لكل وكيل **لا** تستخدم البديل.
- يجب أن تجتاز جميع البوابات؛ وإلا يُعامَل elevated على أنه غير متاح.

## التسجيل + الحالة

- تُسجَّل استدعاءات التنفيذ المرتفع على مستوى المعلومات.
- تتضمن حالة الجلسة وضع elevated (مثل `elevated=ask`، `elevated=full`).
