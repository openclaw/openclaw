# QVerisBot æºç å®‰è£…ã€é…ç½®ä¸è¿è¡ŒæŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¦‚ä½•ä»æºç å®‰è£…ã€é…ç½®å’Œè¿è¡Œ QVerisBotï¼Œé‡ç‚¹æ”¯æŒ macOS å’Œ Linux ç³»ç»Ÿã€‚

---

## ç›®å½•

1. [é¡¹ç›®ç®€ä»‹](#1-é¡¹ç›®ç®€ä»‹)
2. [å®‰è£…ä¾èµ–](#2-å®‰è£…ä¾èµ–)
3. [é£ä¹¦è´¦å·å‡†å¤‡](#3-é£ä¹¦è´¦å·å‡†å¤‡)
4. [å…‹éš†ä»£ç ](#4-å…‹éš†ä»£ç )
5. [ç¼–è¯‘é¡¹ç›®](#5-ç¼–è¯‘é¡¹ç›®)
6. [é…ç½®](#6-é…ç½®)
7. [è¿è¡Œ](#7-è¿è¡Œ)
8. [ä½¿ç”¨è¯´æ˜](#8-ä½¿ç”¨è¯´æ˜)

---

## 1. é¡¹ç›®ç®€ä»‹

### 1.1 QVerisBot ç®€ä»‹

**QVerisBot** æ˜¯ç”± [QVeris AI](https://qveris.ai) å›¢é˜Ÿå¼€å‘çš„ä¸ªäºº AI åŠ©æ‰‹ï¼ŒåŸºäºå¼€æºé¡¹ç›® [OpenClaw](https://github.com/openclaw/openclaw) è¿›è¡Œäº†æ·±åº¦å®šåˆ¶å’Œå¢å¼ºã€‚QVerisBot ä¸ä»…ä»…æ˜¯ä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½å¤Ÿè°ƒç”¨å„ç±»ä¸“ä¸šå·¥å…·çš„å¤šåŠŸèƒ½ AI åŠ©æ‰‹ã€‚

**æ ¸å¿ƒç‰¹æ€§**ï¼š

- **QVeris ä¸‡èƒ½å·¥å…·ç®±**ï¼šé›†æˆ QVeris å¹³å°ï¼Œå¯æœç´¢å’Œè°ƒç”¨é‡‘èã€ç§‘ç ”ã€åŒ»ç–—ã€ä½“è‚²ç­‰é¢†åŸŸçš„ä¸“ä¸šå·¥å…·
- **é£ä¹¦åŸç”Ÿæ”¯æŒ**ï¼šæ·±åº¦é›†æˆé£ä¹¦ï¼ˆFeishu/Larkï¼‰ï¼Œç‰¹åˆ«é€‚åˆä¸­å›½ä¼ä¸šç”¨æˆ·
- **å¤šæ¸ é“æ¥å…¥**ï¼šæ”¯æŒé£ä¹¦ã€X (Twitter)ã€WhatsAppã€Telegramã€Slackã€Discordã€Signal ç­‰å¤šç§æ¶ˆæ¯å¹³å°
- **æœ¬åœ°éƒ¨ç½²**ï¼šåœ¨ä½ è‡ªå·±çš„è®¾å¤‡ä¸Šè¿è¡Œï¼Œæ•°æ®å®‰å…¨å¯æ§
- **å¤§æ¨¡å‹ä»£ç†**ï¼šæ”¯æŒ HTTP ä»£ç†ï¼Œæ–¹ä¾¿åœ¨ç½‘ç»œå—é™ç¯å¢ƒä¸­ä½¿ç”¨

**GitHub ä»“åº“**ï¼š[https://github.com/QVerisAI/QVerisBot](https://github.com/QVerisAI/QVerisBot)

### 1.2 QVeris ä¸‡èƒ½å·¥å…·ç®±

QVerisBot é›†æˆäº† [QVeris](https://qveris.ai) å¹³å°çš„ä¸‡èƒ½å·¥å…·ç®±ï¼Œå¯ä»¥æœç´¢å’Œè°ƒç”¨å„ç±»å¤–éƒ¨å¯ä¿¡å·¥å…·ï¼Œå°†åŠ©æ‰‹ä»ç®€å•çš„èŠå¤©æœºå™¨äººå‡çº§ä¸ºå¤šåŠŸèƒ½ä¸“ä¸šåŠ©æ‰‹ã€‚æ”¯æŒçš„é¢†åŸŸåŒ…æ‹¬ï¼š

- **é‡‘èæ•°æ®**ï¼šè‚¡ç¥¨è¡Œæƒ…ã€è´¢åŠ¡æŠ¥è¡¨ã€å¸‚åœºåˆ†æ
- **ç§‘ç ”å·¥å…·**ï¼šè®ºæ–‡æ£€ç´¢ã€æ•°æ®åˆ†æã€å®éªŒè®¡ç®—
- **åŒ»ç–—å¥åº·**ï¼šåŒ»å­¦çŸ¥è¯†åº“ã€è¯ç‰©ä¿¡æ¯æŸ¥è¯¢
- **ä½“è‚²æ•°æ®**ï¼šèµ›äº‹ä¿¡æ¯ã€çƒå‘˜æ•°æ®ã€æ¯”åˆ†æŸ¥è¯¢
- **ç½‘ç»œæœç´¢**ï¼šæ™ºèƒ½æœç´¢ã€æ–°é—»èšåˆã€å®æ—¶ä¿¡æ¯

QVeris å·¥å…·é€šè¿‡ä¸¤ä¸ªæ ¸å¿ƒ API å®ç°ï¼š
- `qveris_search`ï¼šä½¿ç”¨è‡ªç„¶è¯­è¨€æœç´¢å¯ç”¨å·¥å…·
- `qveris_execute`ï¼šæ‰§è¡ŒæŒ‡å®šå·¥å…·å¹¶è·å–ç»“æœ

#### 1.2.1 QVeris å¿«é€Ÿå¼€é€šæŒ‡å—ï¼ˆ5 åˆ†é’Ÿï¼‰

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¼€é€š QVeris å¹¶åœ¨ QVerisBot ä¸­ä½¿ç”¨ï¼š

**ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œ QVeris è´¦å·**

1. è®¿é—® [qveris.ai](https://qveris.ai)ï¼Œç‚¹å‡» **æ³¨å†Œ / Sign Up**
2. ä½¿ç”¨é‚®ç®±æ³¨å†Œæˆ–ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆGoogle/GitHubï¼‰
3. å®Œæˆé‚®ç®±éªŒè¯

**ç¬¬äºŒæ­¥ï¼šç”Ÿæˆ API Key**

1. ç™»å½• [QVeris æ§åˆ¶å°](https://qveris.ai/dashboard)
2. è¿›å…¥ **API Keys** é¡µé¢
3. ç‚¹å‡» **åˆ›å»ºæ–° API Key**
4. å¤åˆ¶å¹¶å®‰å…¨ä¿å­˜ä½ çš„ API Keyï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰

**ç¬¬ä¸‰æ­¥ï¼šè´­ä¹° Creditsï¼ˆå…è´¹é¢åº¦ç”¨å°½åï¼‰**

QVeris æä¾›å…è´¹é¢åº¦ä¾›æµ‹è¯•ä½¿ç”¨ã€‚ç”Ÿäº§ç¯å¢ƒéœ€è¦ï¼š

1. è¿›å…¥æ§åˆ¶å°çš„ **Billing / è´¦å•** é¡µé¢
2. é€‰æ‹©å¥—é¤æˆ–å……å€¼ Credits
3. æ¯æ¬¡å·¥å…·è°ƒç”¨æ¶ˆè€— Creditsï¼ˆä¸åŒå·¥å…·ä»·æ ¼ä¸åŒï¼‰

**ç¬¬å››æ­¥ï¼šé…ç½® QVerisBot**

åœ¨ `~/.openclaw/openclaw.json` ä¸­æ·»åŠ ï¼š

```json
{
  "tools": {
    "qveris": {
      "enabled": true,
      "apiKey": "qv_ä½ çš„APIå¯†é’¥"
    }
  }
}
```

æˆ–é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®ï¼ˆæ¨èæ•æ„Ÿä¿¡æ¯ä½¿ç”¨æ­¤æ–¹å¼ï¼‰ï¼š

```bash
export QVERIS_API_KEY="qv_ä½ çš„APIå¯†é’¥"
```

**ç¬¬äº”æ­¥ï¼šéªŒè¯é…ç½®**

é‡å¯ QVerisBot å¹¶æµ‹è¯•ï¼š

```bash
# é‡å¯ç½‘å…³
pnpm openclaw gateway --port 18789 --verbose

# æµ‹è¯• QVeris å·¥å…·
pnpm openclaw agent --message "ä½¿ç”¨ QVeris æœç´¢æ¯”ç‰¹å¸ä»·æ ¼ç›¸å…³çš„å·¥å…·"
```

> âš¡ **æç¤º**ï¼šQVeris è¯¦ç»†é…ç½®é€‰é¡¹ï¼ˆè¶…æ—¶æ—¶é—´ã€å“åº”å¤§å°é™åˆ¶ç­‰ï¼‰è¯·å‚è€ƒ [6.3.5 QVeris é…ç½®](#635-qveris-é…ç½®)ã€‚

### 1.3 é£ä¹¦æ·±åº¦æ”¯æŒ

QVerisBot åŸç”Ÿæ”¯æŒé£ä¹¦ï¼ˆFeishu/Larkï¼‰ï¼Œç‰¹åˆ«é€‚åˆä¸­å›½ä¼ä¸šç”¨æˆ·ï¼š

- **ç¾¤èŠæ”¯æŒ**ï¼šæ”¯æŒé£ä¹¦ç¾¤ç»„æ¶ˆæ¯å¤„ç†
- **WebSocket é•¿è¿æ¥**ï¼šæ— éœ€å…¬ç½‘ IPï¼Œæœ¬åœ°å¼€å‘ç¯å¢ƒå‹å¥½
- **æ¶ˆæ¯æ’¤å›å¤„ç†**ï¼šæ”¯æŒæ¶ˆæ¯æ’¤å›äº‹ä»¶ï¼Œè‡ªåŠ¨åœæ­¢æ­£åœ¨å¤„ç†çš„ä»»åŠ¡ *(ğŸš§ å¼€å‘ä¸­)*
- **å¯Œæ–‡æœ¬æ¶ˆæ¯**ï¼šæ”¯æŒ Markdown æ ¼å¼çš„æ¶ˆæ¯æ¸²æŸ“ï¼ˆrenderModeï¼šauto/raw/cardï¼‰
- **é£ä¹¦åŠ¨ä½œ**ï¼šå¯é…ç½® reactionsã€sendMessageã€deleteMessageã€editMessage
- **é£ä¹¦æ–‡æ¡£/çŸ¥è¯†åº“/äº‘ç›˜å·¥å…·**ï¼šfeishu_docã€feishu_wikiã€feishu_driveã€feishu_permï¼ˆå¯æŒ‰è´¦å·å¼€å…³ï¼‰
- **å›¾ç‰‡æ¶ˆæ¯**ï¼šæ”¯æŒå‘é€å’Œæ¥æ”¶å›¾ç‰‡ *(ğŸš§ å¼€å‘ä¸­)*

### 1.4 X (Twitter) æ¸ é“ä¸ x-actions

QVerisBot é€šè¿‡ X æ‰©å±•æ”¯æŒ X (Twitter) æ¸ é“ä¸ **x-actions** æŠ€èƒ½ï¼š

- **X æ¸ é“**ï¼šè½®è¯¢ @ æåŠï¼Œåœ¨ X ä¸Š @ æœºå™¨äººåå¯è·å¾—å›å¤ï¼›éœ€é…ç½® API å‡­è¯ï¼ˆconsumerKey/consumerSecretã€accessToken/accessTokenSecretï¼‰ã€‚
- **x-actions**ï¼šé€šè¿‡ message å·¥å…·æ‰§è¡Œ x-followã€x-unfollowã€x-likeã€x-unlikeã€x-replyã€x-dmï¼Œæ— éœ€æµè§ˆå™¨ã€‚
- **é£ä¹¦å†…æ“ä½œ X**ï¼šåœ¨é£ä¹¦å†…å¯ç”¨è‡ªç„¶è¯­è¨€ï¼ˆå¦‚ã€Œå¸®æˆ‘å…³æ³¨ @xxxã€ï¼‰æˆ–æ–œæ å‘½ä»¤ï¼ˆå¦‚ `/x follow @xxx`ã€`/x like <æ¨æ–‡é“¾æ¥>`ï¼‰è§¦å‘ X æ“ä½œï¼›éœ€é…ç½® `channels.feishu.xActionsAllowFrom`ã€‚
- **æƒé™åˆ†ç¦»**ï¼šæåŠç™½åå•ï¼ˆallowFrom / xActionsAllowFromï¼‰ä¸ X æ“ä½œç™½åå•ï¼ˆactionsAllowFrom / xActionsAllowFromï¼‰ç›¸äº’ç‹¬ç«‹ï¼Œå‹¿æ··ç”¨ã€‚

### 1.5 å¤§æ¨¡å‹ä»£ç†æ”¯æŒ

æ”¯æŒä¸ºæ‰€æœ‰ LLM API è°ƒç”¨é…ç½® HTTP ä»£ç†ï¼Œæ–¹ä¾¿åœ¨ç½‘ç»œå—é™ç¯å¢ƒä¸­ä½¿ç”¨ï¼š

```json
{
  "models": {
    "proxy": "http://user:pass@proxy:8080"
  }
}
```

### 1.6 OpenClaw åŸºç¡€å¹³å°

QVerisBot åŸºäº [OpenClaw](https://github.com/openclaw/openclaw)ï¼ˆå‰èº«ä¸º Clawdbotï¼‰å¼€å‘ï¼Œç»§æ‰¿äº†å…¶å¼ºå¤§çš„å¹³å°èƒ½åŠ›ï¼š

- **æœ¬åœ°ä¼˜å…ˆçš„ç½‘å…³æ¶æ„**ï¼šå•ä¸€æ§åˆ¶å¹³é¢ç®¡ç†ä¼šè¯ã€æ¸ é“ã€å·¥å…·å’Œäº‹ä»¶
- **å¤šæ¸ é“æ”¯æŒ**ï¼šè¿æ¥å¤šç§å³æ—¶é€šè®¯å¹³å°
- **å¤šä»£ç†è·¯ç”±**ï¼šå°†å…¥ç«™æ¶ˆæ¯è·¯ç”±åˆ°éš”ç¦»çš„ä»£ç†ï¼ˆç‹¬ç«‹å·¥ä½œåŒº + ä¼šè¯ï¼‰
- **è¯­éŸ³äº¤äº’**ï¼šæ”¯æŒ macOS/iOS/Android çš„è¯­éŸ³å”¤é†’å’Œå¯¹è¯æ¨¡å¼
- **å®æ—¶ç”»å¸ƒ**ï¼šä»£ç†é©±åŠ¨çš„å¯è§†åŒ–å·¥ä½œåŒº
- **ä¸€æµçš„å·¥å…·æ”¯æŒ**ï¼šæµè§ˆå™¨æ§åˆ¶ã€ç”»å¸ƒã€èŠ‚ç‚¹ã€å®šæ—¶ä»»åŠ¡ç­‰

---

## 2. å®‰è£…ä¾èµ–

### 2.1 ç³»ç»Ÿè¦æ±‚

| ç»„ä»¶ | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ |
|------|---------|---------|
| Node.js | 22.12.0 | 22.x LTS |
| Python | 3.12 | 3.12+ |
| pnpm | 10.x | 10.23.0+ |
| Git | 2.x | æœ€æ–°ç‰ˆ |

### 2.2 macOS å®‰è£…

#### 2.2.1 å®‰è£… Homebrewï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

#### 2.2.2 å®‰è£… Node.js 22+

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨ Homebrew
brew install node@22
echo 'export PATH="/opt/homebrew/opt/node@22/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc

# æ–¹å¼äºŒï¼šä½¿ç”¨ nvmï¼ˆæ¨èï¼‰
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.0/install.sh | bash
source ~/.zshrc
nvm install 22
nvm use 22
nvm alias default 22
```

#### 2.2.3 å®‰è£… pnpm

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰
curl -fsSL https://get.pnpm.io/install.sh | sh -
source ~/.zshrc

# æ–¹å¼äºŒï¼šä½¿ç”¨ npm å®‰è£…
npm install -g pnpm@latest

# æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Homebrew
brew install pnpm

# éªŒè¯å®‰è£…
pnpm --version
```

#### 2.2.4 å®‰è£… Python 3.12+

```bash
# ä½¿ç”¨ Homebrew
brew install python@3.12

# éªŒè¯å®‰è£…
python3 --version
```

### 2.3 Linux å®‰è£…

ä»¥ä¸‹ç¤ºä¾‹åŸºäº Ubuntu 24.04 LTS / Debian 12ï¼Œå…¶ä»–å‘è¡Œç‰ˆè¯·å‚è€ƒå¯¹åº”çš„åŒ…ç®¡ç†å™¨å‘½ä»¤ã€‚

#### 2.3.1 æ›´æ–°ç³»ç»ŸåŒ…

```bash
sudo apt update && sudo apt upgrade -y
```

#### 2.3.2 å®‰è£… Node.js 22+

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨ NodeSource ä»“åº“
curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -
sudo apt install -y nodejs

# æ–¹å¼äºŒï¼šä½¿ç”¨ nvmï¼ˆæ¨èï¼‰
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.0/install.sh | bash
source ~/.bashrc
nvm install 22
nvm use 22
nvm alias default 22

# éªŒè¯å®‰è£…
node --version  # åº”æ˜¾ç¤º v22.x.x
npm --version
```

#### 2.3.3 å®‰è£… pnpm

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰
curl -fsSL https://get.pnpm.io/install.sh | sh -
source ~/.bashrc

# æ–¹å¼äºŒï¼šä½¿ç”¨ npm å®‰è£…
npm install -g pnpm@latest

# éªŒè¯å®‰è£…
pnpm --version
```

#### 2.3.4 å®‰è£… Python 3.12+

```bash
# Ubuntu 24.04 è‡ªå¸¦ Python 3.12
# å¯¹äºæ—§ç‰ˆæœ¬ç³»ç»Ÿï¼Œä½¿ç”¨ deadsnakes PPA
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install -y python3.12 python3.12-venv python3.12-dev python3-pip

# éªŒè¯å®‰è£…
python3.12 --version
```

#### 2.3.5 å®‰è£…å…¶ä»–å¿…è¦ä¾èµ–

```bash
# ç¼–è¯‘å·¥å…·ï¼ˆéƒ¨åˆ† npm åŒ…éœ€è¦ï¼‰
sudo apt install -y build-essential

# Git
sudo apt install -y git
```

### 2.4 Python åº“ä¾èµ–

QVerisBot çš„ Python æµ‹è¯•è„šæœ¬å’ŒæŠ€èƒ½ï¼ˆskillsï¼‰ä½¿ç”¨ä»¥ä¸‹åº“ï¼š

| åº“å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| requests | æœ€æ–° | HTTP è¯·æ±‚ï¼ˆé£ä¹¦ API æµ‹è¯•ï¼‰ |
| matplotlib | æœ€æ–° | æ•°æ®å¯è§†åŒ–ã€å›¾è¡¨ç”Ÿæˆ |
| fastapi | >=0.110.0 | æŠ€èƒ½æœåŠ¡æ¡†æ¶ |
| httpx | >=0.27.0 | å¼‚æ­¥ HTTP å®¢æˆ·ç«¯ |
| uvicorn | >=0.29.0 | ASGI æœåŠ¡å™¨ |
| pytest | >=8.0.0 | æµ‹è¯•æ¡†æ¶ï¼ˆå¼€å‘ä¾èµ–ï¼‰ |

å®‰è£…æ–¹å¼ï¼š

```bash
# å…¨å±€å®‰è£…å¸¸ç”¨åº“
pip3 install requests matplotlib

# æŠ€èƒ½å¼€å‘ä¾èµ–ï¼ˆå¯é€‰ï¼‰
pip3 install fastapi httpx uvicorn pytest
```

---

## 3. é£ä¹¦è´¦å·å‡†å¤‡

é£ä¹¦é…ç½®éœ€è¦åˆ†ä¸¤æ­¥å®Œæˆï¼š
1. **ç¬¬ä¸€æ­¥**ï¼šå®Œæˆé™¤äº‹ä»¶é…ç½®ä¹‹å¤–çš„æ‰€æœ‰é…ç½®
2. **ç¬¬äºŒæ­¥**ï¼šå¯åŠ¨ QVerisBot åï¼Œå†é…ç½®äº‹ä»¶è®¢é˜…

### 3.1 ç”³è¯·é£ä¹¦å¼€å‘è€…è´¦å·

1. è®¿é—® [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/)
2. ä½¿ç”¨é£ä¹¦è´¦å·ç™»å½•ï¼ˆéœ€è¦ä¼ä¸šç®¡ç†å‘˜æƒé™æˆ–ä¸ªäººå¼€å‘è€…è´¦å·ï¼‰
3. è¿›å…¥å¼€å‘è€…åå°

### 3.2 åˆ›å»ºåº”ç”¨

1. ç‚¹å‡» **åˆ›å»ºåº”ç”¨** â†’ é€‰æ‹© **ä¼ä¸šè‡ªå»ºåº”ç”¨**
2. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
   - **åº”ç”¨åç§°**ï¼šå¦‚ "QVerisBot"
   - **åº”ç”¨æè¿°**ï¼šAI æ™ºèƒ½åŠ©æ‰‹
   - **åº”ç”¨å›¾æ ‡**ï¼šä¸Šä¼ ä¸€ä¸ªå›¾æ ‡
3. ç‚¹å‡» **ç¡®å®šåˆ›å»º**

### 3.3 æ·»åŠ æœºå™¨äººèƒ½åŠ›

1. è¿›å…¥åº”ç”¨è¯¦æƒ…é¡µ
2. åœ¨å·¦ä¾§èœå•é€‰æ‹© **æ·»åŠ åº”ç”¨èƒ½åŠ›**
3. ç‚¹å‡» **æœºå™¨äºº** å¡ç‰‡çš„ **æ·»åŠ èƒ½åŠ›**
4. é…ç½®æœºå™¨äººä¿¡æ¯ï¼š
   - **Bot Name**ï¼šæœºå™¨äººåœ¨èŠå¤©ä¸­æ˜¾ç¤ºçš„åç§°
   - **Bot Description**ï¼šæœºå™¨äººæè¿°

### 3.4 é…ç½®æƒé™

åœ¨ **æƒé™ç®¡ç†** é¡µé¢ï¼Œæ·»åŠ ä»¥ä¸‹æƒé™ï¼š

#### æ¶ˆæ¯ä¸ç¾¤ç»„æƒé™
| æƒé™åç§° | æƒé™æ ‡è¯† | è¯´æ˜ |
|---------|---------|------|
| è·å–ä¸å‘é€å•èŠã€ç¾¤ç»„æ¶ˆæ¯ | im:message | æ”¶å‘æ¶ˆæ¯ |
| è·å–ç¾¤ç»„ä¿¡æ¯ | im:chat:readonly | è¯»å–ç¾¤ä¿¡æ¯ |
| è·å–ä¸æ›´æ–°ç¾¤ç»„ä¿¡æ¯ | im:chat | ç¾¤ç»„æ“ä½œ |
| ä»¥åº”ç”¨çš„èº«ä»½å‘æ¶ˆæ¯ | im:message:send_as_bot | æœºå™¨äººå‘æ¶ˆæ¯ |
| è·å–ç”¨æˆ·å‘ç»™æœºå™¨äººçš„å•èŠæ¶ˆæ¯ | im:message.p2p_msg:readonly | æ¥æ”¶ç§èŠ |
| è·å–ç¾¤ç»„ä¸­æ‰€æœ‰æ¶ˆæ¯ | im:message.group_msg:readonly | æ¥æ”¶ç¾¤æ¶ˆæ¯ |
| è·å–æ¶ˆæ¯ä¸­ @ æœºå™¨äººçš„ç”¨æˆ· | im:message.mention:readonly | è·å– @ ä¿¡æ¯ |
| ä¸Šä¼ å›¾ç‰‡æˆ–æ–‡ä»¶ | im:resource | å‘é€å›¾ç‰‡ |

#### ç”¨æˆ·ä¿¡æ¯æƒé™ï¼ˆå¯é€‰ï¼‰
| æƒé™åç§° | æƒé™æ ‡è¯† | è¯´æ˜ |
|---------|---------|------|
| è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ | contact:user.base:readonly | æ˜¾ç¤ºç”¨æˆ·å |

### 3.5 è·å–å‡­è¯

åœ¨ **å‡­è¯ä¸åŸºç¡€ä¿¡æ¯** é¡µé¢è·å–ï¼š

- **App ID**ï¼šç±»ä¼¼ `cli_xxxxxxxxxxxxxxxxxx`
- **App Secret**ï¼šç‚¹å‡»æŸ¥çœ‹è·å–å¯†é’¥

> âš ï¸ **å®‰å…¨æç¤º**ï¼šApp Secret æ˜¯æ•æ„Ÿä¿¡æ¯ï¼Œè¯·å¦¥å–„ä¿ç®¡ï¼Œä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚

### 3.6 å‘å¸ƒåº”ç”¨ï¼ˆç¬¬ä¸€æ­¥å®Œæˆåï¼‰

1. è¿›å…¥ **ç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒ**
2. åˆ›å»ºç‰ˆæœ¬
3. **è®¾ç½®å¯ç”¨èŒƒå›´**ï¼š
   - åœ¨å‘å¸ƒé…ç½®ä¸­ï¼Œéœ€è¦é€‰æ‹© **æœºå™¨äººçš„å¯ç”¨èŒƒå›´**
   - ç‚¹å‡» **æ·»åŠ ç”¨æˆ·** æˆ– **æ·»åŠ éƒ¨é—¨**ï¼Œé€‰æ‹©å¯ä»¥ä½¿ç”¨è¯¥æœºå™¨äººçš„ç”¨æˆ·
   - âš ï¸ **é‡è¦**ï¼šåªæœ‰è¢«æ·»åŠ åˆ°å¯ç”¨èŒƒå›´å†…çš„ç”¨æˆ·æ‰èƒ½å°†æœºå™¨äººæ·»åŠ åˆ°ç¾¤èŠä¸­
4. æäº¤å®¡æ ¸
5. ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡
6. å‘å¸ƒåº”ç”¨

> æ³¨æ„ï¼šåº”ç”¨éœ€è¦å‘å¸ƒåæ‰èƒ½æ­£å¸¸æ¥æ”¶æ¶ˆæ¯ã€‚å¼€å‘é˜¶æ®µå¯ä»¥å…ˆåœ¨æµ‹è¯•ä¼ä¸šä¸­ä½¿ç”¨ã€‚

### 3.7 äº‹ä»¶è®¢é˜…é…ç½®ï¼ˆç¬¬äºŒæ­¥ï¼Œéœ€è¦å…ˆå¯åŠ¨ QVerisBotï¼‰

> âš ï¸ **é‡è¦**ï¼šæ­¤æ­¥éª¤éœ€è¦åœ¨ QVerisBot æˆåŠŸå¯åŠ¨åæ‰èƒ½å®Œæˆï¼Œå› ä¸º QVerisBot ä¼šå¯åŠ¨é£ä¹¦éœ€è¦çš„ WebSocket é•¿è¿æ¥ç›‘å¬è¿›ç¨‹ã€‚

åœ¨ **äº‹ä»¶è®¢é˜…** é¡µé¢ï¼š

1. **é€‰æ‹©è®¢é˜…æ–¹å¼**ï¼šé€‰æ‹© **ä½¿ç”¨é•¿è¿æ¥æ¥æ”¶äº‹ä»¶ï¼ˆæ¨èï¼‰**
   - é•¿è¿æ¥æ¨¡å¼æ— éœ€å…¬ç½‘ IPï¼Œæœ¬åœ°å¼€å‘æ›´æ–¹ä¾¿
   - QVerisBot é»˜è®¤ä½¿ç”¨æ­¤æ¨¡å¼

2. **æ·»åŠ äº‹ä»¶**ï¼š
   | äº‹ä»¶åç§° | äº‹ä»¶æ ‡è¯† |
   |---------|---------|
   | æ¥æ”¶æ¶ˆæ¯ | im.message.receive_v1 |
   | æ¶ˆæ¯å·²è¯» | im.message.message_read_v1 |
   | æ¶ˆæ¯æ’¤å› | im.message.recalled_v1 |
   | æœºå™¨äººè¿›ç¾¤ | im.chat.member.bot.added_v1 |
   | ç”¨æˆ·è¿›å…¥æœºå™¨äººå•èŠ | im.chat.access_event.bot_p2p_chat_entered_v1 |

3. ä¿å­˜é…ç½®

---

## 4. å…‹éš†ä»£ç 

```bash
# å…‹éš† QVerisBot ä»“åº“
git clone https://github.com/QVerisAI/QVerisBot.git
cd QVerisBot
```

---

## 5. ç¼–è¯‘é¡¹ç›®

### 5.1 å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰ Node.js ä¾èµ–ï¼ˆåŒ…æ‹¬æ‰©å±•ï¼‰
pnpm install
```

### 5.2 æ„å»º UIï¼ˆé¦–æ¬¡è¿è¡Œéœ€è¦ï¼‰

```bash
pnpm ui:build
```

### 5.3 ç¼–è¯‘ TypeScript

```bash
pnpm build
```

### 5.4 éªŒè¯ç¼–è¯‘ç»“æœ

```bash
# æ£€æŸ¥ dist ç›®å½•æ˜¯å¦ç”Ÿæˆ
ls -la dist/

# éªŒè¯ CLI å¯æ‰§è¡Œ
pnpm openclaw --version
```

### 5.5 å¼€å‘æ¨¡å¼ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦åœ¨å¼€å‘æ—¶è‡ªåŠ¨é‡æ–°ç¼–è¯‘ï¼š

```bash
# ç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡å¯ç½‘å…³
pnpm gateway:watch
```

---

## 6. é…ç½®

### 6.1 é…ç½®æ–‡ä»¶ä½ç½®

QVerisBot çš„é…ç½®æ–‡ä»¶ä½äº `~/.openclaw/openclaw.json`ã€‚

```bash
# åˆ›å»ºé…ç½®ç›®å½•
mkdir -p ~/.openclaw
```

### 6.2 å®Œæ•´é…ç½®ç¤ºä¾‹

åˆ›å»ºé…ç½®æ–‡ä»¶ `~/.openclaw/openclaw.json`ï¼š

```json
{
  "agents": {
    "defaults": {
      "model": { "primary": "anthropic/claude-opus-4-5" },
      "workspace": "~/clawd"
    }
  },
  "gateway": {
    "port": 18789,
    "bind": "loopback"
  },
  "channels": {
    "feishu": {
      "enabled": true,
      "appId": "cli_xxxxxxxxxxxxxxxxxx",
      "appSecret": "xxxxxxxxxxxxxxxxxxxxxxxxxxxx",
      "eventMode": "websocket",
      "startupChatId": "oc_xxxxxxxxxxxxxxxxxxxxxxxxxx",
      "dmPolicy": "open",
      "groupPolicy": "open",
      "promptSuffix": "è¯·ç”¨ä¸­æ–‡å›ç­”ã€‚"
    },
    "x": {
      "enabled": true,
      "consumerKey": "your-consumer-key",
      "consumerSecret": "your-consumer-secret",
      "accessToken": "your-access-token",
      "accessTokenSecret": "your-access-token-secret",
      "allowFrom": [],
      "actionsAllowFrom": []
    }
  },
  "tools": {
    "qveris": {
      "enabled": true,
      "apiKey": "your-qveris-api-key"
    },
    "web": {
      "search": {
        "enabled": true,
        "provider": "qveris",
        "qveris": {
          "toolId": "xiaosu.smartsearch.search.retrieve.v2.6c50f296_domestic"
        }
      },
      "fetch": { "enabled": true }
    }
  },
  "models": {
    "proxy": "http://127.0.0.1:7890"
  }
}
```

### 6.3 é…ç½®é¡¹è¯¦è§£

#### 6.3.1 Agent é…ç½®

Agent é»˜è®¤é…ç½®ä½äº `agents.defaults`ï¼ŒåŒ…æ‹¬æ¨¡å‹ã€å·¥ä½œåŒºç­‰ï¼š

```json
{
  "agents": {
    "defaults": {
      "model": { "primary": "anthropic/claude-opus-4-5" },
      "workspace": "~/clawd"
    }
  }
}
```

æ¨¡å‹æ ¼å¼ä¸º `provider/model-name`ï¼Œä¾‹å¦‚ï¼š
- `anthropic/claude-opus-4-5`
- `openai/gpt-4o`
- `google/gemini-2.0-flash`

`model` å¯é…ç½®ä¸»æ¨¡å‹ä¸å›é€€ï¼š`"model": { "primary": "anthropic/claude-opus-4-5", "fallbacks": ["openai/gpt-4o"] }`ã€‚

#### 6.3.2 é£ä¹¦é…ç½®

```json
{
  "channels": {
    "feishu": {
      "enabled": true,
      "appId": "cli_xxx",
      "appSecret": "xxx",
      "eventMode": "websocket",
      "startupChatId": "oc_xxx",
      "allowOnlyStartupChats": false,
      "dmPolicy": "open",
      "groupPolicy": "open",
      "requireMention": true,
      "groups": {
        "oc_xxx": {
          "requireMention": false,
          "systemPrompt": "ä½ æ˜¯è¿™ä¸ªç¾¤ç»„çš„ä¸“å±åŠ©æ‰‹"
        }
      }
    }
  }
}
```

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|-------|------|--------|------|
| enabled | boolean | true | æ˜¯å¦å¯ç”¨é£ä¹¦æ¸ é“ |
| appId | string | - | é£ä¹¦åº”ç”¨ App ID |
| appSecret | string | - | é£ä¹¦åº”ç”¨ App Secret |
| eventMode | string | "websocket" | äº‹ä»¶æ¥æ”¶æ¨¡å¼ï¼Œæ¨èä½¿ç”¨ "websocket" |
| startupChatId | string/string[] | - | **å¯åŠ¨é€šçŸ¥ç¾¤ç»„ ID**ï¼ˆè¯¦è§ä¸‹æ–¹è¯´æ˜ï¼‰ |
| allowOnlyStartupChats | boolean | false | æ˜¯å¦åªå…è®¸ startupChatId ä¸­çš„ç¾¤ç»„ |
| dmPolicy | string | "pairing" | ç§èŠç­–ç•¥ï¼šopen/pairing/allowlist/disabled |
| groupPolicy | string | "open" | ç¾¤èŠç­–ç•¥ï¼šopen/allowlist/disabled |
| requireMention | boolean | true | ç¾¤èŠæ˜¯å¦éœ€è¦ @æœºå™¨äºº |
| allowFrom | string[] | - | å…è®¸çš„ç”¨æˆ· ID åˆ—è¡¨ï¼ˆç§èŠ/æåŠæƒé™ï¼‰ |
| xActionsAllowFrom | string[] | - | **X æ“ä½œç™½åå•**ï¼šå…è®¸è§¦å‘ X æ“ä½œï¼ˆå…³æ³¨/ç‚¹èµ/å›å¤/ç§ä¿¡ï¼‰çš„é£ä¹¦ç”¨æˆ· IDï¼Œå‹¿ä¸ allowFrom æ··ç”¨ |
| groupAllowFrom | string[] | - | å…è®¸çš„ç¾¤ç»„å‘é€è€…åˆ—è¡¨ |
| promptSuffix | string | - | **æç¤ºè¯å¢å¼ºåç¼€**ï¼ˆè¯¦è§ä¸‹æ–¹è¯´æ˜ï¼‰ |
| actions | object | - | é£ä¹¦åŠ¨ä½œå¼€å…³ï¼šreactions / sendMessage / deleteMessage / editMessageï¼ˆé»˜è®¤ trueï¼‰ |
| tools | object | - | é£ä¹¦æ–‡æ¡£/çŸ¥è¯†åº“/äº‘ç›˜å·¥å…·ï¼šdoc / wiki / drive / permï¼ˆé»˜è®¤ doc/wiki/drive ä¸º trueï¼‰ |
| renderMode | string | "auto" | å›å¤æ¸²æŸ“ï¼šautoï¼ˆè‡ªåŠ¨ï¼‰/ rawï¼ˆçº¯æ–‡æœ¬ï¼‰/ cardï¼ˆå¡ç‰‡ï¼‰ |

##### startupChatId é…ç½®è¯´æ˜

`startupChatId` æ˜¯é£ä¹¦ç¾¤ç»„çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºï¼š
1. QVerisBot å¯åŠ¨æ—¶å‘è¯¥ç¾¤ç»„å‘é€å¯åŠ¨é€šçŸ¥
2. é…åˆ `allowOnlyStartupChats: true` å¯é™åˆ¶æœºå™¨äººåªåœ¨æŒ‡å®šç¾¤ç»„ä¸­å“åº”

**å¦‚ä½•è·å–ç¾¤ç»„ ID (chat_id)**ï¼š

1. **æ–¹æ³•ä¸€ï¼šé€šè¿‡é£ä¹¦ç¾¤è®¾ç½®è·å–**
   - åœ¨é£ä¹¦ä¸­æ‰“å¼€ç›®æ ‡ç¾¤èŠ
   - ç‚¹å‡»ç¾¤åç§°è¿›å…¥ç¾¤è®¾ç½®
   - å‘ä¸‹æ»šåŠ¨æ‰¾åˆ° **ç¾¤å·**ï¼ˆå³ chat_idï¼‰ï¼Œæ ¼å¼ä¸º `oc_xxxxxxxxxxxxxxxxxx`

2. **æ–¹æ³•äºŒï¼šé€šè¿‡æœºå™¨äººæ—¥å¿—è·å–**
   - å…ˆå¯åŠ¨ QVerisBotï¼ˆä¸é…ç½® startupChatIdï¼‰
   - å°†æœºå™¨äººæ·»åŠ åˆ°ç›®æ ‡ç¾¤èŠ
   - åœ¨ç¾¤é‡Œ @æœºå™¨äºº å‘é€ä¸€æ¡æ¶ˆæ¯
   - æŸ¥çœ‹ QVerisBot æ—¥å¿—ï¼Œä¼šæ˜¾ç¤ºç±»ä¼¼ï¼š
     ```
     feishu: message context created - chatId=oc_xxxxxxxxxxxxxxxxxx, ...
     ```
   - å¤åˆ¶æ—¥å¿—ä¸­çš„ `chatId` å€¼

3. **æ–¹æ³•ä¸‰ï¼šé€šè¿‡é£ä¹¦å¼€æ”¾å¹³å° API**
   - ä½¿ç”¨ [è·å–ç¾¤åˆ—è¡¨ API](https://open.feishu.cn/document/server-docs/group/chat/list)
   - æˆ–ä½¿ç”¨é¡¹ç›®ä¸­çš„æµ‹è¯•è„šæœ¬ï¼š`python test_scripts/test_feishu_connection.py`

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "channels": {
    "feishu": {
      "startupChatId": "oc_xxxxxxxxxxxxxxxxxxxxxxxxxx",
      "allowOnlyStartupChats": false
    }
  }
}
```

æ”¯æŒé…ç½®å¤šä¸ªç¾¤ç»„ï¼š

```json
{
  "channels": {
    "feishu": {
      "startupChatId": ["oc_group1", "oc_group2", "oc_group3"]
    }
  }
}
```

##### promptSuffix é…ç½®è¯´æ˜ï¼ˆæç¤ºè¯å¢å¼ºï¼‰

`promptSuffix` ç”¨äºåœ¨ç”¨æˆ·æ¶ˆæ¯åè‡ªåŠ¨é™„åŠ ä¸€æ®µæ–‡æœ¬ï¼Œå®ç°å¯¹ç”¨æˆ·è¯·æ±‚çš„å¢å¼ºã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥ï¼š

1. ä¸ºæ‰€æœ‰ç”¨æˆ·è¯·æ±‚æ·»åŠ ç»Ÿä¸€çš„ä¸Šä¸‹æ–‡æˆ–æŒ‡å¯¼
2. å¼ºåˆ¶ AI éµå®ˆç‰¹å®šçš„å›å¤è§„èŒƒæˆ–æ ¼å¼
3. é’ˆå¯¹ä¸åŒç¾¤ç»„è®¾ç½®ä¸åŒçš„å¢å¼ºè§„åˆ™

**åŸºæœ¬é…ç½®**ï¼ˆè´¦æˆ·çº§åˆ«ï¼Œå¯¹æ‰€æœ‰æ¶ˆæ¯ç”Ÿæ•ˆï¼‰ï¼š

```json
{
  "channels": {
    "feishu": {
      "promptSuffix": "è¯·ç”¨ä¸­æ–‡å›ç­”ã€‚å›ç­”è¦ç®€æ´æ˜äº†ï¼Œé‡ç‚¹çªå‡ºã€‚"
    }
  }
}
```

**ç¾¤ç»„çº§åˆ«é…ç½®**ï¼ˆè¦†ç›–è´¦æˆ·çº§åˆ«è®¾ç½®ï¼‰ï¼š

```json
{
  "channels": {
    "feishu": {
      "promptSuffix": "é»˜è®¤ï¼šè¯·ç”¨ä¸­æ–‡å›ç­”ã€‚",
      "groups": {
        "oc_tech_group": {
          "promptSuffix": "è¿™æ˜¯ä¸€ä¸ªæŠ€æœ¯è®¨è®ºç¾¤ã€‚è¯·æä¾›ä»£ç ç¤ºä¾‹ï¼Œä½¿ç”¨ Markdown æ ¼å¼ã€‚"
        },
        "oc_sales_group": {
          "promptSuffix": "è¿™æ˜¯é”€å”®å›¢é˜Ÿç¾¤ç»„ã€‚è¯·ç”¨ç®€æ´çš„å•†åŠ¡è¯­è¨€å›å¤ï¼Œçªå‡ºè¦ç‚¹ã€‚"
        }
      }
    }
  }
}
```

**ä½¿ç”¨åœºæ™¯ç¤ºä¾‹**ï¼š

| åœºæ™¯ | promptSuffix é…ç½® |
|------|------------------|
| ä¸­æ–‡å›å¤ | `"è¯·ç”¨ä¸­æ–‡å›ç­”ã€‚"` |
| ç®€æ´å›å¤ | `"è¯·ç®€æ´å›ç­”ï¼Œæ§åˆ¶åœ¨200å­—ä»¥å†…ã€‚"` |
| æŠ€æœ¯ç¾¤ç»„ | `"è¯·æä¾›ä»£ç ç¤ºä¾‹å’ŒæŠ€æœ¯ç»†èŠ‚ã€‚"` |
| å®¢æœåœºæ™¯ | `"è¯·ç¤¼è²Œã€ä¸“ä¸šåœ°å›å¤ï¼Œæä¾›è¯¦ç»†çš„è§£å†³æ–¹æ¡ˆã€‚"` |
| æ•°æ®åˆ†æ | `"è¯·ç”¨è¡¨æ ¼æˆ–åˆ—è¡¨å½¢å¼å‘ˆç°æ•°æ®ï¼Œä¾¿äºé˜…è¯»ã€‚"` |

**æ³¨æ„äº‹é¡¹**ï¼š

- æ§åˆ¶å‘½ä»¤ï¼ˆå¦‚ `/status`ã€`/reset`ï¼‰ä¸ä¼šé™„åŠ  promptSuffix
- ç¾¤ç»„çº§åˆ«çš„ promptSuffix ä¼šå®Œå…¨è¦†ç›–ï¼ˆè€Œéè¿½åŠ ï¼‰è´¦æˆ·çº§åˆ«çš„è®¾ç½®
- å»ºè®®ä¿æŒ promptSuffix ç®€æ´ï¼Œé¿å…è¿‡é•¿å½±å“å¯¹è¯æ•ˆç‡

##### xActionsAllowFrom ä¸é£ä¹¦å†…è§¦å‘ X æ“ä½œ

åœ¨é£ä¹¦ä¸­å¯é€šè¿‡è‡ªç„¶è¯­è¨€æˆ– `/x` å‘½ä»¤è§¦å‘ Xï¼ˆTwitterï¼‰æ“ä½œï¼ˆå…³æ³¨ã€ç‚¹èµã€å›å¤ã€ç§ä¿¡ï¼‰ã€‚åªæœ‰åˆ—å…¥ `channels.feishu.xActionsAllowFrom` çš„é£ä¹¦ç”¨æˆ· ID æ‰æœ‰æƒé™è§¦å‘ï¼Œä¸ç§èŠ/æåŠç™½åå• `allowFrom` ç›¸äº’ç‹¬ç«‹ï¼Œè¯·å‹¿æ··ç”¨ã€‚

#### 6.3.3 X (Twitter) æ¸ é“é…ç½®

X æ¸ é“ä»¥æ’ä»¶å½¢å¼æä¾›ï¼Œæ”¯æŒå•è´¦å·ä¸å¤šè´¦å·ã€‚

**å•è´¦å·é…ç½®**ï¼ˆå‡­è¯å†™åœ¨é¡¶å±‚ï¼‰ï¼š

```json
{
  "channels": {
    "x": {
      "enabled": true,
      "consumerKey": "your-consumer-key",
      "consumerSecret": "your-consumer-secret",
      "accessToken": "your-access-token",
      "accessTokenSecret": "your-access-token-secret",
      "allowFrom": ["12345678"],
      "actionsAllowFrom": ["12345678"],
      "pollIntervalSeconds": 60,
      "proxy": "http://127.0.0.1:7890"
    }
  }
}
```

**å¤šè´¦å·é…ç½®**ï¼ˆä½¿ç”¨ `accounts`ï¼‰ï¼š

```json
{
  "channels": {
    "x": {
      "enabled": true,
      "accounts": {
        "main": {
          "consumerKey": "...",
          "consumerSecret": "...",
          "accessToken": "...",
          "accessTokenSecret": "...",
          "allowFrom": ["12345678"],
          "actionsAllowFrom": ["12345678"]
        },
        "alt": {
          "consumerKey": "...",
          "consumerSecret": "...",
          "accessToken": "...",
          "accessTokenSecret": "..."
        }
      }
    }
  }
}
```

| é…ç½®é¡¹ | ç±»å‹ | è¯´æ˜ |
|-------|------|------|
| consumerKey / consumerSecret | string | å¼€å‘è€…é—¨æˆ· API Key / Secret |
| accessToken / accessTokenSecret | string | è´¦å· Access Token / Secret |
| allowFrom | string[] | å¯ @ æœºå™¨äººå¹¶å¾—åˆ°å›å¤çš„ X ç”¨æˆ· ID ç™½åå• |
| actionsAllowFrom | string[] | å¯è§¦å‘ X æ“ä½œï¼ˆå…³æ³¨/ç‚¹èµ/å›å¤/ç§ä¿¡ï¼‰çš„ X ç”¨æˆ· ID ç™½åå•ï¼Œå‹¿ä¸ allowFrom æ··ç”¨ |
| pollIntervalSeconds | number | è½®è¯¢é—´éš”ï¼ˆç§’ï¼‰ï¼Œæœ€å° 15 |
| proxy | string | API è¯·æ±‚çš„ HTTP ä»£ç† URL |

#### 6.3.4 x-actions æŠ€èƒ½ä¸é£ä¹¦ /x å‘½ä»¤

å®‰è£… X æ‰©å±•åï¼ŒåŠ©æ‰‹å¯é€šè¿‡ **message å·¥å…·çš„ X åŠ¨ä½œ** æ‰§è¡Œï¼š`x-follow`ã€`x-unfollow`ã€`x-like`ã€`x-unlike`ã€`x-reply`ã€`x-dm`ã€‚**è¯·å§‹ç»ˆç”¨ message å·¥å…·çš„ X åŠ¨ä½œæ“ä½œ Xï¼Œä¸è¦ç”¨ browser å·¥å…·ã€‚**

åœ¨é£ä¹¦å†…è¿˜å¯ä½¿ç”¨ **æ–œæ å‘½ä»¤** ç›´æ¥æ“ä½œ Xï¼ˆç”±é£ä¹¦æ¶ˆæ¯å¤„ç†ï¼Œä¸ç»è¿‡ Agentï¼‰ï¼š

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/x follow @ç”¨æˆ·å` | å…³æ³¨è¯¥ç”¨æˆ· |
| `/x unfollow @ç”¨æˆ·å` | å–æ¶ˆå…³æ³¨ |
| `/x like <æ¨æ–‡é“¾æ¥>` | ç‚¹èµæ¨æ–‡ |
| `/x unlike <æ¨æ–‡é“¾æ¥>` | å–æ¶ˆç‚¹èµ |
| `/x dm @ç”¨æˆ·å <æ¶ˆæ¯>` | å‘é€ç§ä¿¡ |
| `/x me` | æŸ¥çœ‹å½“å‰ X è´¦å·ä¿¡æ¯ |

æƒé™è§„åˆ™ï¼ˆä¸¤å¥—ç™½åå•ï¼Œå‹¿æ··ç”¨ï¼‰ï¼š
- **æåŠ â†’ å›å¤**ï¼šX ç”¨ `channels.x.allowFrom`ï¼Œé£ä¹¦ç”¨ `channels.feishu.allowFrom`
- **è§¦å‘ X æ“ä½œ**ï¼šX ç”¨ `channels.x.actionsAllowFrom`ï¼Œé£ä¹¦ç”¨ `channels.feishu.xActionsAllowFrom`

#### 6.3.5 QVeris é…ç½®

```json
{
  "tools": {
    "qveris": {
      "enabled": true,
      "apiKey": "your-qveris-api-key",
      "baseUrl": "https://qveris.ai/api/v1",
      "timeoutSeconds": 60,
      "maxResponseSize": 20480,
      "searchLimit": 10
    }
  }
}
```

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|-------|------|--------|------|
| enabled | boolean | true | æ˜¯å¦å¯ç”¨ QVeris å·¥å…· |
| apiKey | string | - | QVeris API å¯†é’¥ï¼ˆä¹Ÿå¯é€šè¿‡ QVERIS_API_KEY ç¯å¢ƒå˜é‡è®¾ç½®ï¼‰ |
| baseUrl | string | https://qveris.ai/api/v1 | QVeris API åœ°å€ |
| timeoutSeconds | number | 60 | è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ |
| maxResponseSize | number | 20480 | æœ€å¤§å“åº”å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| searchLimit | number | 10 | æœç´¢ç»“æœæ•°é‡é™åˆ¶ |

#### 6.3.6 å¤§æ¨¡å‹ä»£ç†é…ç½®

```json
{
  "models": {
    "proxy": "http://user:pass@proxy:8080",
    "providers": {
      "custom-openai": {
        "baseUrl": "https://your-proxy.com/v1",
        "apiKey": "your-api-key",
        "models": [
          {
            "id": "gpt-4o",
            "name": "GPT-4o via Proxy",
            "reasoning": false,
            "input": ["text", "image"],
            "cost": { "input": 2.5, "output": 10, "cacheRead": 1.25, "cacheWrite": 2.5 },
            "contextWindow": 128000,
            "maxTokens": 16384
          }
        ]
      }
    }
  }
}
```

#### 6.3.7 web_search é…ç½®

é»˜è®¤çš„web_searchæ˜¯Brave Searchï¼Œéœ€è¦ç”³è¯·Apikeyå¹¶äº§ç”Ÿè´¹ç”¨ã€‚å¯ä»¥è®¾ç½®æˆä½¿ç”¨QVerisçš„å·¥å…·è¿›è¡Œweb searchï¼Œæœ‰å¤šä¸ªQVerisçš„å·¥å…·å¯é€‰ï¼Œä¾‹å¦‚å°å®¿çš„æœç´¢å·¥å…·ï¼Œé…ç½®å¦‚ä¸‹ï¼š

```json
    "tools": {
        "qveris": {
            "enabled": true,
            "apiKey": "your-qveris-api-key"
        },
        "web": {
            "search": {
                "enabled": true,
                "provider": "qveris",
                "qveris": {
                  "toolId": "xiaosu.smartsearch.search.retrieve.v2.6c50f296_domestic"
                }            
            }
        }
    }
```

### 6.4 ç¯å¢ƒå˜é‡é…ç½®

ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æ•æ„Ÿä¿¡æ¯ï¼š

```bash
# é£ä¹¦å‡­è¯
export FEISHU_APP_ID="cli_xxx"
export FEISHU_APP_SECRET="xxx"

# QVeris API å¯†é’¥
export QVERIS_API_KEY="your-api-key"

# å¤§æ¨¡å‹ API å¯†é’¥
export ANTHROPIC_API_KEY="sk-ant-xxx"
export OPENAI_API_KEY="sk-xxx"

# HTTP ä»£ç†ï¼ˆå¯é€‰ï¼‰
export HTTP_PROXY="http://127.0.0.1:7890"
export HTTPS_PROXY="http://127.0.0.1:7890"
```

å»ºè®®å°†è¿™äº›é…ç½®æ·»åŠ åˆ° `~/.profile` æˆ– `~/.zshrc` ä¸­ã€‚

---

## 7. è¿è¡Œ

### 7.1 é¦–æ¬¡è¿è¡Œï¼ˆæ¨èä½¿ç”¨å‘å¯¼ï¼‰

```bash
# è¿è¡Œå®‰è£…å‘å¯¼
pnpm openclaw onboard --install-daemon
```

å‘å¯¼ä¼šå¼•å¯¼ä½ å®Œæˆï¼š
- ç½‘å…³é…ç½®
- å·¥ä½œåŒºè®¾ç½®
- æ¸ é“é…ç½®
- æŠ€èƒ½å®‰è£…

### 7.2 å¯åŠ¨ç½‘å…³

```bash
# å‰å°è¿è¡Œï¼ˆæ¨èå¼€å‘æ—¶ä½¿ç”¨ï¼‰
pnpm openclaw gateway --port 18789 --verbose

# åå°è¿è¡Œ
nohup pnpm openclaw gateway --port 18789 > /tmp/openclaw-gateway.log 2>&1 &
```

### 7.3 éªŒè¯è¿è¡ŒçŠ¶æ€

```bash
# æ£€æŸ¥æ¸ é“çŠ¶æ€
pnpm openclaw channels status

# æ·±åº¦æ£€æŸ¥ï¼ˆåŒ…æ‹¬è¿æ¥æ¢æµ‹ï¼‰
pnpm openclaw channels status --deep

# æ£€æŸ¥é£ä¹¦è¿æ¥
pnpm openclaw channels status feishu

# æ£€æŸ¥ X è¿æ¥
pnpm openclaw channels status x
```

### 7.4 è¿è¡Œè¯Šæ–­

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¿è¡Œè¯Šæ–­å·¥å…·ï¼š

```bash
pnpm openclaw doctor
```

### 7.5 é£ä¹¦äº‹ä»¶é…ç½®ï¼ˆç¬¬äºŒæ­¥ï¼‰

å½“ç½‘å…³æˆåŠŸå¯åŠ¨å¹¶æ˜¾ç¤ºç±»ä¼¼ä»¥ä¸‹æ—¥å¿—æ—¶ï¼š

```
feishu: connecting to Feishu WebSocket server...
feishu: WebSocket connection established
feishu: connected as "QVerisBot" (ou_xxx)
```

ç°åœ¨å¯ä»¥è¿”å›é£ä¹¦å¼€æ”¾å¹³å°å®Œæˆ [3.7 äº‹ä»¶è®¢é˜…é…ç½®](#37-äº‹ä»¶è®¢é˜…é…ç½®ç¬¬äºŒæ­¥éœ€è¦å…ˆå¯åŠ¨-qverisbot)ã€‚

---

## 8. ä½¿ç”¨è¯´æ˜

### 8.1 åŸºæœ¬å¯¹è¯

åœ¨é£ä¹¦ä¸­ä¸æœºå™¨äººå¯¹è¯ï¼š

1. **ç§èŠ**ï¼šç›´æ¥å‘é€æ¶ˆæ¯ç»™æœºå™¨äºº
2. **ç¾¤èŠ**ï¼š@æœºå™¨äºº åå‘é€æ¶ˆæ¯ï¼ˆå¦‚æœé…ç½®äº† requireMentionï¼‰

### 8.2 èŠå¤©å‘½ä»¤

åœ¨é£ä¹¦èŠå¤©ä¸­å‘é€ä»¥ä¸‹å‘½ä»¤ï¼š

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/status` | æŸ¥çœ‹ä¼šè¯çŠ¶æ€ï¼ˆæ¨¡å‹ã€token æ•°é‡ã€è´¹ç”¨ï¼‰ |
| `/new` æˆ– `/reset` | é‡ç½®ä¼šè¯ï¼Œæ¸…é™¤å†å²è®°å½• |
| `/compact` | å‹ç¼©ä¼šè¯ä¸Šä¸‹æ–‡ï¼ˆç”Ÿæˆæ‘˜è¦ï¼‰ |
| `/think <level>` | è®¾ç½®æ€è€ƒçº§åˆ«ï¼šoff/minimal/low/medium/high/xhigh |
| `/verbose on/off` | å¼€å…³è¯¦ç»†æ¨¡å¼ |
| `/usage off/tokens/full` | è®¾ç½®ä½¿ç”¨é‡æ˜¾ç¤ºçº§åˆ« |

### 8.3 X æ“ä½œä¸é£ä¹¦ /x å‘½ä»¤

- **X æ¸ é“**ï¼šåœ¨ X ä¸Š @ æœºå™¨äººåï¼ŒåŠ©æ‰‹å¯é€šè¿‡ message å·¥å…·çš„ x-followã€x-likeã€x-replyã€x-dm ç­‰åŠ¨ä½œæ‰§è¡Œæ“ä½œï¼›éœ€åœ¨ `channels.x.allowFrom` ä¸ `channels.x.actionsAllowFrom` ä¸­é…ç½®å…è®¸çš„ç”¨æˆ· IDã€‚
- **é£ä¹¦å†…æ“ä½œ X**ï¼šåœ¨é£ä¹¦ç¾¤èŠæˆ–ç§èŠä¸­å‘é€ `/x follow @ç”¨æˆ·å`ã€`/x like <æ¨æ–‡é“¾æ¥>`ã€`/x dm @ç”¨æˆ·å æ¶ˆæ¯` ç­‰ï¼Œæˆ–ä½¿ç”¨è‡ªç„¶è¯­è¨€ï¼ˆå¦‚ã€Œå¸®æˆ‘å…³æ³¨ @elonmuskã€ï¼‰ï¼Œç”±åŠ©æ‰‹è°ƒç”¨ x-actions æ‰§è¡Œï¼›éœ€åœ¨ `channels.feishu.xActionsAllowFrom` ä¸­é…ç½®å…è®¸çš„é£ä¹¦ç”¨æˆ· IDã€‚

### 8.4 ä½¿ç”¨ QVeris å·¥å…·

QVerisBot ä¼šè‡ªåŠ¨è¯†åˆ«éœ€è¦ä½¿ç”¨å¤–éƒ¨å·¥å…·çš„åœºæ™¯ã€‚ä½ ä¹Ÿå¯ä»¥æ˜¾å¼è¯·æ±‚ï¼š

```
å¸®æˆ‘æŸ¥è¯¢ä¸€ä¸‹åŒ—äº¬ä»Šå¤©çš„å¤©æ°”

æœç´¢æœ€æ–°çš„ AI æŠ€æœ¯æ–°é—»

æŸ¥è¯¢è…¾è®¯è‚¡ç¥¨çš„å®æ—¶è¡Œæƒ…
```

### 8.5 CLI å‘½ä»¤

```bash
# å‘é€æ¶ˆæ¯
pnpm openclaw message send --to oc_xxx --message "Hello from QVerisBot"

# ä¸åŠ©æ‰‹å¯¹è¯
pnpm openclaw agent --message "å¸®æˆ‘å†™ä¸€ä¸ª Python è„šæœ¬" --thinking high

# æŸ¥çœ‹å¸®åŠ©
pnpm openclaw --help
pnpm openclaw gateway --help
pnpm openclaw channels --help
```

### 8.6 æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹ç½‘å…³æ—¥å¿—
tail -f /tmp/openclaw-gateway.log

# å¼€å¯è¯¦ç»†æ—¥å¿—è¿è¡Œ
pnpm openclaw gateway --verbose

# ä½¿ç”¨ debug æ¨¡å¼
DEBUG=* pnpm openclaw gateway
```

### 8.7 å¸¸è§é—®é¢˜

#### Q: é£ä¹¦æ¶ˆæ¯æ”¶ä¸åˆ°ï¼Ÿ

1. æ£€æŸ¥åº”ç”¨æ˜¯å¦å·²å‘å¸ƒ
2. æ£€æŸ¥æƒé™æ˜¯å¦æ­£ç¡®é…ç½®
3. ç¡®è®¤ WebSocket è¿æ¥å·²å»ºç«‹ï¼ˆæŸ¥çœ‹æ—¥å¿—æ˜¯å¦æ˜¾ç¤º "WebSocket connection established"ï¼‰
4. ç¡®è®¤äº‹ä»¶è®¢é˜…å·²é…ç½®ï¼ˆåœ¨é£ä¹¦å¼€æ”¾å¹³å°çš„äº‹ä»¶è®¢é˜…é¡µé¢ï¼‰
5. ç¡®è®¤ç”¨æˆ·åœ¨åº”ç”¨çš„å¯ç”¨èŒƒå›´å†…ï¼ˆå‘å¸ƒæ—¶è®¾ç½®çš„ç”¨æˆ·åˆ—è¡¨ï¼‰
6. æ£€æŸ¥ `startupChatId` é…ç½®çš„ç¾¤ç»„ ID æ˜¯å¦æ­£ç¡®

#### Q: QVeris å·¥å…·è°ƒç”¨å¤±è´¥ï¼Ÿ

1. æ£€æŸ¥ API å¯†é’¥æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆå¯èƒ½éœ€è¦ä»£ç†ï¼‰
3. æŸ¥çœ‹æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

#### Q: å¤§æ¨¡å‹ API è°ƒç”¨è¶…æ—¶ï¼Ÿ

1. é…ç½® HTTP ä»£ç†ï¼š`models.proxy`
2. æ£€æŸ¥ä»£ç†æœåŠ¡æ˜¯å¦æ­£å¸¸å·¥ä½œ
3. å°è¯•åˆ‡æ¢æ¨¡å‹æä¾›å•†

#### Q: X æ“ä½œæç¤º Permission deniedï¼Ÿ

1. åœ¨ X ä¸Šè§¦å‘ï¼šéœ€åœ¨ `channels.x.actionsAllowFrom` ä¸­é…ç½®ä½ çš„ X ç”¨æˆ· ID
2. åœ¨é£ä¹¦å†…è§¦å‘ï¼šéœ€åœ¨ `channels.feishu.xActionsAllowFrom` ä¸­é…ç½®ä½ çš„é£ä¹¦ç”¨æˆ· ID
3. å‹¿å°†ã€ŒæåŠç™½åå•ã€ï¼ˆallowFromï¼‰ä¸ã€ŒX æ“ä½œç™½åå•ã€ï¼ˆactionsAllowFrom / xActionsAllowFromï¼‰æ··ç”¨

---

## é™„å½•

### A. é…ç½®æ–‡ä»¶æ¨¡æ¿

å®Œæ•´é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼š`~/.openclaw/openclaw.json`

```json
{
  "agents": {
    "defaults": {
      "model": { "primary": "anthropic/claude-opus-4-5" },
      "workspace": "~/clawd"
    }
  },
  "gateway": {
    "port": 18789,
    "bind": "loopback"
  },
  "channels": {
    "feishu": {
      "enabled": true,
      "appId": "cli_xxx",
      "appSecret": "xxx",
      "eventMode": "websocket",
      "startupChatId": ["oc_xxx"],
      "dmPolicy": "open",
      "groupPolicy": "open",
      "promptSuffix": "è¯·ç”¨ä¸­æ–‡å›ç­”ã€‚",
      "allowFrom": [],
      "xActionsAllowFrom": [],
      "actions": {
        "reactions": true,
        "sendMessage": true,
        "deleteMessage": true,
        "editMessage": true
      },
      "tools": {
        "doc": true,
        "wiki": true,
        "drive": true,
        "perm": false
      },
      "renderMode": "auto",
      "groups": {
        "oc_xxx": {
          "requireMention": false,
          "promptSuffix": "è¿™æ˜¯æŠ€æœ¯è®¨è®ºç¾¤ï¼Œè¯·æä¾›ä»£ç ç¤ºä¾‹ã€‚"
        }
      }
    },
    "x": {
      "enabled": true,
      "consumerKey": "your-consumer-key",
      "consumerSecret": "your-consumer-secret",
      "accessToken": "your-access-token",
      "accessTokenSecret": "your-access-token-secret",
      "allowFrom": [],
      "actionsAllowFrom": [],
      "pollIntervalSeconds": 60,
      "proxy": "http://127.0.0.1:7890"
    }
  },
  "tools": {
    "qveris": {
      "enabled": true,
      "apiKey": "your-qveris-api-key"
    },
    "web": {
      "search": {
        "enabled": true,
        "provider": "qveris",
        "qveris": {
          "toolId": "xiaosu.smartsearch.search.retrieve.v2.6c50f296_domestic"
        }
      },
      "fetch": { "enabled": true }
    }
  },
  "models": {
    "proxy": "http://127.0.0.1:7890"
  }
}
```

### B. ç›¸å…³é“¾æ¥

- [QVeris AI](https://qveris.ai) - QVeris ä¸‡èƒ½å·¥å…·ç®±
- [QVerisBot GitHub](https://github.com/QVerisAI/QVerisBot) - QVerisBot æºä»£ç 
- [OpenClaw æ–‡æ¡£](https://docs.openclaw.ai) - å®Œæ•´æ–‡æ¡£
- [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn) - é£ä¹¦å¼€å‘è€…æ–‡æ¡£

### C. è·å–å¸®åŠ©

- æŸ¥çœ‹æ–‡æ¡£ï¼šhttps://docs.openclaw.ai
- æäº¤ Issueï¼šhttps://github.com/QVerisAI/QVerisBot/issues
- åŠ å…¥ Discordï¼šhttps://discord.gg/clawd

---

*æœ¬æ–‡æ¡£åŸºäº QVerisBot ç‰ˆæœ¬ 2026.1.28-qveris.1 ç¼–å†™ã€‚*
